{"ast":null,"code":"/* eslint-disable max-classes-per-file */\nimport { getWindow, getDocument } from 'ssr-window';\nimport { extend, serializeObject } from './utils.js';\nconst globals = {};\nlet jsonpRequests = 0;\n\nclass RequestResponse {\n  constructor(obj) {\n    Object.assign(this, obj);\n  }\n\n}\n\nclass RequestError extends Error {\n  constructor(obj) {\n    super();\n    Object.assign(this, obj);\n  }\n\n}\n\nconst request = requestOptions => new Promise((resolve, reject) => {\n  const window = getWindow();\n  const document = getDocument();\n  const globalsNoCallbacks = extend({}, globals);\n  'beforeCreate beforeOpen beforeSend error complete success statusCode'.split(' ').forEach(callbackName => {\n    delete globalsNoCallbacks[callbackName];\n  });\n  const defaults = extend({\n    url: window.location.toString(),\n    method: 'GET',\n    data: false,\n    async: true,\n    cache: true,\n    user: '',\n    password: '',\n    headers: {},\n    xhrFields: {},\n    statusCode: {},\n    processData: true,\n    dataType: 'text',\n    contentType: 'application/x-www-form-urlencoded',\n    timeout: 0\n  }, globalsNoCallbacks);\n  let proceedRequest;\n  const options = extend({}, defaults, requestOptions);\n\n  if (requestOptions.abortController) {\n    options.abortController = requestOptions.abortController;\n  }\n\n  if (options.abortController && options.abortController.canceled) {\n    reject(new RequestError({\n      options,\n      status: 'canceled',\n      message: 'canceled'\n    }));\n    return;\n  } // Function to run XHR callbacks and events\n\n\n  function fireCallback(callbackName) {\n    /*\n    Callbacks:\n    beforeCreate (options),\n    beforeOpen (xhr, options),\n    beforeSend (xhr, options),\n    error (xhr, status, message),\n    complete (xhr, status),\n    success (response, status, xhr),\n    statusCode ()\n    */\n    let globalCallbackValue;\n    let optionCallbackValue;\n\n    for (var _len = arguments.length, data = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      data[_key - 1] = arguments[_key];\n    }\n\n    if (globals[callbackName]) {\n      globalCallbackValue = globals[callbackName](...data);\n    }\n\n    if (options[callbackName]) {\n      optionCallbackValue = options[callbackName](...data);\n    }\n\n    if (typeof globalCallbackValue !== 'boolean') globalCallbackValue = true;\n    if (typeof optionCallbackValue !== 'boolean') optionCallbackValue = true;\n\n    if (options.abortController && options.abortController.canceled && (callbackName === 'beforeCreate' || callbackName === 'beforeOpen' || callbackName === 'beforeSend')) {\n      return false;\n    }\n\n    return globalCallbackValue && optionCallbackValue;\n  } // Before create callback\n\n\n  proceedRequest = fireCallback('beforeCreate', options);\n\n  if (proceedRequest === false) {\n    reject(new RequestError({\n      options,\n      status: 'canceled',\n      message: 'canceled'\n    }));\n    return;\n  } // For jQuery guys\n\n\n  if (options.type) options.method = options.type; // Parameters Prefix\n\n  let paramsPrefix = options.url.indexOf('?') >= 0 ? '&' : '?'; // UC method\n\n  const method = options.method.toUpperCase(); // Data to modify GET URL\n\n  if ((method === 'GET' || method === 'HEAD' || method === 'OPTIONS' || method === 'DELETE') && options.data) {\n    let stringData;\n\n    if (typeof options.data === 'string') {\n      // Should be key=value string\n      if (options.data.indexOf('?') >= 0) stringData = options.data.split('?')[1];else stringData = options.data;\n    } else {\n      // Should be key=value object\n      stringData = serializeObject(options.data);\n    }\n\n    if (stringData.length) {\n      options.url += paramsPrefix + stringData;\n      if (paramsPrefix === '?') paramsPrefix = '&';\n    }\n  } // JSONP\n\n\n  if (options.dataType === 'json' && options.url.indexOf('callback=') >= 0) {\n    const callbackName = `f7jsonp_${Date.now() + (jsonpRequests += 1)}`;\n    let abortTimeout;\n    const callbackSplit = options.url.split('callback=');\n    let requestUrl = `${callbackSplit[0]}callback=${callbackName}`;\n\n    if (callbackSplit[1].indexOf('&') >= 0) {\n      const addVars = callbackSplit[1].split('&').filter(el => el.indexOf('=') > 0).join('&');\n      if (addVars.length > 0) requestUrl += `&${addVars}`;\n    } // Create script\n\n\n    let script = document.createElement('script');\n    script.type = 'text/javascript';\n\n    script.onerror = function onerror() {\n      clearTimeout(abortTimeout);\n      fireCallback('error', null, 'scripterror', 'scripterror');\n      reject(new RequestError({\n        options,\n        status: 'scripterror',\n        message: 'scripterror'\n      }));\n      fireCallback('complete', null, 'scripterror');\n    };\n\n    script.src = requestUrl; // Handler\n\n    window[callbackName] = function jsonpCallback(data) {\n      clearTimeout(abortTimeout);\n      fireCallback('success', data);\n      script.parentNode.removeChild(script);\n      script = null;\n      delete window[callbackName];\n      resolve(new RequestResponse({\n        options,\n        data\n      }));\n    };\n\n    document.querySelector('head').appendChild(script);\n\n    if (options.timeout > 0) {\n      abortTimeout = setTimeout(() => {\n        script.parentNode.removeChild(script);\n        script = null;\n        fireCallback('error', null, 'timeout', 'timeout');\n        reject(new RequestError({\n          options,\n          status: 'timeout',\n          message: 'timeout'\n        }));\n      }, options.timeout);\n    }\n\n    return;\n  } // Cache for GET/HEAD requests\n\n\n  if (method === 'GET' || method === 'HEAD' || method === 'OPTIONS' || method === 'DELETE') {\n    if (options.cache === false) {\n      options.url += `${paramsPrefix}_nocache${Date.now()}`;\n    }\n  } // Create XHR\n\n\n  const xhr = new XMLHttpRequest();\n\n  if (options.abortController) {\n    let aborted = false;\n\n    options.abortController.onAbort = () => {\n      if (aborted) return;\n      aborted = true;\n      xhr.abort();\n      reject(new RequestError({\n        options,\n        xhr,\n        status: 'canceled',\n        message: 'canceled'\n      }));\n    };\n  } // Save Request URL\n\n\n  xhr.requestUrl = options.url;\n  xhr.requestParameters = options; // Before open callback\n\n  proceedRequest = fireCallback('beforeOpen', xhr, options);\n\n  if (proceedRequest === false) {\n    reject(new RequestError({\n      options,\n      xhr,\n      status: 'canceled',\n      message: 'canceled'\n    }));\n    return;\n  } // Open XHR\n\n\n  xhr.open(method, options.url, options.async, options.user, options.password); // Create POST Data\n\n  let postData = null;\n\n  if ((method === 'POST' || method === 'PUT' || method === 'PATCH') && options.data) {\n    if (options.processData) {\n      const postDataInstances = [ArrayBuffer, Blob, Document, FormData]; // Post Data\n\n      if (postDataInstances.indexOf(options.data.constructor) >= 0) {\n        postData = options.data;\n      } else {\n        // POST Headers\n        const boundary = `---------------------------${Date.now().toString(16)}`;\n\n        if (options.contentType === 'multipart/form-data') {\n          xhr.setRequestHeader('Content-Type', `multipart/form-data; boundary=${boundary}`);\n        } else {\n          xhr.setRequestHeader('Content-Type', options.contentType);\n        }\n\n        postData = '';\n        let data = serializeObject(options.data);\n\n        if (options.contentType === 'multipart/form-data') {\n          data = data.split('&');\n          const newData = [];\n\n          for (let i = 0; i < data.length; i += 1) {\n            newData.push(`Content-Disposition: form-data; name=\"${data[i].split('=')[0]}\"\\r\\n\\r\\n${data[i].split('=')[1]}\\r\\n`);\n          }\n\n          postData = `--${boundary}\\r\\n${newData.join(`--${boundary}\\r\\n`)}--${boundary}--\\r\\n`;\n        } else if (options.contentType === 'application/json') {\n          postData = JSON.stringify(options.data);\n        } else {\n          postData = data;\n        }\n      }\n    } else {\n      postData = options.data;\n      xhr.setRequestHeader('Content-Type', options.contentType);\n    }\n  }\n\n  if (options.dataType === 'json' && (!options.headers || !options.headers.Accept)) {\n    xhr.setRequestHeader('Accept', 'application/json');\n  } // Additional headers\n\n\n  if (options.headers) {\n    Object.keys(options.headers).forEach(headerName => {\n      if (typeof options.headers[headerName] === 'undefined') return;\n      xhr.setRequestHeader(headerName, options.headers[headerName]);\n    });\n  } // Check for crossDomain\n\n\n  if (typeof options.crossDomain === 'undefined') {\n    options.crossDomain = // eslint-disable-next-line\n    /^([\\w-]+:)?\\/\\/([^\\/]+)/.test(options.url) && RegExp.$2 !== window.location.host;\n  }\n\n  if (!options.crossDomain) {\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  }\n\n  if (options.xhrFields) {\n    extend(xhr, options.xhrFields);\n  } // Handle XHR\n\n\n  xhr.onload = function onload() {\n    if (xhr.status >= 200 && xhr.status < 300 || xhr.status === 0) {\n      let responseData;\n\n      if (options.dataType === 'json') {\n        let parseError;\n\n        try {\n          responseData = JSON.parse(xhr.responseText);\n        } catch (err) {\n          parseError = true;\n        }\n\n        if (!parseError) {\n          fireCallback('success', responseData, xhr.status, xhr);\n          resolve(new RequestResponse({\n            options,\n            data: responseData,\n            status: xhr.status,\n            xhr\n          }));\n        } else {\n          fireCallback('error', xhr, 'parseerror', 'parseerror');\n          reject(new RequestError({\n            options,\n            xhr,\n            status: 'parseerror',\n            message: 'parseerror'\n          }));\n        }\n      } else {\n        responseData = xhr.responseType === 'text' || xhr.responseType === '' ? xhr.responseText : xhr.response;\n        fireCallback('success', responseData, xhr.status, xhr);\n        resolve(new RequestResponse({\n          options,\n          data: responseData,\n          status: xhr.status,\n          xhr\n        }));\n      }\n    } else {\n      fireCallback('error', xhr, xhr.status, xhr.statusText);\n      reject(new RequestError({\n        options,\n        xhr,\n        status: xhr.status,\n        message: xhr.statusText\n      }));\n    }\n\n    if (options.statusCode) {\n      if (globals.statusCode && globals.statusCode[xhr.status]) globals.statusCode[xhr.status](xhr);\n      if (options.statusCode[xhr.status]) options.statusCode[xhr.status](xhr);\n    }\n\n    fireCallback('complete', xhr, xhr.status);\n  };\n\n  xhr.onerror = function onerror() {\n    fireCallback('error', xhr, xhr.status, xhr.status);\n    reject(new RequestError({\n      options,\n      xhr,\n      status: xhr.status,\n      message: xhr.statusText\n    }));\n    fireCallback('complete', xhr, 'error');\n  }; // Timeout\n\n\n  if (options.timeout > 0) {\n    xhr.timeout = options.timeout;\n\n    xhr.ontimeout = () => {\n      fireCallback('error', xhr, 'timeout', 'timeout');\n      reject(new RequestError({\n        options,\n        xhr,\n        status: 'timeout',\n        message: 'timeout'\n      }));\n      fireCallback('complete', xhr, 'timeout');\n    };\n  } // Ajax start callback\n\n\n  proceedRequest = fireCallback('beforeSend', xhr, options);\n\n  if (proceedRequest === false) {\n    reject(new RequestError({\n      options,\n      xhr,\n      status: 'canceled',\n      message: 'canceled'\n    }));\n    return;\n  } // Send XHR\n\n\n  xhr.send(postData);\n});\n\nfunction requestShortcut(method) {\n  let [url, data, success, error, dataType] = [];\n\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  if (typeof args[1] === 'function') {\n    [url, success, error, dataType] = args;\n  } else {\n    [url, data, success, error, dataType] = args;\n  }\n\n  [success, error].forEach(callback => {\n    if (typeof callback === 'string') {\n      dataType = callback;\n      if (callback === success) success = undefined;else error = undefined;\n    }\n  });\n  dataType = dataType || (method === 'json' || method === 'postJSON' ? 'json' : undefined);\n  const requestOptions = {\n    url,\n    method: method === 'post' || method === 'postJSON' ? 'POST' : 'GET',\n    data,\n    success,\n    error,\n    dataType\n  };\n\n  if (method === 'postJSON') {\n    extend(requestOptions, {\n      contentType: 'application/json',\n      processData: false,\n      crossDomain: true,\n      data: typeof data === 'string' ? data : JSON.stringify(data)\n    });\n  }\n\n  return request(requestOptions);\n}\n\nObject.assign(request, {\n  get: function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return requestShortcut('get', ...args);\n  },\n  post: function () {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return requestShortcut('post', ...args);\n  },\n  json: function () {\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    return requestShortcut('json', ...args);\n  },\n  getJSON: function () {\n    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      args[_key6] = arguments[_key6];\n    }\n\n    return requestShortcut('json', ...args);\n  },\n  postJSON: function () {\n    for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n      args[_key7] = arguments[_key7];\n    }\n\n    return requestShortcut('postJSON', ...args);\n  }\n});\n\nrequest.abortController = () => {\n  const contoller = {\n    canceled: false,\n    onAbort: null,\n\n    abort() {\n      contoller.canceled = true;\n      if (contoller.onAbort) contoller.onAbort();\n    }\n\n  };\n  return contoller;\n};\n\nrequest.setup = function setup(options) {\n  if (options.type && !options.method) {\n    extend(options, {\n      method: options.type\n    });\n  }\n\n  extend(globals, options);\n};\n\nexport default request;","map":{"version":3,"names":["getWindow","getDocument","extend","serializeObject","globals","jsonpRequests","RequestResponse","constructor","obj","Object","assign","RequestError","Error","request","requestOptions","Promise","resolve","reject","window","document","globalsNoCallbacks","split","forEach","callbackName","defaults","url","location","toString","method","data","async","cache","user","password","headers","xhrFields","statusCode","processData","dataType","contentType","timeout","proceedRequest","options","abortController","canceled","status","message","fireCallback","globalCallbackValue","optionCallbackValue","_len","arguments","length","Array","_key","type","paramsPrefix","indexOf","toUpperCase","stringData","Date","now","abortTimeout","callbackSplit","requestUrl","addVars","filter","el","join","script","createElement","onerror","clearTimeout","src","jsonpCallback","parentNode","removeChild","querySelector","appendChild","setTimeout","xhr","XMLHttpRequest","aborted","onAbort","abort","requestParameters","open","postData","postDataInstances","ArrayBuffer","Blob","Document","FormData","boundary","setRequestHeader","newData","i","push","JSON","stringify","Accept","keys","headerName","crossDomain","test","RegExp","$2","host","onload","responseData","parseError","parse","responseText","err","responseType","response","statusText","ontimeout","send","requestShortcut","success","error","_len2","args","_key2","callback","undefined","get","_len3","_key3","post","_len4","_key4","json","_len5","_key5","getJSON","_len6","_key6","postJSON","_len7","_key7","contoller","setup"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/shared/request.js"],"sourcesContent":["/* eslint-disable max-classes-per-file */\nimport { getWindow, getDocument } from 'ssr-window';\nimport { extend, serializeObject } from './utils.js';\nconst globals = {};\nlet jsonpRequests = 0;\n\nclass RequestResponse {\n  constructor(obj) {\n    Object.assign(this, obj);\n  }\n\n}\n\nclass RequestError extends Error {\n  constructor(obj) {\n    super();\n    Object.assign(this, obj);\n  }\n\n}\n\nconst request = requestOptions => new Promise((resolve, reject) => {\n  const window = getWindow();\n  const document = getDocument();\n  const globalsNoCallbacks = extend({}, globals);\n  'beforeCreate beforeOpen beforeSend error complete success statusCode'.split(' ').forEach(callbackName => {\n    delete globalsNoCallbacks[callbackName];\n  });\n  const defaults = extend({\n    url: window.location.toString(),\n    method: 'GET',\n    data: false,\n    async: true,\n    cache: true,\n    user: '',\n    password: '',\n    headers: {},\n    xhrFields: {},\n    statusCode: {},\n    processData: true,\n    dataType: 'text',\n    contentType: 'application/x-www-form-urlencoded',\n    timeout: 0\n  }, globalsNoCallbacks);\n  let proceedRequest;\n  const options = extend({}, defaults, requestOptions);\n\n  if (requestOptions.abortController) {\n    options.abortController = requestOptions.abortController;\n  }\n\n  if (options.abortController && options.abortController.canceled) {\n    reject(new RequestError({\n      options,\n      status: 'canceled',\n      message: 'canceled'\n    }));\n    return;\n  } // Function to run XHR callbacks and events\n\n\n  function fireCallback(callbackName) {\n    /*\n    Callbacks:\n    beforeCreate (options),\n    beforeOpen (xhr, options),\n    beforeSend (xhr, options),\n    error (xhr, status, message),\n    complete (xhr, status),\n    success (response, status, xhr),\n    statusCode ()\n    */\n    let globalCallbackValue;\n    let optionCallbackValue;\n\n    for (var _len = arguments.length, data = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      data[_key - 1] = arguments[_key];\n    }\n\n    if (globals[callbackName]) {\n      globalCallbackValue = globals[callbackName](...data);\n    }\n\n    if (options[callbackName]) {\n      optionCallbackValue = options[callbackName](...data);\n    }\n\n    if (typeof globalCallbackValue !== 'boolean') globalCallbackValue = true;\n    if (typeof optionCallbackValue !== 'boolean') optionCallbackValue = true;\n\n    if (options.abortController && options.abortController.canceled && (callbackName === 'beforeCreate' || callbackName === 'beforeOpen' || callbackName === 'beforeSend')) {\n      return false;\n    }\n\n    return globalCallbackValue && optionCallbackValue;\n  } // Before create callback\n\n\n  proceedRequest = fireCallback('beforeCreate', options);\n\n  if (proceedRequest === false) {\n    reject(new RequestError({\n      options,\n      status: 'canceled',\n      message: 'canceled'\n    }));\n    return;\n  } // For jQuery guys\n\n\n  if (options.type) options.method = options.type; // Parameters Prefix\n\n  let paramsPrefix = options.url.indexOf('?') >= 0 ? '&' : '?'; // UC method\n\n  const method = options.method.toUpperCase(); // Data to modify GET URL\n\n  if ((method === 'GET' || method === 'HEAD' || method === 'OPTIONS' || method === 'DELETE') && options.data) {\n    let stringData;\n\n    if (typeof options.data === 'string') {\n      // Should be key=value string\n      if (options.data.indexOf('?') >= 0) stringData = options.data.split('?')[1];else stringData = options.data;\n    } else {\n      // Should be key=value object\n      stringData = serializeObject(options.data);\n    }\n\n    if (stringData.length) {\n      options.url += paramsPrefix + stringData;\n      if (paramsPrefix === '?') paramsPrefix = '&';\n    }\n  } // JSONP\n\n\n  if (options.dataType === 'json' && options.url.indexOf('callback=') >= 0) {\n    const callbackName = `f7jsonp_${Date.now() + (jsonpRequests += 1)}`;\n    let abortTimeout;\n    const callbackSplit = options.url.split('callback=');\n    let requestUrl = `${callbackSplit[0]}callback=${callbackName}`;\n\n    if (callbackSplit[1].indexOf('&') >= 0) {\n      const addVars = callbackSplit[1].split('&').filter(el => el.indexOf('=') > 0).join('&');\n      if (addVars.length > 0) requestUrl += `&${addVars}`;\n    } // Create script\n\n\n    let script = document.createElement('script');\n    script.type = 'text/javascript';\n\n    script.onerror = function onerror() {\n      clearTimeout(abortTimeout);\n      fireCallback('error', null, 'scripterror', 'scripterror');\n      reject(new RequestError({\n        options,\n        status: 'scripterror',\n        message: 'scripterror'\n      }));\n      fireCallback('complete', null, 'scripterror');\n    };\n\n    script.src = requestUrl; // Handler\n\n    window[callbackName] = function jsonpCallback(data) {\n      clearTimeout(abortTimeout);\n      fireCallback('success', data);\n      script.parentNode.removeChild(script);\n      script = null;\n      delete window[callbackName];\n      resolve(new RequestResponse({\n        options,\n        data\n      }));\n    };\n\n    document.querySelector('head').appendChild(script);\n\n    if (options.timeout > 0) {\n      abortTimeout = setTimeout(() => {\n        script.parentNode.removeChild(script);\n        script = null;\n        fireCallback('error', null, 'timeout', 'timeout');\n        reject(new RequestError({\n          options,\n          status: 'timeout',\n          message: 'timeout'\n        }));\n      }, options.timeout);\n    }\n\n    return;\n  } // Cache for GET/HEAD requests\n\n\n  if (method === 'GET' || method === 'HEAD' || method === 'OPTIONS' || method === 'DELETE') {\n    if (options.cache === false) {\n      options.url += `${paramsPrefix}_nocache${Date.now()}`;\n    }\n  } // Create XHR\n\n\n  const xhr = new XMLHttpRequest();\n\n  if (options.abortController) {\n    let aborted = false;\n\n    options.abortController.onAbort = () => {\n      if (aborted) return;\n      aborted = true;\n      xhr.abort();\n      reject(new RequestError({\n        options,\n        xhr,\n        status: 'canceled',\n        message: 'canceled'\n      }));\n    };\n  } // Save Request URL\n\n\n  xhr.requestUrl = options.url;\n  xhr.requestParameters = options; // Before open callback\n\n  proceedRequest = fireCallback('beforeOpen', xhr, options);\n\n  if (proceedRequest === false) {\n    reject(new RequestError({\n      options,\n      xhr,\n      status: 'canceled',\n      message: 'canceled'\n    }));\n    return;\n  } // Open XHR\n\n\n  xhr.open(method, options.url, options.async, options.user, options.password); // Create POST Data\n\n  let postData = null;\n\n  if ((method === 'POST' || method === 'PUT' || method === 'PATCH') && options.data) {\n    if (options.processData) {\n      const postDataInstances = [ArrayBuffer, Blob, Document, FormData]; // Post Data\n\n      if (postDataInstances.indexOf(options.data.constructor) >= 0) {\n        postData = options.data;\n      } else {\n        // POST Headers\n        const boundary = `---------------------------${Date.now().toString(16)}`;\n\n        if (options.contentType === 'multipart/form-data') {\n          xhr.setRequestHeader('Content-Type', `multipart/form-data; boundary=${boundary}`);\n        } else {\n          xhr.setRequestHeader('Content-Type', options.contentType);\n        }\n\n        postData = '';\n        let data = serializeObject(options.data);\n\n        if (options.contentType === 'multipart/form-data') {\n          data = data.split('&');\n          const newData = [];\n\n          for (let i = 0; i < data.length; i += 1) {\n            newData.push(`Content-Disposition: form-data; name=\"${data[i].split('=')[0]}\"\\r\\n\\r\\n${data[i].split('=')[1]}\\r\\n`);\n          }\n\n          postData = `--${boundary}\\r\\n${newData.join(`--${boundary}\\r\\n`)}--${boundary}--\\r\\n`;\n        } else if (options.contentType === 'application/json') {\n          postData = JSON.stringify(options.data);\n        } else {\n          postData = data;\n        }\n      }\n    } else {\n      postData = options.data;\n      xhr.setRequestHeader('Content-Type', options.contentType);\n    }\n  }\n\n  if (options.dataType === 'json' && (!options.headers || !options.headers.Accept)) {\n    xhr.setRequestHeader('Accept', 'application/json');\n  } // Additional headers\n\n\n  if (options.headers) {\n    Object.keys(options.headers).forEach(headerName => {\n      if (typeof options.headers[headerName] === 'undefined') return;\n      xhr.setRequestHeader(headerName, options.headers[headerName]);\n    });\n  } // Check for crossDomain\n\n\n  if (typeof options.crossDomain === 'undefined') {\n    options.crossDomain = // eslint-disable-next-line\n    /^([\\w-]+:)?\\/\\/([^\\/]+)/.test(options.url) && RegExp.$2 !== window.location.host;\n  }\n\n  if (!options.crossDomain) {\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  }\n\n  if (options.xhrFields) {\n    extend(xhr, options.xhrFields);\n  } // Handle XHR\n\n\n  xhr.onload = function onload() {\n    if (xhr.status >= 200 && xhr.status < 300 || xhr.status === 0) {\n      let responseData;\n\n      if (options.dataType === 'json') {\n        let parseError;\n\n        try {\n          responseData = JSON.parse(xhr.responseText);\n        } catch (err) {\n          parseError = true;\n        }\n\n        if (!parseError) {\n          fireCallback('success', responseData, xhr.status, xhr);\n          resolve(new RequestResponse({\n            options,\n            data: responseData,\n            status: xhr.status,\n            xhr\n          }));\n        } else {\n          fireCallback('error', xhr, 'parseerror', 'parseerror');\n          reject(new RequestError({\n            options,\n            xhr,\n            status: 'parseerror',\n            message: 'parseerror'\n          }));\n        }\n      } else {\n        responseData = xhr.responseType === 'text' || xhr.responseType === '' ? xhr.responseText : xhr.response;\n        fireCallback('success', responseData, xhr.status, xhr);\n        resolve(new RequestResponse({\n          options,\n          data: responseData,\n          status: xhr.status,\n          xhr\n        }));\n      }\n    } else {\n      fireCallback('error', xhr, xhr.status, xhr.statusText);\n      reject(new RequestError({\n        options,\n        xhr,\n        status: xhr.status,\n        message: xhr.statusText\n      }));\n    }\n\n    if (options.statusCode) {\n      if (globals.statusCode && globals.statusCode[xhr.status]) globals.statusCode[xhr.status](xhr);\n      if (options.statusCode[xhr.status]) options.statusCode[xhr.status](xhr);\n    }\n\n    fireCallback('complete', xhr, xhr.status);\n  };\n\n  xhr.onerror = function onerror() {\n    fireCallback('error', xhr, xhr.status, xhr.status);\n    reject(new RequestError({\n      options,\n      xhr,\n      status: xhr.status,\n      message: xhr.statusText\n    }));\n    fireCallback('complete', xhr, 'error');\n  }; // Timeout\n\n\n  if (options.timeout > 0) {\n    xhr.timeout = options.timeout;\n\n    xhr.ontimeout = () => {\n      fireCallback('error', xhr, 'timeout', 'timeout');\n      reject(new RequestError({\n        options,\n        xhr,\n        status: 'timeout',\n        message: 'timeout'\n      }));\n      fireCallback('complete', xhr, 'timeout');\n    };\n  } // Ajax start callback\n\n\n  proceedRequest = fireCallback('beforeSend', xhr, options);\n\n  if (proceedRequest === false) {\n    reject(new RequestError({\n      options,\n      xhr,\n      status: 'canceled',\n      message: 'canceled'\n    }));\n    return;\n  } // Send XHR\n\n\n  xhr.send(postData);\n});\n\nfunction requestShortcut(method) {\n  let [url, data, success, error, dataType] = [];\n\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  if (typeof args[1] === 'function') {\n    [url, success, error, dataType] = args;\n  } else {\n    [url, data, success, error, dataType] = args;\n  }\n\n  [success, error].forEach(callback => {\n    if (typeof callback === 'string') {\n      dataType = callback;\n      if (callback === success) success = undefined;else error = undefined;\n    }\n  });\n  dataType = dataType || (method === 'json' || method === 'postJSON' ? 'json' : undefined);\n  const requestOptions = {\n    url,\n    method: method === 'post' || method === 'postJSON' ? 'POST' : 'GET',\n    data,\n    success,\n    error,\n    dataType\n  };\n\n  if (method === 'postJSON') {\n    extend(requestOptions, {\n      contentType: 'application/json',\n      processData: false,\n      crossDomain: true,\n      data: typeof data === 'string' ? data : JSON.stringify(data)\n    });\n  }\n\n  return request(requestOptions);\n}\n\nObject.assign(request, {\n  get: function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return requestShortcut('get', ...args);\n  },\n  post: function () {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return requestShortcut('post', ...args);\n  },\n  json: function () {\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    return requestShortcut('json', ...args);\n  },\n  getJSON: function () {\n    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      args[_key6] = arguments[_key6];\n    }\n\n    return requestShortcut('json', ...args);\n  },\n  postJSON: function () {\n    for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n      args[_key7] = arguments[_key7];\n    }\n\n    return requestShortcut('postJSON', ...args);\n  }\n});\n\nrequest.abortController = () => {\n  const contoller = {\n    canceled: false,\n    onAbort: null,\n\n    abort() {\n      contoller.canceled = true;\n      if (contoller.onAbort) contoller.onAbort();\n    }\n\n  };\n  return contoller;\n};\n\nrequest.setup = function setup(options) {\n  if (options.type && !options.method) {\n    extend(options, {\n      method: options.type\n    });\n  }\n\n  extend(globals, options);\n};\n\nexport default request;"],"mappings":"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"},"metadata":{},"sourceType":"module"}