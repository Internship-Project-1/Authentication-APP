{"ast":null,"code":"/* eslint indent: [\"off\"] */\nimport { getWindow } from 'ssr-window';\nimport $ from '../../shared/dom7.js';\nimport { extend, now, nextTick, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx.js';\n\nclass PhotoBrowser extends Framework7Class {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const pb = this;\n    pb.app = app;\n    const defaults = extend({\n      on: {}\n    }, app.params.photoBrowser); // Extend defaults with modules params\n\n    pb.useModulesParams(defaults);\n    pb.params = extend(defaults, params);\n    extend(pb, {\n      exposed: false,\n      opened: false,\n      activeIndex: pb.params.swiper.initialSlide,\n      url: pb.params.url,\n      swipeToClose: {\n        allow: true,\n        isTouched: false,\n        diff: undefined,\n        start: undefined,\n        current: undefined,\n        started: false,\n        activeSlide: undefined,\n        timeStart: undefined\n      }\n    }); // Install Modules\n\n    pb.useModules(); // Init\n\n    pb.init();\n  }\n\n  get view() {\n    const {\n      params,\n      app\n    } = this;\n    return params.view || app.views.main;\n  }\n\n  onSlideChange(swiper) {\n    const pb = this;\n    pb.activeIndex = swiper.activeIndex;\n    let current = swiper.activeIndex + 1;\n    let total = pb.params.virtualSlides ? pb.params.photos.length : swiper.slides.length;\n\n    if (swiper.params.loop) {\n      total -= 2;\n      current -= swiper.loopedSlides;\n      if (current < 1) current = total + current;\n      if (current > total) current -= total;\n    }\n\n    const $activeSlideEl = pb.params.virtualSlides ? swiper.$wrapperEl.find(`.swiper-slide[data-swiper-slide-index=\"${swiper.activeIndex}\"]`) : swiper.slides.eq(swiper.activeIndex);\n    const $previousSlideEl = pb.params.virtualSlides ? swiper.$wrapperEl.find(`.swiper-slide[data-swiper-slide-index=\"${swiper.previousIndex}\"]`) : swiper.slides.eq(swiper.previousIndex);\n    let $currentEl = pb.$el.find('.photo-browser-current');\n    let $totalEl = pb.$el.find('.photo-browser-total');\n    let navbarEl;\n\n    if (pb.params.type === 'page' && pb.params.navbar && $currentEl.length === 0 && pb.app.theme === 'ios') {\n      navbarEl = pb.app.navbar.getElByPage(pb.$el);\n\n      if (navbarEl) {\n        $currentEl = $(navbarEl).find('.photo-browser-current');\n        $totalEl = $(navbarEl).find('.photo-browser-total');\n      }\n    }\n\n    if ($currentEl.length && $totalEl.length) {\n      $currentEl.text(current);\n      $totalEl.text(total);\n      if (!navbarEl) navbarEl = $currentEl.parents('.navbar')[0];\n\n      if (navbarEl) {\n        pb.app.navbar.size(navbarEl);\n      }\n    } // Update captions\n\n\n    if (pb.captions.length > 0) {\n      const captionIndex = swiper.params.loop ? $activeSlideEl.attr('data-swiper-slide-index') : pb.activeIndex;\n      pb.$captionsContainerEl.find('.photo-browser-caption-active').removeClass('photo-browser-caption-active');\n      pb.$captionsContainerEl.find(`[data-caption-index=\"${captionIndex}\"]`).addClass('photo-browser-caption-active');\n    } // Stop Video\n\n\n    const previousSlideVideo = $previousSlideEl.find('video');\n\n    if (previousSlideVideo.length > 0) {\n      if ('pause' in previousSlideVideo[0]) previousSlideVideo[0].pause();\n    }\n  }\n\n  onTouchStart() {\n    const pb = this;\n    const swipeToClose = pb.swipeToClose;\n    if (!swipeToClose.allow) return;\n    swipeToClose.isTouched = true;\n  }\n\n  onTouchMove(e) {\n    const pb = this;\n    const swipeToClose = pb.swipeToClose;\n    if (!swipeToClose.isTouched) return;\n\n    if (!swipeToClose.started) {\n      swipeToClose.started = true;\n      swipeToClose.start = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n      if (pb.params.virtualSlides) {\n        swipeToClose.activeSlide = pb.swiper.$wrapperEl.children('.swiper-slide-active');\n      } else {\n        swipeToClose.activeSlide = pb.swiper.slides.eq(pb.swiper.activeIndex);\n      }\n\n      swipeToClose.timeStart = now();\n    }\n\n    e.preventDefault();\n    swipeToClose.current = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n    swipeToClose.diff = swipeToClose.start - swipeToClose.current;\n    pb.$el.transition(0).transform(`translate3d(0,${-swipeToClose.diff}px,0)`);\n  }\n\n  onTouchEnd() {\n    const pb = this;\n    const swipeToClose = pb.swipeToClose;\n    swipeToClose.isTouched = false;\n\n    if (!swipeToClose.started) {\n      swipeToClose.started = false;\n      return;\n    }\n\n    swipeToClose.started = false;\n    swipeToClose.allow = false;\n    const diff = Math.abs(swipeToClose.diff);\n    const timeDiff = new Date().getTime() - swipeToClose.timeStart;\n\n    if (timeDiff < 300 && diff > 20 || timeDiff >= 300 && diff > 100) {\n      nextTick(() => {\n        if (pb.$el) {\n          if (swipeToClose.diff < 0) pb.$el.addClass('swipe-close-to-bottom');else pb.$el.addClass('swipe-close-to-top');\n        }\n\n        pb.emit('local::swipeToClose', pb);\n        pb.$el.transform('').transition('');\n        pb.close();\n        swipeToClose.allow = true;\n      });\n      return;\n    }\n\n    if (diff !== 0) {\n      pb.$el.addClass('photo-browser-transitioning').transitionEnd(() => {\n        swipeToClose.allow = true;\n        pb.$el.removeClass('photo-browser-transitioning');\n      });\n    } else {\n      swipeToClose.allow = true;\n    }\n\n    nextTick(() => {\n      pb.$el.transform('').transition('');\n    });\n  } // Render Functions\n\n\n  renderNavbar() {\n    const pb = this;\n    if (pb.params.renderNavbar) return pb.params.renderNavbar.call(pb);\n    let iconsColor = pb.params.iconsColor;\n    if (!pb.params.iconsColor && pb.params.theme === 'dark') iconsColor = 'white';\n    const pageBackLinkText = (pb.app.theme === 'ios' || pb.app.theme === 'aurora') && pb.params.pageBackLinkText ? pb.params.pageBackLinkText : '';\n    const renderNavbarCount = typeof pb.params.navbarShowCount === 'undefined' ? pb.params.photos.length > 1 : pb.params.navbarShowCount;\n    const isPopup = pb.params.type !== 'page';\n    return $jsx(\"div\", {\n      class: `navbar navbar-photo-browser ${pb.params.theme === 'dark' ? 'navbar-photo-browser-dark' : ''}`\n    }, $jsx(\"div\", {\n      class: \"navbar-bg\"\n    }), $jsx(\"div\", {\n      class: \"navbar-inner navbar-inner-centered-title sliding\"\n    }, !isPopup && $jsx(\"div\", {\n      class: \"left\"\n    }, $jsx(\"a\", {\n      class: `link ${!pageBackLinkText ? 'icon-only' : ''} back`\n    }, $jsx(\"i\", {\n      class: `icon icon-back ${iconsColor ? `color-${iconsColor}` : ''}`\n    }), pageBackLinkText && $jsx(\"span\", null, pageBackLinkText))), renderNavbarCount && $jsx(\"div\", {\n      class: \"title\"\n    }, $jsx(\"span\", {\n      class: \"photo-browser-current\"\n    }), $jsx(\"span\", {\n      class: \"photo-browser-of\"\n    }, pb.params.navbarOfText), $jsx(\"span\", {\n      class: \"photo-browser-total\"\n    })), isPopup && $jsx(\"div\", {\n      class: \"right\"\n    }, $jsx(\"a\", {\n      class: \"link popup-close\",\n      \"data-popup\": \".photo-browser-popup\"\n    }, $jsx(\"span\", null, pb.params.popupCloseLinkText)))));\n  }\n\n  renderToolbar() {\n    const pb = this;\n    if (pb.params.renderToolbar) return pb.params.renderToolbar.call(pb);\n    let iconsColor = pb.params.iconsColor;\n    if (!pb.params.iconsColor && pb.params.theme === 'dark') iconsColor = 'white';\n    return $jsx(\"div\", {\n      class: \"toolbar toolbar-bottom tabbar\"\n    }, $jsx(\"div\", {\n      class: \"toolbar-inner\"\n    }, $jsx(\"a\", {\n      class: \"link photo-browser-prev\"\n    }, $jsx(\"i\", {\n      class: `icon icon-back ${iconsColor ? `color-${iconsColor}` : ''}`\n    })), $jsx(\"a\", {\n      class: \"link photo-browser-next\"\n    }, $jsx(\"i\", {\n      class: `icon icon-forward ${iconsColor ? `color-${iconsColor}` : ''}`\n    }))));\n  }\n\n  renderCaption(caption, index) {\n    const pb = this;\n    if (pb.params.renderCaption) return pb.params.renderCaption.call(pb, caption, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-caption\",\n      \"data-caption-index\": index\n    }, caption);\n  }\n\n  renderObject(photo, index) {\n    const pb = this;\n    if (pb.params.renderObject) return pb.params.renderObject.call(pb, photo, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-slide photo-browser-object-slide swiper-slide\",\n      \"data-swiper-slide-index\": index\n    }, photo.html ? photo.html : photo);\n  }\n\n  renderLazyPhoto(photo, index) {\n    const pb = this;\n    if (pb.params.renderLazyPhoto) return pb.params.renderLazyPhoto.call(pb, photo, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-slide photo-browser-slide-lazy swiper-slide\",\n      \"data-swiper-slide-index\": index\n    }, $jsx(\"div\", {\n      class: \"swiper-lazy-preloader\"\n    }), $jsx(\"span\", {\n      class: \"swiper-zoom-container\"\n    }, $jsx(\"img\", {\n      \"data-src\": photo.url ? photo.url : photo,\n      class: \"swiper-lazy\"\n    })));\n  }\n\n  renderPhoto(photo, index) {\n    const pb = this;\n    if (pb.params.renderPhoto) return pb.params.renderPhoto.call(pb, photo, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-slide swiper-slide\",\n      \"data-swiper-slide-index\": index\n    }, $jsx(\"span\", {\n      class: \"swiper-zoom-container\"\n    }, $jsx(\"img\", {\n      src: photo.url ? photo.url : photo\n    })));\n  }\n\n  render() {\n    const pb = this;\n    if (pb.params.render) return pb.params.render.call(pb, pb.params);\n    return $jsx(\"div\", {\n      class: `photo-browser photo-browser-${pb.params.theme}`\n    }, $jsx(\"div\", {\n      class: \"view\"\n    }, $jsx(\"div\", {\n      class: `page photo-browser-page photo-browser-page-${pb.params.theme} no-toolbar ${!pb.params.navbar ? 'no-navbar' : ''}`,\n      \"data-name\": \"photo-browser-page\"\n    }, pb.params.navbar && pb.renderNavbar(), pb.params.toolbar && pb.renderToolbar(), $jsx(\"div\", {\n      class: `photo-browser-captions photo-browser-captions-${pb.params.captionsTheme || pb.params.theme}`\n    }, pb.params.photos.map((photo, index) => {\n      if (photo.caption) return pb.renderCaption(photo.caption, index);\n      return '';\n    })), $jsx(\"div\", {\n      class: \"photo-browser-swiper-container swiper\"\n    }, $jsx(\"div\", {\n      class: \"photo-browser-swiper-wrapper swiper-wrapper\"\n    }, !pb.params.virtualSlides && pb.params.photos.map((photo, index) => {\n      if (photo.html || (typeof photo === 'string' || photo instanceof String) && photo.indexOf('<') >= 0 && photo.indexOf('>') >= 0) {\n        return pb.renderObject(photo, index);\n      }\n\n      if (pb.params.swiper.lazy === true || pb.params.swiper.lazy && pb.params.swiper.lazy.enabled) {\n        return pb.renderLazyPhoto(photo, index);\n      }\n\n      return pb.renderPhoto(photo, index);\n    }))))));\n  }\n\n  renderStandalone() {\n    const pb = this;\n    if (pb.params.renderStandalone) return pb.params.renderStandalone.call(pb);\n    const standaloneHtml = `<div class=\"popup photo-browser-popup photo-browser-standalone popup-tablet-fullscreen\">${pb.render()}</div>`;\n    return standaloneHtml;\n  }\n\n  renderPage() {\n    const pb = this;\n    if (pb.params.renderPage) return pb.params.renderPage.call(pb);\n    const pageHtml = pb.render();\n    return pageHtml;\n  }\n\n  renderPopup() {\n    const pb = this;\n    if (pb.params.renderPopup) return pb.params.renderPopup.call(pb);\n    const popupHtml = `<div class=\"popup photo-browser-popup\">${pb.render()}</div>`;\n    return popupHtml;\n  } // Callbacks\n\n\n  onOpen(type, el) {\n    const pb = this;\n    const app = pb.app;\n    const $el = $(el);\n    $el[0].f7PhotoBrowser = pb;\n    pb.$el = $el;\n    pb.el = $el[0];\n    pb.openedIn = type;\n    pb.opened = true;\n    pb.$swiperContainerEl = pb.$el.find('.photo-browser-swiper-container');\n    pb.$swiperWrapperEl = pb.$el.find('.photo-browser-swiper-wrapper');\n    pb.slides = pb.$el.find('.photo-browser-slide');\n    pb.$captionsContainerEl = pb.$el.find('.photo-browser-captions');\n    pb.captions = pb.$el.find('.photo-browser-caption'); // Init Swiper\n\n    let clickTimeout;\n    const swiperParams = extend({}, pb.params.swiper, {\n      initialSlide: pb.activeIndex,\n      cssMode: typeof pb.params.swiper.cssMode === 'undefined' && (app.device.ios || app.device.android) ? true : pb.params.swiper.cssMode,\n      on: {\n        click(e) {\n          clearTimeout(clickTimeout);\n\n          if (pb.params.exposition) {\n            clickTimeout = setTimeout(() => {\n              pb.expositionToggle();\n            }, 350);\n          }\n\n          pb.emit('local::tap', e);\n          pb.emit('local::click', e);\n        },\n\n        doubleClick(e) {\n          clearTimeout(clickTimeout);\n          pb.emit('local::doubleTap', e);\n          pb.emit('local::doubleClick', e);\n        },\n\n        slideChange() {\n          const swiper = this;\n          pb.onSlideChange(swiper);\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          pb.emit('local::slideChange', ...args);\n        },\n\n        transitionStart() {\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          pb.emit('local::transitionStart', ...args);\n        },\n\n        transitionEnd() {\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          pb.emit('local::transitionEnd', ...args);\n        },\n\n        slideChangeTransitionStart() {\n          const swiper = this;\n          pb.onSlideChange(swiper);\n\n          for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            args[_key4] = arguments[_key4];\n          }\n\n          pb.emit('local::slideChangeTransitionStart', ...args);\n        },\n\n        slideChangeTransitionEnd() {\n          for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n            args[_key5] = arguments[_key5];\n          }\n\n          pb.emit('local::slideChangeTransitionEnd', ...args);\n        },\n\n        lazyImageLoad() {\n          for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n            args[_key6] = arguments[_key6];\n          }\n\n          pb.emit('local::lazyImageLoad', ...args);\n        },\n\n        lazyImageReady() {\n          for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n            args[_key7] = arguments[_key7];\n          }\n\n          const slideEl = args[0];\n          $(slideEl).removeClass('photo-browser-slide-lazy');\n          pb.emit('local::lazyImageReady', ...args);\n        }\n\n      }\n    });\n\n    if (pb.params.swipeToClose && pb.params.type !== 'page') {\n      extend(swiperParams.on, {\n        touchStart(swiper, e) {\n          pb.onTouchStart(e);\n          pb.emit('local::touchStart', e);\n        },\n\n        touchMoveOpposite(swiper, e) {\n          pb.onTouchMove(e);\n          pb.emit('local::touchMoveOpposite', e);\n        },\n\n        touchEnd(swiper, e) {\n          pb.onTouchEnd(e);\n          pb.emit('local::touchEnd', e);\n        }\n\n      });\n    }\n\n    if (pb.params.virtualSlides) {\n      extend(swiperParams, {\n        virtual: {\n          slides: pb.params.photos,\n\n          renderSlide(photo, index) {\n            if (photo.html || (typeof photo === 'string' || photo instanceof String) && photo.indexOf('<') >= 0 && photo.indexOf('>') >= 0) {\n              return pb.renderObject(photo, index);\n            }\n\n            if (pb.params.swiper.lazy === true || pb.params.swiper.lazy && pb.params.swiper.lazy.enabled) {\n              return pb.renderLazyPhoto(photo, index);\n            }\n\n            return pb.renderPhoto(photo, index);\n          }\n\n        }\n      });\n    }\n\n    const window = getWindow();\n    pb.swiper = app.swiper ? app.swiper.create(pb.$swiperContainerEl, swiperParams) : new window.Swiper(pb.$swiperContainerEl, swiperParams);\n\n    if (pb.activeIndex === 0) {\n      pb.onSlideChange(pb.swiper);\n    }\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:open');\n    }\n\n    pb.emit('local::open photoBrowserOpen', pb);\n  }\n\n  onOpened() {\n    const pb = this;\n\n    if (pb.$el && pb.params.type === 'standalone') {\n      pb.$el.css('animation', 'none');\n    }\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:opened');\n    }\n\n    pb.emit('local::opened photoBrowserOpened', pb);\n  }\n\n  onClose() {\n    const pb = this;\n    if (pb.destroyed) return; // Destroy Swiper\n\n    if (pb.swiper && pb.swiper.destroy) {\n      pb.swiper.destroy(true, false);\n      pb.swiper = null;\n      delete pb.swiper;\n    }\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:close');\n    }\n\n    pb.emit('local::close photoBrowserClose', pb);\n  }\n\n  onClosed() {\n    const pb = this;\n    if (pb.destroyed) return;\n    pb.opened = false;\n    pb.$el = null;\n    pb.el = null;\n    delete pb.$el;\n    delete pb.el;\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:closed');\n    }\n\n    pb.emit('local::closed photoBrowserClosed', pb);\n  } // Open\n\n\n  openPage() {\n    const pb = this;\n    if (pb.opened) return pb;\n    const pageHtml = pb.renderPage();\n    pb.view.router.navigate({\n      url: pb.url,\n      route: {\n        content: pageHtml,\n        path: pb.url,\n        on: {\n          pageBeforeIn(e, page) {\n            pb.view.$el.addClass(`with-photo-browser-page with-photo-browser-page-${pb.params.theme}`);\n            pb.onOpen('page', page.el);\n          },\n\n          pageAfterIn(e, page) {\n            pb.onOpened('page', page.el);\n          },\n\n          pageBeforeOut(e, page) {\n            pb.view.$el.removeClass(`with-photo-browser-page with-photo-browser-page-exposed with-photo-browser-page-${pb.params.theme}`);\n            pb.onClose('page', page.el);\n          },\n\n          pageAfterOut(e, page) {\n            pb.onClosed('page', page.el);\n          }\n\n        }\n      }\n    });\n    return pb;\n  }\n\n  openStandalone() {\n    const pb = this;\n    if (pb.opened) return pb;\n    const standaloneHtml = pb.renderStandalone();\n    const popupParams = {\n      backdrop: false,\n      content: standaloneHtml,\n      on: {\n        popupOpen(popup) {\n          pb.onOpen('popup', popup.el);\n        },\n\n        popupOpened(popup) {\n          pb.onOpened('popup', popup.el);\n        },\n\n        popupClose(popup) {\n          pb.onClose('popup', popup.el);\n        },\n\n        popupClosed(popup) {\n          pb.onClosed('popup', popup.el);\n        }\n\n      }\n    };\n\n    if (pb.params.routableModals && pb.view) {\n      pb.view.router.navigate({\n        url: pb.url,\n        route: {\n          path: pb.url,\n          popup: popupParams\n        }\n      });\n    } else {\n      pb.modal = pb.app.popup.create(popupParams).open();\n    }\n\n    return pb;\n  }\n\n  openPopup() {\n    const pb = this;\n    if (pb.opened) return pb;\n    const popupHtml = pb.renderPopup();\n    const popupParams = {\n      content: popupHtml,\n      push: pb.params.popupPush,\n      on: {\n        popupOpen(popup) {\n          pb.onOpen('popup', popup.el);\n        },\n\n        popupOpened(popup) {\n          pb.onOpened('popup', popup.el);\n        },\n\n        popupClose(popup) {\n          pb.onClose('popup', popup.el);\n        },\n\n        popupClosed(popup) {\n          pb.onClosed('popup', popup.el);\n        }\n\n      }\n    };\n\n    if (pb.params.routableModals && pb.view) {\n      pb.view.router.navigate({\n        url: pb.url,\n        route: {\n          path: pb.url,\n          popup: popupParams\n        }\n      });\n    } else {\n      pb.modal = pb.app.popup.create(popupParams).open();\n    }\n\n    return pb;\n  } // Exposition\n\n\n  expositionEnable() {\n    const pb = this;\n\n    if (pb.params.type === 'page') {\n      pb.view.$el.addClass('with-photo-browser-page-exposed');\n    }\n\n    if (pb.$el) pb.$el.addClass('photo-browser-exposed');\n    if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.addClass('photo-browser-captions-exposed');\n    pb.exposed = true;\n    return pb;\n  }\n\n  expositionDisable() {\n    const pb = this;\n\n    if (pb.params.type === 'page') {\n      pb.view.$el.removeClass('with-photo-browser-page-exposed');\n    }\n\n    if (pb.$el) pb.$el.removeClass('photo-browser-exposed');\n    if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.removeClass('photo-browser-captions-exposed');\n    pb.exposed = false;\n    return pb;\n  }\n\n  expositionToggle() {\n    const pb = this;\n\n    if (pb.params.type === 'page') {\n      pb.view.$el.toggleClass('with-photo-browser-page-exposed');\n    }\n\n    if (pb.$el) pb.$el.toggleClass('photo-browser-exposed');\n    if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.toggleClass('photo-browser-captions-exposed');\n    pb.exposed = !pb.exposed;\n    return pb;\n  }\n\n  open(index) {\n    const pb = this;\n    const type = pb.params.type;\n\n    if (pb.opened) {\n      if (pb.swiper && typeof index !== 'undefined') {\n        pb.swiper.slideTo(parseInt(index, 10));\n      }\n\n      return pb;\n    }\n\n    if (typeof index !== 'undefined') {\n      pb.activeIndex = index;\n    }\n\n    if (type === 'standalone') {\n      pb.openStandalone();\n    }\n\n    if (type === 'page') {\n      pb.openPage();\n    }\n\n    if (type === 'popup') {\n      pb.openPopup();\n    }\n\n    return pb;\n  }\n\n  close() {\n    const pb = this;\n    if (!pb.opened) return pb;\n\n    if (pb.params.routableModals && pb.view || pb.openedIn === 'page') {\n      pb.view.router.back();\n    } else {\n      pb.modal.once('modalClosed', () => {\n        nextTick(() => {\n          if (pb.destroyed) return;\n          pb.modal.destroy();\n          delete pb.modal;\n        });\n      });\n      pb.modal.close();\n    }\n\n    return pb;\n  } // eslint-disable-next-line\n\n\n  init() {}\n\n  destroy() {\n    let pb = this;\n    pb.emit('local::beforeDestroy photoBrowserBeforeDestroy', pb);\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:beforedestroy');\n      pb.$el[0].f7PhotoBrowser = null;\n      delete pb.$el[0].f7PhotoBrowser;\n    }\n\n    deleteProps(pb);\n    pb.destroyed = true;\n    pb = null;\n  }\n\n}\n\nexport default PhotoBrowser;","map":{"version":3,"names":["getWindow","$","extend","now","nextTick","deleteProps","Framework7Class","$jsx","PhotoBrowser","constructor","app","params","pb","defaults","on","photoBrowser","useModulesParams","exposed","opened","activeIndex","swiper","initialSlide","url","swipeToClose","allow","isTouched","diff","undefined","start","current","started","activeSlide","timeStart","useModules","init","view","views","main","onSlideChange","total","virtualSlides","photos","length","slides","loop","loopedSlides","$activeSlideEl","$wrapperEl","find","eq","$previousSlideEl","previousIndex","$currentEl","$el","$totalEl","navbarEl","type","navbar","theme","getElByPage","text","parents","size","captions","captionIndex","attr","$captionsContainerEl","removeClass","addClass","previousSlideVideo","pause","onTouchStart","onTouchMove","e","targetTouches","pageY","children","preventDefault","transition","transform","onTouchEnd","Math","abs","timeDiff","Date","getTime","emit","close","transitionEnd","renderNavbar","call","iconsColor","pageBackLinkText","renderNavbarCount","navbarShowCount","isPopup","class","navbarOfText","popupCloseLinkText","renderToolbar","renderCaption","caption","index","renderObject","photo","html","renderLazyPhoto","renderPhoto","src","render","toolbar","captionsTheme","map","String","indexOf","lazy","enabled","renderStandalone","standaloneHtml","renderPage","pageHtml","renderPopup","popupHtml","onOpen","el","f7PhotoBrowser","openedIn","$swiperContainerEl","$swiperWrapperEl","clickTimeout","swiperParams","cssMode","device","ios","android","click","clearTimeout","exposition","setTimeout","expositionToggle","doubleClick","slideChange","_len","arguments","args","Array","_key","transitionStart","_len2","_key2","_len3","_key3","slideChangeTransitionStart","_len4","_key4","slideChangeTransitionEnd","_len5","_key5","lazyImageLoad","_len6","_key6","lazyImageReady","_len7","_key7","slideEl","touchStart","touchMoveOpposite","touchEnd","virtual","renderSlide","window","create","Swiper","trigger","onOpened","css","onClose","destroyed","destroy","onClosed","openPage","router","navigate","route","content","path","pageBeforeIn","page","pageAfterIn","pageBeforeOut","pageAfterOut","openStandalone","popupParams","backdrop","popupOpen","popup","popupOpened","popupClose","popupClosed","routableModals","modal","open","openPopup","push","popupPush","expositionEnable","expositionHideCaptions","expositionDisable","toggleClass","slideTo","parseInt","back","once"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/components/photo-browser/photo-browser-class.js"],"sourcesContent":["/* eslint indent: [\"off\"] */\nimport { getWindow } from 'ssr-window';\nimport $ from '../../shared/dom7.js';\nimport { extend, now, nextTick, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx.js';\n\nclass PhotoBrowser extends Framework7Class {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const pb = this;\n    pb.app = app;\n    const defaults = extend({\n      on: {}\n    }, app.params.photoBrowser); // Extend defaults with modules params\n\n    pb.useModulesParams(defaults);\n    pb.params = extend(defaults, params);\n    extend(pb, {\n      exposed: false,\n      opened: false,\n      activeIndex: pb.params.swiper.initialSlide,\n      url: pb.params.url,\n      swipeToClose: {\n        allow: true,\n        isTouched: false,\n        diff: undefined,\n        start: undefined,\n        current: undefined,\n        started: false,\n        activeSlide: undefined,\n        timeStart: undefined\n      }\n    }); // Install Modules\n\n    pb.useModules(); // Init\n\n    pb.init();\n  }\n\n  get view() {\n    const {\n      params,\n      app\n    } = this;\n    return params.view || app.views.main;\n  }\n\n  onSlideChange(swiper) {\n    const pb = this;\n    pb.activeIndex = swiper.activeIndex;\n    let current = swiper.activeIndex + 1;\n    let total = pb.params.virtualSlides ? pb.params.photos.length : swiper.slides.length;\n\n    if (swiper.params.loop) {\n      total -= 2;\n      current -= swiper.loopedSlides;\n      if (current < 1) current = total + current;\n      if (current > total) current -= total;\n    }\n\n    const $activeSlideEl = pb.params.virtualSlides ? swiper.$wrapperEl.find(`.swiper-slide[data-swiper-slide-index=\"${swiper.activeIndex}\"]`) : swiper.slides.eq(swiper.activeIndex);\n    const $previousSlideEl = pb.params.virtualSlides ? swiper.$wrapperEl.find(`.swiper-slide[data-swiper-slide-index=\"${swiper.previousIndex}\"]`) : swiper.slides.eq(swiper.previousIndex);\n    let $currentEl = pb.$el.find('.photo-browser-current');\n    let $totalEl = pb.$el.find('.photo-browser-total');\n    let navbarEl;\n\n    if (pb.params.type === 'page' && pb.params.navbar && $currentEl.length === 0 && pb.app.theme === 'ios') {\n      navbarEl = pb.app.navbar.getElByPage(pb.$el);\n\n      if (navbarEl) {\n        $currentEl = $(navbarEl).find('.photo-browser-current');\n        $totalEl = $(navbarEl).find('.photo-browser-total');\n      }\n    }\n\n    if ($currentEl.length && $totalEl.length) {\n      $currentEl.text(current);\n      $totalEl.text(total);\n      if (!navbarEl) navbarEl = $currentEl.parents('.navbar')[0];\n\n      if (navbarEl) {\n        pb.app.navbar.size(navbarEl);\n      }\n    } // Update captions\n\n\n    if (pb.captions.length > 0) {\n      const captionIndex = swiper.params.loop ? $activeSlideEl.attr('data-swiper-slide-index') : pb.activeIndex;\n      pb.$captionsContainerEl.find('.photo-browser-caption-active').removeClass('photo-browser-caption-active');\n      pb.$captionsContainerEl.find(`[data-caption-index=\"${captionIndex}\"]`).addClass('photo-browser-caption-active');\n    } // Stop Video\n\n\n    const previousSlideVideo = $previousSlideEl.find('video');\n\n    if (previousSlideVideo.length > 0) {\n      if ('pause' in previousSlideVideo[0]) previousSlideVideo[0].pause();\n    }\n  }\n\n  onTouchStart() {\n    const pb = this;\n    const swipeToClose = pb.swipeToClose;\n    if (!swipeToClose.allow) return;\n    swipeToClose.isTouched = true;\n  }\n\n  onTouchMove(e) {\n    const pb = this;\n    const swipeToClose = pb.swipeToClose;\n    if (!swipeToClose.isTouched) return;\n\n    if (!swipeToClose.started) {\n      swipeToClose.started = true;\n      swipeToClose.start = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n      if (pb.params.virtualSlides) {\n        swipeToClose.activeSlide = pb.swiper.$wrapperEl.children('.swiper-slide-active');\n      } else {\n        swipeToClose.activeSlide = pb.swiper.slides.eq(pb.swiper.activeIndex);\n      }\n\n      swipeToClose.timeStart = now();\n    }\n\n    e.preventDefault();\n    swipeToClose.current = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n    swipeToClose.diff = swipeToClose.start - swipeToClose.current;\n    pb.$el.transition(0).transform(`translate3d(0,${-swipeToClose.diff}px,0)`);\n  }\n\n  onTouchEnd() {\n    const pb = this;\n    const swipeToClose = pb.swipeToClose;\n    swipeToClose.isTouched = false;\n\n    if (!swipeToClose.started) {\n      swipeToClose.started = false;\n      return;\n    }\n\n    swipeToClose.started = false;\n    swipeToClose.allow = false;\n    const diff = Math.abs(swipeToClose.diff);\n    const timeDiff = new Date().getTime() - swipeToClose.timeStart;\n\n    if (timeDiff < 300 && diff > 20 || timeDiff >= 300 && diff > 100) {\n      nextTick(() => {\n        if (pb.$el) {\n          if (swipeToClose.diff < 0) pb.$el.addClass('swipe-close-to-bottom');else pb.$el.addClass('swipe-close-to-top');\n        }\n\n        pb.emit('local::swipeToClose', pb);\n        pb.$el.transform('').transition('');\n        pb.close();\n        swipeToClose.allow = true;\n      });\n      return;\n    }\n\n    if (diff !== 0) {\n      pb.$el.addClass('photo-browser-transitioning').transitionEnd(() => {\n        swipeToClose.allow = true;\n        pb.$el.removeClass('photo-browser-transitioning');\n      });\n    } else {\n      swipeToClose.allow = true;\n    }\n\n    nextTick(() => {\n      pb.$el.transform('').transition('');\n    });\n  } // Render Functions\n\n\n  renderNavbar() {\n    const pb = this;\n    if (pb.params.renderNavbar) return pb.params.renderNavbar.call(pb);\n    let iconsColor = pb.params.iconsColor;\n    if (!pb.params.iconsColor && pb.params.theme === 'dark') iconsColor = 'white';\n    const pageBackLinkText = (pb.app.theme === 'ios' || pb.app.theme === 'aurora') && pb.params.pageBackLinkText ? pb.params.pageBackLinkText : '';\n    const renderNavbarCount = typeof pb.params.navbarShowCount === 'undefined' ? pb.params.photos.length > 1 : pb.params.navbarShowCount;\n    const isPopup = pb.params.type !== 'page';\n    return $jsx(\"div\", {\n      class: `navbar navbar-photo-browser ${pb.params.theme === 'dark' ? 'navbar-photo-browser-dark' : ''}`\n    }, $jsx(\"div\", {\n      class: \"navbar-bg\"\n    }), $jsx(\"div\", {\n      class: \"navbar-inner navbar-inner-centered-title sliding\"\n    }, !isPopup && $jsx(\"div\", {\n      class: \"left\"\n    }, $jsx(\"a\", {\n      class: `link ${!pageBackLinkText ? 'icon-only' : ''} back`\n    }, $jsx(\"i\", {\n      class: `icon icon-back ${iconsColor ? `color-${iconsColor}` : ''}`\n    }), pageBackLinkText && $jsx(\"span\", null, pageBackLinkText))), renderNavbarCount && $jsx(\"div\", {\n      class: \"title\"\n    }, $jsx(\"span\", {\n      class: \"photo-browser-current\"\n    }), $jsx(\"span\", {\n      class: \"photo-browser-of\"\n    }, pb.params.navbarOfText), $jsx(\"span\", {\n      class: \"photo-browser-total\"\n    })), isPopup && $jsx(\"div\", {\n      class: \"right\"\n    }, $jsx(\"a\", {\n      class: \"link popup-close\",\n      \"data-popup\": \".photo-browser-popup\"\n    }, $jsx(\"span\", null, pb.params.popupCloseLinkText)))));\n  }\n\n  renderToolbar() {\n    const pb = this;\n    if (pb.params.renderToolbar) return pb.params.renderToolbar.call(pb);\n    let iconsColor = pb.params.iconsColor;\n    if (!pb.params.iconsColor && pb.params.theme === 'dark') iconsColor = 'white';\n    return $jsx(\"div\", {\n      class: \"toolbar toolbar-bottom tabbar\"\n    }, $jsx(\"div\", {\n      class: \"toolbar-inner\"\n    }, $jsx(\"a\", {\n      class: \"link photo-browser-prev\"\n    }, $jsx(\"i\", {\n      class: `icon icon-back ${iconsColor ? `color-${iconsColor}` : ''}`\n    })), $jsx(\"a\", {\n      class: \"link photo-browser-next\"\n    }, $jsx(\"i\", {\n      class: `icon icon-forward ${iconsColor ? `color-${iconsColor}` : ''}`\n    }))));\n  }\n\n  renderCaption(caption, index) {\n    const pb = this;\n    if (pb.params.renderCaption) return pb.params.renderCaption.call(pb, caption, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-caption\",\n      \"data-caption-index\": index\n    }, caption);\n  }\n\n  renderObject(photo, index) {\n    const pb = this;\n    if (pb.params.renderObject) return pb.params.renderObject.call(pb, photo, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-slide photo-browser-object-slide swiper-slide\",\n      \"data-swiper-slide-index\": index\n    }, photo.html ? photo.html : photo);\n  }\n\n  renderLazyPhoto(photo, index) {\n    const pb = this;\n    if (pb.params.renderLazyPhoto) return pb.params.renderLazyPhoto.call(pb, photo, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-slide photo-browser-slide-lazy swiper-slide\",\n      \"data-swiper-slide-index\": index\n    }, $jsx(\"div\", {\n      class: \"swiper-lazy-preloader\"\n    }), $jsx(\"span\", {\n      class: \"swiper-zoom-container\"\n    }, $jsx(\"img\", {\n      \"data-src\": photo.url ? photo.url : photo,\n      class: \"swiper-lazy\"\n    })));\n  }\n\n  renderPhoto(photo, index) {\n    const pb = this;\n    if (pb.params.renderPhoto) return pb.params.renderPhoto.call(pb, photo, index);\n    return $jsx(\"div\", {\n      class: \"photo-browser-slide swiper-slide\",\n      \"data-swiper-slide-index\": index\n    }, $jsx(\"span\", {\n      class: \"swiper-zoom-container\"\n    }, $jsx(\"img\", {\n      src: photo.url ? photo.url : photo\n    })));\n  }\n\n  render() {\n    const pb = this;\n    if (pb.params.render) return pb.params.render.call(pb, pb.params);\n    return $jsx(\"div\", {\n      class: `photo-browser photo-browser-${pb.params.theme}`\n    }, $jsx(\"div\", {\n      class: \"view\"\n    }, $jsx(\"div\", {\n      class: `page photo-browser-page photo-browser-page-${pb.params.theme} no-toolbar ${!pb.params.navbar ? 'no-navbar' : ''}`,\n      \"data-name\": \"photo-browser-page\"\n    }, pb.params.navbar && pb.renderNavbar(), pb.params.toolbar && pb.renderToolbar(), $jsx(\"div\", {\n      class: `photo-browser-captions photo-browser-captions-${pb.params.captionsTheme || pb.params.theme}`\n    }, pb.params.photos.map((photo, index) => {\n      if (photo.caption) return pb.renderCaption(photo.caption, index);\n      return '';\n    })), $jsx(\"div\", {\n      class: \"photo-browser-swiper-container swiper\"\n    }, $jsx(\"div\", {\n      class: \"photo-browser-swiper-wrapper swiper-wrapper\"\n    }, !pb.params.virtualSlides && pb.params.photos.map((photo, index) => {\n      if (photo.html || (typeof photo === 'string' || photo instanceof String) && photo.indexOf('<') >= 0 && photo.indexOf('>') >= 0) {\n        return pb.renderObject(photo, index);\n      }\n\n      if (pb.params.swiper.lazy === true || pb.params.swiper.lazy && pb.params.swiper.lazy.enabled) {\n        return pb.renderLazyPhoto(photo, index);\n      }\n\n      return pb.renderPhoto(photo, index);\n    }))))));\n  }\n\n  renderStandalone() {\n    const pb = this;\n    if (pb.params.renderStandalone) return pb.params.renderStandalone.call(pb);\n    const standaloneHtml = `<div class=\"popup photo-browser-popup photo-browser-standalone popup-tablet-fullscreen\">${pb.render()}</div>`;\n    return standaloneHtml;\n  }\n\n  renderPage() {\n    const pb = this;\n    if (pb.params.renderPage) return pb.params.renderPage.call(pb);\n    const pageHtml = pb.render();\n    return pageHtml;\n  }\n\n  renderPopup() {\n    const pb = this;\n    if (pb.params.renderPopup) return pb.params.renderPopup.call(pb);\n    const popupHtml = `<div class=\"popup photo-browser-popup\">${pb.render()}</div>`;\n    return popupHtml;\n  } // Callbacks\n\n\n  onOpen(type, el) {\n    const pb = this;\n    const app = pb.app;\n    const $el = $(el);\n    $el[0].f7PhotoBrowser = pb;\n    pb.$el = $el;\n    pb.el = $el[0];\n    pb.openedIn = type;\n    pb.opened = true;\n    pb.$swiperContainerEl = pb.$el.find('.photo-browser-swiper-container');\n    pb.$swiperWrapperEl = pb.$el.find('.photo-browser-swiper-wrapper');\n    pb.slides = pb.$el.find('.photo-browser-slide');\n    pb.$captionsContainerEl = pb.$el.find('.photo-browser-captions');\n    pb.captions = pb.$el.find('.photo-browser-caption'); // Init Swiper\n\n    let clickTimeout;\n    const swiperParams = extend({}, pb.params.swiper, {\n      initialSlide: pb.activeIndex,\n      cssMode: typeof pb.params.swiper.cssMode === 'undefined' && (app.device.ios || app.device.android) ? true : pb.params.swiper.cssMode,\n      on: {\n        click(e) {\n          clearTimeout(clickTimeout);\n\n          if (pb.params.exposition) {\n            clickTimeout = setTimeout(() => {\n              pb.expositionToggle();\n            }, 350);\n          }\n\n          pb.emit('local::tap', e);\n          pb.emit('local::click', e);\n        },\n\n        doubleClick(e) {\n          clearTimeout(clickTimeout);\n          pb.emit('local::doubleTap', e);\n          pb.emit('local::doubleClick', e);\n        },\n\n        slideChange() {\n          const swiper = this;\n          pb.onSlideChange(swiper);\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          pb.emit('local::slideChange', ...args);\n        },\n\n        transitionStart() {\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          pb.emit('local::transitionStart', ...args);\n        },\n\n        transitionEnd() {\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          pb.emit('local::transitionEnd', ...args);\n        },\n\n        slideChangeTransitionStart() {\n          const swiper = this;\n          pb.onSlideChange(swiper);\n\n          for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            args[_key4] = arguments[_key4];\n          }\n\n          pb.emit('local::slideChangeTransitionStart', ...args);\n        },\n\n        slideChangeTransitionEnd() {\n          for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n            args[_key5] = arguments[_key5];\n          }\n\n          pb.emit('local::slideChangeTransitionEnd', ...args);\n        },\n\n        lazyImageLoad() {\n          for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n            args[_key6] = arguments[_key6];\n          }\n\n          pb.emit('local::lazyImageLoad', ...args);\n        },\n\n        lazyImageReady() {\n          for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n            args[_key7] = arguments[_key7];\n          }\n\n          const slideEl = args[0];\n          $(slideEl).removeClass('photo-browser-slide-lazy');\n          pb.emit('local::lazyImageReady', ...args);\n        }\n\n      }\n    });\n\n    if (pb.params.swipeToClose && pb.params.type !== 'page') {\n      extend(swiperParams.on, {\n        touchStart(swiper, e) {\n          pb.onTouchStart(e);\n          pb.emit('local::touchStart', e);\n        },\n\n        touchMoveOpposite(swiper, e) {\n          pb.onTouchMove(e);\n          pb.emit('local::touchMoveOpposite', e);\n        },\n\n        touchEnd(swiper, e) {\n          pb.onTouchEnd(e);\n          pb.emit('local::touchEnd', e);\n        }\n\n      });\n    }\n\n    if (pb.params.virtualSlides) {\n      extend(swiperParams, {\n        virtual: {\n          slides: pb.params.photos,\n\n          renderSlide(photo, index) {\n            if (photo.html || (typeof photo === 'string' || photo instanceof String) && photo.indexOf('<') >= 0 && photo.indexOf('>') >= 0) {\n              return pb.renderObject(photo, index);\n            }\n\n            if (pb.params.swiper.lazy === true || pb.params.swiper.lazy && pb.params.swiper.lazy.enabled) {\n              return pb.renderLazyPhoto(photo, index);\n            }\n\n            return pb.renderPhoto(photo, index);\n          }\n\n        }\n      });\n    }\n\n    const window = getWindow();\n    pb.swiper = app.swiper ? app.swiper.create(pb.$swiperContainerEl, swiperParams) : new window.Swiper(pb.$swiperContainerEl, swiperParams);\n\n    if (pb.activeIndex === 0) {\n      pb.onSlideChange(pb.swiper);\n    }\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:open');\n    }\n\n    pb.emit('local::open photoBrowserOpen', pb);\n  }\n\n  onOpened() {\n    const pb = this;\n\n    if (pb.$el && pb.params.type === 'standalone') {\n      pb.$el.css('animation', 'none');\n    }\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:opened');\n    }\n\n    pb.emit('local::opened photoBrowserOpened', pb);\n  }\n\n  onClose() {\n    const pb = this;\n    if (pb.destroyed) return; // Destroy Swiper\n\n    if (pb.swiper && pb.swiper.destroy) {\n      pb.swiper.destroy(true, false);\n      pb.swiper = null;\n      delete pb.swiper;\n    }\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:close');\n    }\n\n    pb.emit('local::close photoBrowserClose', pb);\n  }\n\n  onClosed() {\n    const pb = this;\n    if (pb.destroyed) return;\n    pb.opened = false;\n    pb.$el = null;\n    pb.el = null;\n    delete pb.$el;\n    delete pb.el;\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:closed');\n    }\n\n    pb.emit('local::closed photoBrowserClosed', pb);\n  } // Open\n\n\n  openPage() {\n    const pb = this;\n    if (pb.opened) return pb;\n    const pageHtml = pb.renderPage();\n    pb.view.router.navigate({\n      url: pb.url,\n      route: {\n        content: pageHtml,\n        path: pb.url,\n        on: {\n          pageBeforeIn(e, page) {\n            pb.view.$el.addClass(`with-photo-browser-page with-photo-browser-page-${pb.params.theme}`);\n            pb.onOpen('page', page.el);\n          },\n\n          pageAfterIn(e, page) {\n            pb.onOpened('page', page.el);\n          },\n\n          pageBeforeOut(e, page) {\n            pb.view.$el.removeClass(`with-photo-browser-page with-photo-browser-page-exposed with-photo-browser-page-${pb.params.theme}`);\n            pb.onClose('page', page.el);\n          },\n\n          pageAfterOut(e, page) {\n            pb.onClosed('page', page.el);\n          }\n\n        }\n      }\n    });\n    return pb;\n  }\n\n  openStandalone() {\n    const pb = this;\n    if (pb.opened) return pb;\n    const standaloneHtml = pb.renderStandalone();\n    const popupParams = {\n      backdrop: false,\n      content: standaloneHtml,\n      on: {\n        popupOpen(popup) {\n          pb.onOpen('popup', popup.el);\n        },\n\n        popupOpened(popup) {\n          pb.onOpened('popup', popup.el);\n        },\n\n        popupClose(popup) {\n          pb.onClose('popup', popup.el);\n        },\n\n        popupClosed(popup) {\n          pb.onClosed('popup', popup.el);\n        }\n\n      }\n    };\n\n    if (pb.params.routableModals && pb.view) {\n      pb.view.router.navigate({\n        url: pb.url,\n        route: {\n          path: pb.url,\n          popup: popupParams\n        }\n      });\n    } else {\n      pb.modal = pb.app.popup.create(popupParams).open();\n    }\n\n    return pb;\n  }\n\n  openPopup() {\n    const pb = this;\n    if (pb.opened) return pb;\n    const popupHtml = pb.renderPopup();\n    const popupParams = {\n      content: popupHtml,\n      push: pb.params.popupPush,\n      on: {\n        popupOpen(popup) {\n          pb.onOpen('popup', popup.el);\n        },\n\n        popupOpened(popup) {\n          pb.onOpened('popup', popup.el);\n        },\n\n        popupClose(popup) {\n          pb.onClose('popup', popup.el);\n        },\n\n        popupClosed(popup) {\n          pb.onClosed('popup', popup.el);\n        }\n\n      }\n    };\n\n    if (pb.params.routableModals && pb.view) {\n      pb.view.router.navigate({\n        url: pb.url,\n        route: {\n          path: pb.url,\n          popup: popupParams\n        }\n      });\n    } else {\n      pb.modal = pb.app.popup.create(popupParams).open();\n    }\n\n    return pb;\n  } // Exposition\n\n\n  expositionEnable() {\n    const pb = this;\n\n    if (pb.params.type === 'page') {\n      pb.view.$el.addClass('with-photo-browser-page-exposed');\n    }\n\n    if (pb.$el) pb.$el.addClass('photo-browser-exposed');\n    if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.addClass('photo-browser-captions-exposed');\n    pb.exposed = true;\n    return pb;\n  }\n\n  expositionDisable() {\n    const pb = this;\n\n    if (pb.params.type === 'page') {\n      pb.view.$el.removeClass('with-photo-browser-page-exposed');\n    }\n\n    if (pb.$el) pb.$el.removeClass('photo-browser-exposed');\n    if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.removeClass('photo-browser-captions-exposed');\n    pb.exposed = false;\n    return pb;\n  }\n\n  expositionToggle() {\n    const pb = this;\n\n    if (pb.params.type === 'page') {\n      pb.view.$el.toggleClass('with-photo-browser-page-exposed');\n    }\n\n    if (pb.$el) pb.$el.toggleClass('photo-browser-exposed');\n    if (pb.params.expositionHideCaptions) pb.$captionsContainerEl.toggleClass('photo-browser-captions-exposed');\n    pb.exposed = !pb.exposed;\n    return pb;\n  }\n\n  open(index) {\n    const pb = this;\n    const type = pb.params.type;\n\n    if (pb.opened) {\n      if (pb.swiper && typeof index !== 'undefined') {\n        pb.swiper.slideTo(parseInt(index, 10));\n      }\n\n      return pb;\n    }\n\n    if (typeof index !== 'undefined') {\n      pb.activeIndex = index;\n    }\n\n    if (type === 'standalone') {\n      pb.openStandalone();\n    }\n\n    if (type === 'page') {\n      pb.openPage();\n    }\n\n    if (type === 'popup') {\n      pb.openPopup();\n    }\n\n    return pb;\n  }\n\n  close() {\n    const pb = this;\n    if (!pb.opened) return pb;\n\n    if (pb.params.routableModals && pb.view || pb.openedIn === 'page') {\n      pb.view.router.back();\n    } else {\n      pb.modal.once('modalClosed', () => {\n        nextTick(() => {\n          if (pb.destroyed) return;\n          pb.modal.destroy();\n          delete pb.modal;\n        });\n      });\n      pb.modal.close();\n    }\n\n    return pb;\n  } // eslint-disable-next-line\n\n\n  init() {}\n\n  destroy() {\n    let pb = this;\n    pb.emit('local::beforeDestroy photoBrowserBeforeDestroy', pb);\n\n    if (pb.$el) {\n      pb.$el.trigger('photobrowser:beforedestroy');\n      pb.$el[0].f7PhotoBrowser = null;\n      delete pb.$el[0].f7PhotoBrowser;\n    }\n\n    deleteProps(pb);\n    pb.destroyed = true;\n    pb = null;\n  }\n\n}\n\nexport default PhotoBrowser;"],"mappings":"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"},"metadata":{},"sourceType":"module"}