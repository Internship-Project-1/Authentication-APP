{"ast":null,"code":"import $ from '../../shared/dom7.js';\nimport { extend, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\n\nclass DataTable extends Framework7Class {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const table = this;\n    const defaults = {}; // Extend defaults with modules params\n\n    table.useModulesParams(defaults);\n    table.params = extend(defaults, params); // El\n\n    const $el = $(table.params.el);\n    if ($el.length === 0) return undefined;\n    table.$el = $el;\n    table.el = $el[0];\n\n    if (table.$el[0].f7DataTable) {\n      const instance = table.$el[0].f7DataTable;\n      table.destroy();\n      return instance;\n    }\n\n    table.$el[0].f7DataTable = table;\n    extend(table, {\n      collapsible: $el.hasClass('data-table-collapsible'),\n      // Headers\n      $headerEl: $el.find('.data-table-header'),\n      $headerSelectedEl: $el.find('.data-table-header-selected')\n    }); // Events\n\n    function handleChange(e) {\n      if (e.detail && e.detail.sentByF7DataTable) {\n        // Scripted event, don't do anything\n        return;\n      }\n\n      const $inputEl = $(this);\n      const checked = $inputEl[0].checked;\n      const columnIndex = $inputEl.parents('td,th').index();\n\n      if ($inputEl.parents('thead').length > 0) {\n        if (columnIndex === 0) {\n          $el.find('tbody tr')[checked ? 'addClass' : 'removeClass']('data-table-row-selected');\n        }\n\n        $el.find(`tbody tr td:nth-child(${columnIndex + 1}) input`).prop('checked', checked).trigger('change', {\n          sentByF7DataTable: true\n        });\n        $inputEl.prop('indeterminate', false);\n      } else {\n        if (columnIndex === 0) {\n          $inputEl.parents('tr')[checked ? 'addClass' : 'removeClass']('data-table-row-selected');\n        }\n\n        const checkedRows = $el.find(`tbody .checkbox-cell:nth-child(${columnIndex + 1}) input[type=\"checkbox\"]:checked`).length;\n        const totalRows = $el.find('tbody tr').length;\n        const $headCheckboxEl = $el.find(`thead .checkbox-cell:nth-child(${columnIndex + 1}) input[type=\"checkbox\"]`);\n\n        if (!checked) {\n          $headCheckboxEl.prop('checked', false);\n        } else if (checkedRows === totalRows) {\n          $headCheckboxEl.prop('checked', true).trigger('change', {\n            sentByF7DataTable: true\n          });\n        }\n\n        $headCheckboxEl.prop('indeterminate', checkedRows > 0 && checkedRows < totalRows);\n      }\n\n      table.checkSelectedHeader();\n    }\n\n    function handleSortableClick() {\n      const $cellEl = $(this);\n      const isActive = $cellEl.hasClass('sortable-cell-active');\n      const currentSort = $cellEl.hasClass('sortable-desc') ? 'desc' : 'asc';\n      let newSort;\n\n      if (isActive) {\n        newSort = currentSort === 'desc' ? 'asc' : 'desc';\n        $cellEl.removeClass('sortable-desc sortable-asc').addClass(`sortable-${newSort}`);\n      } else {\n        $el.find('thead .sortable-cell-active').removeClass('sortable-cell-active');\n        $cellEl.addClass('sortable-cell-active');\n        newSort = currentSort;\n      }\n\n      $cellEl.trigger('datatable:sort', newSort);\n      table.emit('local::sort dataTableSort', table, newSort);\n    }\n\n    table.attachEvents = function attachEvents() {\n      table.$el.on('change', '.checkbox-cell input[type=\"checkbox\"]', handleChange);\n      table.$el.find('thead .sortable-cell').on('click', handleSortableClick);\n    };\n\n    table.detachEvents = function detachEvents() {\n      table.$el.off('change', '.checkbox-cell input[type=\"checkbox\"]', handleChange);\n      table.$el.find('thead .sortable-cell').off('click', handleSortableClick);\n    }; // Install Modules\n\n\n    table.useModules(); // Init\n\n    table.init();\n    return table;\n  }\n\n  setCollapsibleLabels() {\n    const table = this;\n    if (!table.collapsible) return;\n    table.$el.find('tbody td:not(.checkbox-cell)').each(el => {\n      const $el = $(el);\n      const elIndex = $el.index();\n      const collapsibleTitle = $el.attr('data-collapsible-title');\n\n      if (!collapsibleTitle && collapsibleTitle !== '') {\n        $el.attr('data-collapsible-title', table.$el.find('thead th').eq(elIndex).text());\n      }\n    });\n  }\n\n  checkSelectedHeader() {\n    const table = this;\n\n    if (table.$headerEl.length > 0 && table.$headerSelectedEl.length > 0) {\n      const checkedItems = table.$el.find('tbody .checkbox-cell input:checked').length;\n      table.$el[checkedItems > 0 ? 'addClass' : 'removeClass']('data-table-has-checked');\n      table.$headerSelectedEl.find('.data-table-selected-count').text(checkedItems);\n    }\n  }\n\n  init() {\n    const table = this;\n    table.attachEvents();\n    table.setCollapsibleLabels();\n    table.checkSelectedHeader();\n  }\n\n  destroy() {\n    let table = this;\n    table.$el.trigger('datatable:beforedestroy');\n    table.emit('local::beforeDestroy dataTableBeforeDestroy', table);\n    table.attachEvents();\n\n    if (table.$el[0]) {\n      table.$el[0].f7DataTable = null;\n      delete table.$el[0].f7DataTable;\n    }\n\n    deleteProps(table);\n    table = null;\n  }\n\n}\n\nexport default DataTable;","map":{"version":3,"names":["$","extend","deleteProps","Framework7Class","DataTable","constructor","app","params","table","defaults","useModulesParams","$el","el","length","undefined","f7DataTable","instance","destroy","collapsible","hasClass","$headerEl","find","$headerSelectedEl","handleChange","e","detail","sentByF7DataTable","$inputEl","checked","columnIndex","parents","index","prop","trigger","checkedRows","totalRows","$headCheckboxEl","checkSelectedHeader","handleSortableClick","$cellEl","isActive","currentSort","newSort","removeClass","addClass","emit","attachEvents","on","detachEvents","off","useModules","init","setCollapsibleLabels","each","elIndex","collapsibleTitle","attr","eq","text","checkedItems"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/components/data-table/data-table-class.js"],"sourcesContent":["import $ from '../../shared/dom7.js';\nimport { extend, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\n\nclass DataTable extends Framework7Class {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const table = this;\n    const defaults = {}; // Extend defaults with modules params\n\n    table.useModulesParams(defaults);\n    table.params = extend(defaults, params); // El\n\n    const $el = $(table.params.el);\n    if ($el.length === 0) return undefined;\n    table.$el = $el;\n    table.el = $el[0];\n\n    if (table.$el[0].f7DataTable) {\n      const instance = table.$el[0].f7DataTable;\n      table.destroy();\n      return instance;\n    }\n\n    table.$el[0].f7DataTable = table;\n    extend(table, {\n      collapsible: $el.hasClass('data-table-collapsible'),\n      // Headers\n      $headerEl: $el.find('.data-table-header'),\n      $headerSelectedEl: $el.find('.data-table-header-selected')\n    }); // Events\n\n    function handleChange(e) {\n      if (e.detail && e.detail.sentByF7DataTable) {\n        // Scripted event, don't do anything\n        return;\n      }\n\n      const $inputEl = $(this);\n      const checked = $inputEl[0].checked;\n      const columnIndex = $inputEl.parents('td,th').index();\n\n      if ($inputEl.parents('thead').length > 0) {\n        if (columnIndex === 0) {\n          $el.find('tbody tr')[checked ? 'addClass' : 'removeClass']('data-table-row-selected');\n        }\n\n        $el.find(`tbody tr td:nth-child(${columnIndex + 1}) input`).prop('checked', checked).trigger('change', {\n          sentByF7DataTable: true\n        });\n        $inputEl.prop('indeterminate', false);\n      } else {\n        if (columnIndex === 0) {\n          $inputEl.parents('tr')[checked ? 'addClass' : 'removeClass']('data-table-row-selected');\n        }\n\n        const checkedRows = $el.find(`tbody .checkbox-cell:nth-child(${columnIndex + 1}) input[type=\"checkbox\"]:checked`).length;\n        const totalRows = $el.find('tbody tr').length;\n        const $headCheckboxEl = $el.find(`thead .checkbox-cell:nth-child(${columnIndex + 1}) input[type=\"checkbox\"]`);\n\n        if (!checked) {\n          $headCheckboxEl.prop('checked', false);\n        } else if (checkedRows === totalRows) {\n          $headCheckboxEl.prop('checked', true).trigger('change', {\n            sentByF7DataTable: true\n          });\n        }\n\n        $headCheckboxEl.prop('indeterminate', checkedRows > 0 && checkedRows < totalRows);\n      }\n\n      table.checkSelectedHeader();\n    }\n\n    function handleSortableClick() {\n      const $cellEl = $(this);\n      const isActive = $cellEl.hasClass('sortable-cell-active');\n      const currentSort = $cellEl.hasClass('sortable-desc') ? 'desc' : 'asc';\n      let newSort;\n\n      if (isActive) {\n        newSort = currentSort === 'desc' ? 'asc' : 'desc';\n        $cellEl.removeClass('sortable-desc sortable-asc').addClass(`sortable-${newSort}`);\n      } else {\n        $el.find('thead .sortable-cell-active').removeClass('sortable-cell-active');\n        $cellEl.addClass('sortable-cell-active');\n        newSort = currentSort;\n      }\n\n      $cellEl.trigger('datatable:sort', newSort);\n      table.emit('local::sort dataTableSort', table, newSort);\n    }\n\n    table.attachEvents = function attachEvents() {\n      table.$el.on('change', '.checkbox-cell input[type=\"checkbox\"]', handleChange);\n      table.$el.find('thead .sortable-cell').on('click', handleSortableClick);\n    };\n\n    table.detachEvents = function detachEvents() {\n      table.$el.off('change', '.checkbox-cell input[type=\"checkbox\"]', handleChange);\n      table.$el.find('thead .sortable-cell').off('click', handleSortableClick);\n    }; // Install Modules\n\n\n    table.useModules(); // Init\n\n    table.init();\n    return table;\n  }\n\n  setCollapsibleLabels() {\n    const table = this;\n    if (!table.collapsible) return;\n    table.$el.find('tbody td:not(.checkbox-cell)').each(el => {\n      const $el = $(el);\n      const elIndex = $el.index();\n      const collapsibleTitle = $el.attr('data-collapsible-title');\n\n      if (!collapsibleTitle && collapsibleTitle !== '') {\n        $el.attr('data-collapsible-title', table.$el.find('thead th').eq(elIndex).text());\n      }\n    });\n  }\n\n  checkSelectedHeader() {\n    const table = this;\n\n    if (table.$headerEl.length > 0 && table.$headerSelectedEl.length > 0) {\n      const checkedItems = table.$el.find('tbody .checkbox-cell input:checked').length;\n      table.$el[checkedItems > 0 ? 'addClass' : 'removeClass']('data-table-has-checked');\n      table.$headerSelectedEl.find('.data-table-selected-count').text(checkedItems);\n    }\n  }\n\n  init() {\n    const table = this;\n    table.attachEvents();\n    table.setCollapsibleLabels();\n    table.checkSelectedHeader();\n  }\n\n  destroy() {\n    let table = this;\n    table.$el.trigger('datatable:beforedestroy');\n    table.emit('local::beforeDestroy dataTableBeforeDestroy', table);\n    table.attachEvents();\n\n    if (table.$el[0]) {\n      table.$el[0].f7DataTable = null;\n      delete table.$el[0].f7DataTable;\n    }\n\n    deleteProps(table);\n    table = null;\n  }\n\n}\n\nexport default DataTable;"],"mappings":"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"},"metadata":{},"sourceType":"module"}