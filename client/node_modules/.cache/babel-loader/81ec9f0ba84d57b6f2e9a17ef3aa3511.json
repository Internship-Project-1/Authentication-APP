{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport $ from '../../shared/dom7.js';\nimport { extend, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx.js';\n\nclass Messages extends Framework7Class {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const m = this;\n    const defaults = {\n      autoLayout: true,\n      messages: [],\n      newMessagesFirst: false,\n      scrollMessages: true,\n      scrollMessagesOnEdge: true,\n      firstMessageRule: undefined,\n      lastMessageRule: undefined,\n      tailMessageRule: undefined,\n      sameNameMessageRule: undefined,\n      sameHeaderMessageRule: undefined,\n      sameFooterMessageRule: undefined,\n      sameAvatarMessageRule: undefined,\n      customClassMessageRule: undefined,\n      renderMessage: undefined\n    }; // Extend defaults with modules params\n\n    m.useModulesParams(defaults);\n    m.params = extend(defaults, params);\n    const $el = $(params.el).eq(0);\n    if ($el.length === 0) return m;\n    if ($el[0].f7Messages) return $el[0].f7Messages;\n    $el[0].f7Messages = m;\n    const $pageContentEl = $el.closest('.page-content').eq(0);\n    extend(m, {\n      messages: m.params.messages,\n      $el,\n      el: $el[0],\n      $pageContentEl,\n      pageContentEl: $pageContentEl[0]\n    }); // Install Modules\n\n    m.useModules(); // Init\n\n    m.init();\n    return m;\n  } // eslint-disable-next-line\n\n\n  getMessageData(messageEl) {\n    const $messageEl = $(messageEl);\n    const data = {\n      name: $messageEl.find('.message-name').html(),\n      header: $messageEl.find('.message-header').html(),\n      textHeader: $messageEl.find('.message-text-header').html(),\n      textFooter: $messageEl.find('.message-text-footer').html(),\n      footer: $messageEl.find('.message-footer').html(),\n      isTitle: $messageEl.hasClass('messages-title'),\n      type: $messageEl.hasClass('message-sent') ? 'sent' : 'received',\n      text: $messageEl.find('.message-text').html(),\n      image: $messageEl.find('.message-image').html(),\n      imageSrc: $messageEl.find('.message-image img').attr('src'),\n      typing: $messageEl.hasClass('message-typing')\n    };\n\n    if (data.isTitle) {\n      data.text = $messageEl.html();\n    }\n\n    if (data.text && data.textHeader) {\n      data.text = data.text.replace(`<div class=\"message-text-header\">${data.textHeader}</div>`, '');\n    }\n\n    if (data.text && data.textFooter) {\n      data.text = data.text.replace(`<div class=\"message-text-footer\">${data.textFooter}</div>`, '');\n    }\n\n    let avatar = $messageEl.find('.message-avatar').css('background-image');\n    if (avatar === 'none' || avatar === '') avatar = undefined;\n\n    if (avatar && typeof avatar === 'string') {\n      avatar = avatar.replace('url(', '').replace(')', '').replace(/\"/g, '').replace(/'/g, '');\n    } else {\n      avatar = undefined;\n    }\n\n    data.avatar = avatar;\n    return data;\n  }\n\n  getMessagesData() {\n    const m = this;\n    const data = [];\n    m.$el.find('.message, .messages-title').each(messageEl => {\n      data.push(m.getMessageData(messageEl));\n    });\n    return data;\n  }\n\n  renderMessage(messageToRender) {\n    const m = this;\n    const message = extend({\n      type: 'sent',\n      attrs: {}\n    }, messageToRender);\n\n    if (m.params.renderMessage) {\n      return m.params.renderMessage.call(m, message);\n    }\n\n    if (message.isTitle) {\n      return `<div class=\"messages-title\">${message.text}</div>`;\n    }\n\n    return $jsx(\"div\", _extends({\n      class: `message message-${message.type} ${message.isTyping ? 'message-typing' : ''} ${message.cssClass || ''}`\n    }, message.attrs), message.avatar && $jsx(\"div\", {\n      class: \"message-avatar\",\n      style: `background-image:url(${message.avatar})`\n    }), $jsx(\"div\", {\n      class: \"message-content\"\n    }, message.name && $jsx(\"div\", {\n      class: \"message-name\"\n    }, message.name), message.header && $jsx(\"div\", {\n      class: \"message-header\"\n    }, message.header), $jsx(\"div\", {\n      class: \"message-bubble\"\n    }, message.textHeader && $jsx(\"div\", {\n      class: \"message-text-header\"\n    }, message.textHeader), message.image && $jsx(\"div\", {\n      class: \"message-image\"\n    }, message.image), message.imageSrc && !message.image && $jsx(\"div\", {\n      class: \"message-image\"\n    }, $jsx(\"img\", {\n      src: message.imageSrc\n    })), (message.text || message.isTyping) && $jsx(\"div\", {\n      class: \"message-text\"\n    }, message.text || '', message.isTyping && $jsx(\"div\", {\n      class: \"message-typing-indicator\"\n    }, $jsx(\"div\", null), $jsx(\"div\", null), $jsx(\"div\", null))), message.textFooter && $jsx(\"div\", {\n      class: \"message-text-footer\"\n    }, message.textFooter)), message.footer && $jsx(\"div\", {\n      class: \"message-footer\"\n    }, message.footer)));\n  }\n\n  renderMessages(messagesToRender, method) {\n    if (messagesToRender === void 0) {\n      messagesToRender = this.messages;\n    }\n\n    if (method === void 0) {\n      method = this.params.newMessagesFirst ? 'prepend' : 'append';\n    }\n\n    const m = this;\n    const html = messagesToRender.map(message => m.renderMessage(message)).join('');\n    m.$el[method](html);\n  }\n\n  isFirstMessage() {\n    const m = this;\n    if (m.params.firstMessageRule) return m.params.firstMessageRule(...arguments);\n    return false;\n  }\n\n  isLastMessage() {\n    const m = this;\n    if (m.params.lastMessageRule) return m.params.lastMessageRule(...arguments);\n    return false;\n  }\n\n  isTailMessage() {\n    const m = this;\n    if (m.params.tailMessageRule) return m.params.tailMessageRule(...arguments);\n    return false;\n  }\n\n  isSameNameMessage() {\n    const m = this;\n    if (m.params.sameNameMessageRule) return m.params.sameNameMessageRule(...arguments);\n    return false;\n  }\n\n  isSameHeaderMessage() {\n    const m = this;\n    if (m.params.sameHeaderMessageRule) return m.params.sameHeaderMessageRule(...arguments);\n    return false;\n  }\n\n  isSameFooterMessage() {\n    const m = this;\n    if (m.params.sameFooterMessageRule) return m.params.sameFooterMessageRule(...arguments);\n    return false;\n  }\n\n  isSameAvatarMessage() {\n    const m = this;\n    if (m.params.sameAvatarMessageRule) return m.params.sameAvatarMessageRule(...arguments);\n    return false;\n  }\n\n  isCustomClassMessage() {\n    const m = this;\n    if (m.params.customClassMessageRule) return m.params.customClassMessageRule(...arguments);\n    return undefined;\n  }\n\n  layout() {\n    const m = this;\n    m.$el.find('.message, .messages-title').each((messageEl, index) => {\n      const $messageEl = $(messageEl);\n\n      if (!m.messages) {\n        m.messages = m.getMessagesData();\n      }\n\n      const classes = [];\n      const message = m.messages[index];\n      const previousMessage = m.messages[index - 1];\n      const nextMessage = m.messages[index + 1];\n\n      if (m.isFirstMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-first');\n      }\n\n      if (m.isLastMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-last');\n      }\n\n      if (m.isTailMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-tail');\n      }\n\n      if (m.isSameNameMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-name');\n      }\n\n      if (m.isSameHeaderMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-header');\n      }\n\n      if (m.isSameFooterMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-footer');\n      }\n\n      if (m.isSameAvatarMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-avatar');\n      }\n\n      let customMessageClasses = m.isCustomClassMessage(message, previousMessage, nextMessage);\n\n      if (customMessageClasses && customMessageClasses.length) {\n        if (typeof customMessageClasses === 'string') {\n          customMessageClasses = customMessageClasses.split(' ');\n        }\n\n        customMessageClasses.forEach(customClass => {\n          classes.push(customClass);\n        });\n      }\n\n      $messageEl.removeClass('message-first message-last message-tail message-same-name message-same-header message-same-footer message-same-avatar');\n      classes.forEach(className => {\n        $messageEl.addClass(className);\n      });\n    });\n  }\n\n  clear() {\n    const m = this;\n    m.messages = [];\n    m.$el.html('');\n  }\n\n  removeMessage(messageToRemove, layout) {\n    if (layout === void 0) {\n      layout = true;\n    }\n\n    const m = this; // Index or El\n\n    let index;\n    let $el;\n\n    if (typeof messageToRemove === 'number') {\n      index = messageToRemove;\n      $el = m.$el.find('.message, .messages-title').eq(index);\n    } else if (m.messages && m.messages.indexOf(messageToRemove) >= 0) {\n      index = m.messages.indexOf(messageToRemove);\n      $el = m.$el.children().eq(index);\n    } else {\n      $el = $(messageToRemove);\n      index = $el.index();\n    }\n\n    if ($el.length === 0) {\n      return m;\n    }\n\n    $el.remove();\n    m.messages.splice(index, 1);\n    if (m.params.autoLayout && layout) m.layout();\n    return m;\n  }\n\n  removeMessages(messagesToRemove, layout) {\n    if (layout === void 0) {\n      layout = true;\n    }\n\n    const m = this;\n\n    if (Array.isArray(messagesToRemove)) {\n      const messagesToRemoveEls = [];\n      messagesToRemove.forEach(messageToRemoveIndex => {\n        messagesToRemoveEls.push(m.$el.find('.message, .messages-title').eq(messageToRemoveIndex));\n      });\n      messagesToRemoveEls.forEach(messageToRemove => {\n        m.removeMessage(messageToRemove, false);\n      });\n    } else {\n      $(messagesToRemove).each(messageToRemove => {\n        m.removeMessage(messageToRemove, false);\n      });\n    }\n\n    if (m.params.autoLayout && layout) m.layout();\n    return m;\n  }\n\n  addMessage() {\n    const m = this;\n    let messageToAdd;\n    let animate;\n    let method;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (typeof args[1] === 'boolean') {\n      [messageToAdd, animate, method] = args;\n    } else {\n      [messageToAdd, method, animate] = args;\n    }\n\n    if (typeof animate === 'undefined') {\n      animate = true;\n    }\n\n    if (typeof method === 'undefined') {\n      method = m.params.newMessagesFirst ? 'prepend' : 'append';\n    }\n\n    return m.addMessages([messageToAdd], animate, method);\n  }\n\n  setScrollData() {\n    const m = this; // Define scroll positions before new messages added\n\n    const scrollHeightBefore = m.pageContentEl.scrollHeight;\n    const heightBefore = m.pageContentEl.offsetHeight;\n    const scrollBefore = m.pageContentEl.scrollTop;\n    m.scrollData = {\n      scrollHeightBefore,\n      heightBefore,\n      scrollBefore\n    };\n    return {\n      scrollHeightBefore,\n      heightBefore,\n      scrollBefore\n    };\n  }\n\n  addMessages() {\n    const m = this;\n    let messagesToAdd;\n    let animate;\n    let method;\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    if (typeof args[1] === 'boolean') {\n      [messagesToAdd, animate, method] = args;\n    } else {\n      [messagesToAdd, method, animate] = args;\n    }\n\n    if (typeof animate === 'undefined') {\n      animate = true;\n    }\n\n    if (typeof method === 'undefined') {\n      method = m.params.newMessagesFirst ? 'prepend' : 'append';\n    }\n\n    const {\n      scrollHeightBefore,\n      scrollBefore\n    } = m.setScrollData(); // Add message to DOM and data\n\n    let messagesHTML = '';\n    const typingMessage = m.messages.filter(el => el.isTyping)[0];\n    messagesToAdd.forEach(messageToAdd => {\n      if (typingMessage) {\n        if (method === 'append') {\n          m.messages.splice(m.messages.indexOf(typingMessage), 0, messageToAdd);\n        } else {\n          m.messages.splice(m.messages.indexOf(typingMessage) + 1, 0, messageToAdd);\n        }\n      } else {\n        m.messages[method === 'append' ? 'push' : 'unshift'](messageToAdd);\n      }\n\n      messagesHTML += m.renderMessage(messageToAdd);\n    });\n    const $messagesEls = $(messagesHTML);\n\n    if (animate) {\n      if (method === 'append' && !m.params.newMessagesFirst) {\n        $messagesEls.addClass('message-appear-from-bottom');\n      }\n\n      if (method === 'prepend' && m.params.newMessagesFirst) {\n        $messagesEls.addClass('message-appear-from-top');\n      }\n    }\n\n    if (typingMessage) {\n      if (method === 'append') {\n        $messagesEls.insertBefore(m.$el.find('.message-typing'));\n      } else {\n        $messagesEls.insertAfter(m.$el.find('.message-typing'));\n      }\n    } else {\n      m.$el[method]($messagesEls);\n    } // Layout\n\n\n    if (m.params.autoLayout) m.layout();\n\n    if (method === 'prepend' && !typingMessage) {\n      m.pageContentEl.scrollTop = scrollBefore + (m.pageContentEl.scrollHeight - scrollHeightBefore);\n    }\n\n    if (m.params.scrollMessages && (method === 'append' && !m.params.newMessagesFirst || method === 'prepend' && m.params.newMessagesFirst && !typingMessage)) {\n      m.scrollWithEdgeCheck(animate);\n    }\n\n    return m;\n  }\n\n  showTyping(message) {\n    if (message === void 0) {\n      message = {};\n    }\n\n    const m = this;\n    const typingMessage = m.messages.filter(el => el.isTyping)[0];\n\n    if (typingMessage) {\n      m.removeMessage(m.messages.indexOf(typingMessage));\n    }\n\n    m.addMessage(extend({\n      type: 'received',\n      isTyping: true\n    }, message));\n    return m;\n  }\n\n  hideTyping() {\n    const m = this;\n    let typingMessageIndex;\n    let typingFound;\n    m.messages.forEach((message, index) => {\n      if (message.isTyping) typingMessageIndex = index;\n    });\n\n    if (typeof typingMessageIndex !== 'undefined') {\n      if (m.$el.find('.message').eq(typingMessageIndex).hasClass('message-typing')) {\n        typingFound = true;\n        m.removeMessage(typingMessageIndex);\n      }\n    }\n\n    if (!typingFound) {\n      const $typingMessageEl = m.$el.find('.message-typing');\n\n      if ($typingMessageEl.length) {\n        m.removeMessage($typingMessageEl);\n      }\n    }\n\n    return m;\n  }\n\n  scrollWithEdgeCheck(animate) {\n    const m = this;\n    const {\n      scrollBefore,\n      scrollHeightBefore,\n      heightBefore\n    } = m.scrollData;\n\n    if (m.params.scrollMessagesOnEdge) {\n      let onEdge = false;\n\n      if (m.params.newMessagesFirst && scrollBefore === 0) {\n        onEdge = true;\n      }\n\n      if (!m.params.newMessagesFirst && scrollBefore - (scrollHeightBefore - heightBefore) >= -10) {\n        onEdge = true;\n      }\n\n      if (onEdge) m.scroll(animate ? undefined : 0);\n    } else {\n      m.scroll(animate ? undefined : 0);\n    }\n  }\n\n  scroll(duration, scrollTop) {\n    if (duration === void 0) {\n      duration = 300;\n    }\n\n    const m = this;\n    const currentScroll = m.pageContentEl.scrollTop;\n    let newScrollTop;\n    if (typeof scrollTop !== 'undefined') newScrollTop = scrollTop;else {\n      newScrollTop = m.params.newMessagesFirst ? 0 : m.pageContentEl.scrollHeight - m.pageContentEl.offsetHeight;\n      if (newScrollTop === currentScroll) return m;\n    }\n    m.$pageContentEl.scrollTop(newScrollTop, duration);\n    return m;\n  }\n\n  init() {\n    const m = this;\n\n    if (!m.messages || m.messages.length === 0) {\n      m.messages = m.getMessagesData();\n    }\n\n    if (m.params.messages && m.params.messages.length) {\n      m.renderMessages();\n    }\n\n    if (m.params.autoLayout) m.layout();\n    if (m.params.scrollMessages) m.scroll(0);\n  }\n\n  destroy() {\n    const m = this;\n    m.emit('local::beforeDestroy messagesBeforeDestroy', m);\n    m.$el.trigger('messages:beforedestroy');\n\n    if (m.$el[0]) {\n      m.$el[0].f7Messages = null;\n      delete m.$el[0].f7Messages;\n    }\n\n    deleteProps(m);\n  }\n\n}\n\nexport default Messages;","map":{"version":3,"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","$","extend","deleteProps","Framework7Class","$jsx","Messages","constructor","app","params","m","defaults","autoLayout","messages","newMessagesFirst","scrollMessages","scrollMessagesOnEdge","firstMessageRule","undefined","lastMessageRule","tailMessageRule","sameNameMessageRule","sameHeaderMessageRule","sameFooterMessageRule","sameAvatarMessageRule","customClassMessageRule","renderMessage","useModulesParams","$el","el","eq","f7Messages","$pageContentEl","closest","pageContentEl","useModules","init","getMessageData","messageEl","$messageEl","data","name","find","html","header","textHeader","textFooter","footer","isTitle","hasClass","type","text","image","imageSrc","attr","typing","replace","avatar","css","getMessagesData","each","push","messageToRender","message","attrs","class","isTyping","cssClass","style","src","renderMessages","messagesToRender","method","map","join","isFirstMessage","isLastMessage","isTailMessage","isSameNameMessage","isSameHeaderMessage","isSameFooterMessage","isSameAvatarMessage","isCustomClassMessage","layout","index","classes","previousMessage","nextMessage","customMessageClasses","split","forEach","customClass","removeClass","className","addClass","clear","removeMessage","messageToRemove","indexOf","children","remove","splice","removeMessages","messagesToRemove","Array","isArray","messagesToRemoveEls","messageToRemoveIndex","addMessage","messageToAdd","animate","_len","args","_key","addMessages","setScrollData","scrollHeightBefore","scrollHeight","heightBefore","offsetHeight","scrollBefore","scrollTop","scrollData","messagesToAdd","_len2","_key2","messagesHTML","typingMessage","filter","$messagesEls","insertBefore","insertAfter","scrollWithEdgeCheck","showTyping","hideTyping","typingMessageIndex","typingFound","$typingMessageEl","onEdge","scroll","duration","currentScroll","newScrollTop","destroy","emit","trigger"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/components/messages/messages-class.js"],"sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport $ from '../../shared/dom7.js';\nimport { extend, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx.js';\n\nclass Messages extends Framework7Class {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const m = this;\n    const defaults = {\n      autoLayout: true,\n      messages: [],\n      newMessagesFirst: false,\n      scrollMessages: true,\n      scrollMessagesOnEdge: true,\n      firstMessageRule: undefined,\n      lastMessageRule: undefined,\n      tailMessageRule: undefined,\n      sameNameMessageRule: undefined,\n      sameHeaderMessageRule: undefined,\n      sameFooterMessageRule: undefined,\n      sameAvatarMessageRule: undefined,\n      customClassMessageRule: undefined,\n      renderMessage: undefined\n    }; // Extend defaults with modules params\n\n    m.useModulesParams(defaults);\n    m.params = extend(defaults, params);\n    const $el = $(params.el).eq(0);\n    if ($el.length === 0) return m;\n    if ($el[0].f7Messages) return $el[0].f7Messages;\n    $el[0].f7Messages = m;\n    const $pageContentEl = $el.closest('.page-content').eq(0);\n    extend(m, {\n      messages: m.params.messages,\n      $el,\n      el: $el[0],\n      $pageContentEl,\n      pageContentEl: $pageContentEl[0]\n    }); // Install Modules\n\n    m.useModules(); // Init\n\n    m.init();\n    return m;\n  } // eslint-disable-next-line\n\n\n  getMessageData(messageEl) {\n    const $messageEl = $(messageEl);\n    const data = {\n      name: $messageEl.find('.message-name').html(),\n      header: $messageEl.find('.message-header').html(),\n      textHeader: $messageEl.find('.message-text-header').html(),\n      textFooter: $messageEl.find('.message-text-footer').html(),\n      footer: $messageEl.find('.message-footer').html(),\n      isTitle: $messageEl.hasClass('messages-title'),\n      type: $messageEl.hasClass('message-sent') ? 'sent' : 'received',\n      text: $messageEl.find('.message-text').html(),\n      image: $messageEl.find('.message-image').html(),\n      imageSrc: $messageEl.find('.message-image img').attr('src'),\n      typing: $messageEl.hasClass('message-typing')\n    };\n\n    if (data.isTitle) {\n      data.text = $messageEl.html();\n    }\n\n    if (data.text && data.textHeader) {\n      data.text = data.text.replace(`<div class=\"message-text-header\">${data.textHeader}</div>`, '');\n    }\n\n    if (data.text && data.textFooter) {\n      data.text = data.text.replace(`<div class=\"message-text-footer\">${data.textFooter}</div>`, '');\n    }\n\n    let avatar = $messageEl.find('.message-avatar').css('background-image');\n    if (avatar === 'none' || avatar === '') avatar = undefined;\n\n    if (avatar && typeof avatar === 'string') {\n      avatar = avatar.replace('url(', '').replace(')', '').replace(/\"/g, '').replace(/'/g, '');\n    } else {\n      avatar = undefined;\n    }\n\n    data.avatar = avatar;\n    return data;\n  }\n\n  getMessagesData() {\n    const m = this;\n    const data = [];\n    m.$el.find('.message, .messages-title').each(messageEl => {\n      data.push(m.getMessageData(messageEl));\n    });\n    return data;\n  }\n\n  renderMessage(messageToRender) {\n    const m = this;\n    const message = extend({\n      type: 'sent',\n      attrs: {}\n    }, messageToRender);\n\n    if (m.params.renderMessage) {\n      return m.params.renderMessage.call(m, message);\n    }\n\n    if (message.isTitle) {\n      return `<div class=\"messages-title\">${message.text}</div>`;\n    }\n\n    return $jsx(\"div\", _extends({\n      class: `message message-${message.type} ${message.isTyping ? 'message-typing' : ''} ${message.cssClass || ''}`\n    }, message.attrs), message.avatar && $jsx(\"div\", {\n      class: \"message-avatar\",\n      style: `background-image:url(${message.avatar})`\n    }), $jsx(\"div\", {\n      class: \"message-content\"\n    }, message.name && $jsx(\"div\", {\n      class: \"message-name\"\n    }, message.name), message.header && $jsx(\"div\", {\n      class: \"message-header\"\n    }, message.header), $jsx(\"div\", {\n      class: \"message-bubble\"\n    }, message.textHeader && $jsx(\"div\", {\n      class: \"message-text-header\"\n    }, message.textHeader), message.image && $jsx(\"div\", {\n      class: \"message-image\"\n    }, message.image), message.imageSrc && !message.image && $jsx(\"div\", {\n      class: \"message-image\"\n    }, $jsx(\"img\", {\n      src: message.imageSrc\n    })), (message.text || message.isTyping) && $jsx(\"div\", {\n      class: \"message-text\"\n    }, message.text || '', message.isTyping && $jsx(\"div\", {\n      class: \"message-typing-indicator\"\n    }, $jsx(\"div\", null), $jsx(\"div\", null), $jsx(\"div\", null))), message.textFooter && $jsx(\"div\", {\n      class: \"message-text-footer\"\n    }, message.textFooter)), message.footer && $jsx(\"div\", {\n      class: \"message-footer\"\n    }, message.footer)));\n  }\n\n  renderMessages(messagesToRender, method) {\n    if (messagesToRender === void 0) {\n      messagesToRender = this.messages;\n    }\n\n    if (method === void 0) {\n      method = this.params.newMessagesFirst ? 'prepend' : 'append';\n    }\n\n    const m = this;\n    const html = messagesToRender.map(message => m.renderMessage(message)).join('');\n    m.$el[method](html);\n  }\n\n  isFirstMessage() {\n    const m = this;\n    if (m.params.firstMessageRule) return m.params.firstMessageRule(...arguments);\n    return false;\n  }\n\n  isLastMessage() {\n    const m = this;\n    if (m.params.lastMessageRule) return m.params.lastMessageRule(...arguments);\n    return false;\n  }\n\n  isTailMessage() {\n    const m = this;\n    if (m.params.tailMessageRule) return m.params.tailMessageRule(...arguments);\n    return false;\n  }\n\n  isSameNameMessage() {\n    const m = this;\n    if (m.params.sameNameMessageRule) return m.params.sameNameMessageRule(...arguments);\n    return false;\n  }\n\n  isSameHeaderMessage() {\n    const m = this;\n    if (m.params.sameHeaderMessageRule) return m.params.sameHeaderMessageRule(...arguments);\n    return false;\n  }\n\n  isSameFooterMessage() {\n    const m = this;\n    if (m.params.sameFooterMessageRule) return m.params.sameFooterMessageRule(...arguments);\n    return false;\n  }\n\n  isSameAvatarMessage() {\n    const m = this;\n    if (m.params.sameAvatarMessageRule) return m.params.sameAvatarMessageRule(...arguments);\n    return false;\n  }\n\n  isCustomClassMessage() {\n    const m = this;\n    if (m.params.customClassMessageRule) return m.params.customClassMessageRule(...arguments);\n    return undefined;\n  }\n\n  layout() {\n    const m = this;\n    m.$el.find('.message, .messages-title').each((messageEl, index) => {\n      const $messageEl = $(messageEl);\n\n      if (!m.messages) {\n        m.messages = m.getMessagesData();\n      }\n\n      const classes = [];\n      const message = m.messages[index];\n      const previousMessage = m.messages[index - 1];\n      const nextMessage = m.messages[index + 1];\n\n      if (m.isFirstMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-first');\n      }\n\n      if (m.isLastMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-last');\n      }\n\n      if (m.isTailMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-tail');\n      }\n\n      if (m.isSameNameMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-name');\n      }\n\n      if (m.isSameHeaderMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-header');\n      }\n\n      if (m.isSameFooterMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-footer');\n      }\n\n      if (m.isSameAvatarMessage(message, previousMessage, nextMessage)) {\n        classes.push('message-same-avatar');\n      }\n\n      let customMessageClasses = m.isCustomClassMessage(message, previousMessage, nextMessage);\n\n      if (customMessageClasses && customMessageClasses.length) {\n        if (typeof customMessageClasses === 'string') {\n          customMessageClasses = customMessageClasses.split(' ');\n        }\n\n        customMessageClasses.forEach(customClass => {\n          classes.push(customClass);\n        });\n      }\n\n      $messageEl.removeClass('message-first message-last message-tail message-same-name message-same-header message-same-footer message-same-avatar');\n      classes.forEach(className => {\n        $messageEl.addClass(className);\n      });\n    });\n  }\n\n  clear() {\n    const m = this;\n    m.messages = [];\n    m.$el.html('');\n  }\n\n  removeMessage(messageToRemove, layout) {\n    if (layout === void 0) {\n      layout = true;\n    }\n\n    const m = this; // Index or El\n\n    let index;\n    let $el;\n\n    if (typeof messageToRemove === 'number') {\n      index = messageToRemove;\n      $el = m.$el.find('.message, .messages-title').eq(index);\n    } else if (m.messages && m.messages.indexOf(messageToRemove) >= 0) {\n      index = m.messages.indexOf(messageToRemove);\n      $el = m.$el.children().eq(index);\n    } else {\n      $el = $(messageToRemove);\n      index = $el.index();\n    }\n\n    if ($el.length === 0) {\n      return m;\n    }\n\n    $el.remove();\n    m.messages.splice(index, 1);\n    if (m.params.autoLayout && layout) m.layout();\n    return m;\n  }\n\n  removeMessages(messagesToRemove, layout) {\n    if (layout === void 0) {\n      layout = true;\n    }\n\n    const m = this;\n\n    if (Array.isArray(messagesToRemove)) {\n      const messagesToRemoveEls = [];\n      messagesToRemove.forEach(messageToRemoveIndex => {\n        messagesToRemoveEls.push(m.$el.find('.message, .messages-title').eq(messageToRemoveIndex));\n      });\n      messagesToRemoveEls.forEach(messageToRemove => {\n        m.removeMessage(messageToRemove, false);\n      });\n    } else {\n      $(messagesToRemove).each(messageToRemove => {\n        m.removeMessage(messageToRemove, false);\n      });\n    }\n\n    if (m.params.autoLayout && layout) m.layout();\n    return m;\n  }\n\n  addMessage() {\n    const m = this;\n    let messageToAdd;\n    let animate;\n    let method;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (typeof args[1] === 'boolean') {\n      [messageToAdd, animate, method] = args;\n    } else {\n      [messageToAdd, method, animate] = args;\n    }\n\n    if (typeof animate === 'undefined') {\n      animate = true;\n    }\n\n    if (typeof method === 'undefined') {\n      method = m.params.newMessagesFirst ? 'prepend' : 'append';\n    }\n\n    return m.addMessages([messageToAdd], animate, method);\n  }\n\n  setScrollData() {\n    const m = this; // Define scroll positions before new messages added\n\n    const scrollHeightBefore = m.pageContentEl.scrollHeight;\n    const heightBefore = m.pageContentEl.offsetHeight;\n    const scrollBefore = m.pageContentEl.scrollTop;\n    m.scrollData = {\n      scrollHeightBefore,\n      heightBefore,\n      scrollBefore\n    };\n    return {\n      scrollHeightBefore,\n      heightBefore,\n      scrollBefore\n    };\n  }\n\n  addMessages() {\n    const m = this;\n    let messagesToAdd;\n    let animate;\n    let method;\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    if (typeof args[1] === 'boolean') {\n      [messagesToAdd, animate, method] = args;\n    } else {\n      [messagesToAdd, method, animate] = args;\n    }\n\n    if (typeof animate === 'undefined') {\n      animate = true;\n    }\n\n    if (typeof method === 'undefined') {\n      method = m.params.newMessagesFirst ? 'prepend' : 'append';\n    }\n\n    const {\n      scrollHeightBefore,\n      scrollBefore\n    } = m.setScrollData(); // Add message to DOM and data\n\n    let messagesHTML = '';\n    const typingMessage = m.messages.filter(el => el.isTyping)[0];\n    messagesToAdd.forEach(messageToAdd => {\n      if (typingMessage) {\n        if (method === 'append') {\n          m.messages.splice(m.messages.indexOf(typingMessage), 0, messageToAdd);\n        } else {\n          m.messages.splice(m.messages.indexOf(typingMessage) + 1, 0, messageToAdd);\n        }\n      } else {\n        m.messages[method === 'append' ? 'push' : 'unshift'](messageToAdd);\n      }\n\n      messagesHTML += m.renderMessage(messageToAdd);\n    });\n    const $messagesEls = $(messagesHTML);\n\n    if (animate) {\n      if (method === 'append' && !m.params.newMessagesFirst) {\n        $messagesEls.addClass('message-appear-from-bottom');\n      }\n\n      if (method === 'prepend' && m.params.newMessagesFirst) {\n        $messagesEls.addClass('message-appear-from-top');\n      }\n    }\n\n    if (typingMessage) {\n      if (method === 'append') {\n        $messagesEls.insertBefore(m.$el.find('.message-typing'));\n      } else {\n        $messagesEls.insertAfter(m.$el.find('.message-typing'));\n      }\n    } else {\n      m.$el[method]($messagesEls);\n    } // Layout\n\n\n    if (m.params.autoLayout) m.layout();\n\n    if (method === 'prepend' && !typingMessage) {\n      m.pageContentEl.scrollTop = scrollBefore + (m.pageContentEl.scrollHeight - scrollHeightBefore);\n    }\n\n    if (m.params.scrollMessages && (method === 'append' && !m.params.newMessagesFirst || method === 'prepend' && m.params.newMessagesFirst && !typingMessage)) {\n      m.scrollWithEdgeCheck(animate);\n    }\n\n    return m;\n  }\n\n  showTyping(message) {\n    if (message === void 0) {\n      message = {};\n    }\n\n    const m = this;\n    const typingMessage = m.messages.filter(el => el.isTyping)[0];\n\n    if (typingMessage) {\n      m.removeMessage(m.messages.indexOf(typingMessage));\n    }\n\n    m.addMessage(extend({\n      type: 'received',\n      isTyping: true\n    }, message));\n    return m;\n  }\n\n  hideTyping() {\n    const m = this;\n    let typingMessageIndex;\n    let typingFound;\n    m.messages.forEach((message, index) => {\n      if (message.isTyping) typingMessageIndex = index;\n    });\n\n    if (typeof typingMessageIndex !== 'undefined') {\n      if (m.$el.find('.message').eq(typingMessageIndex).hasClass('message-typing')) {\n        typingFound = true;\n        m.removeMessage(typingMessageIndex);\n      }\n    }\n\n    if (!typingFound) {\n      const $typingMessageEl = m.$el.find('.message-typing');\n\n      if ($typingMessageEl.length) {\n        m.removeMessage($typingMessageEl);\n      }\n    }\n\n    return m;\n  }\n\n  scrollWithEdgeCheck(animate) {\n    const m = this;\n    const {\n      scrollBefore,\n      scrollHeightBefore,\n      heightBefore\n    } = m.scrollData;\n\n    if (m.params.scrollMessagesOnEdge) {\n      let onEdge = false;\n\n      if (m.params.newMessagesFirst && scrollBefore === 0) {\n        onEdge = true;\n      }\n\n      if (!m.params.newMessagesFirst && scrollBefore - (scrollHeightBefore - heightBefore) >= -10) {\n        onEdge = true;\n      }\n\n      if (onEdge) m.scroll(animate ? undefined : 0);\n    } else {\n      m.scroll(animate ? undefined : 0);\n    }\n  }\n\n  scroll(duration, scrollTop) {\n    if (duration === void 0) {\n      duration = 300;\n    }\n\n    const m = this;\n    const currentScroll = m.pageContentEl.scrollTop;\n    let newScrollTop;\n    if (typeof scrollTop !== 'undefined') newScrollTop = scrollTop;else {\n      newScrollTop = m.params.newMessagesFirst ? 0 : m.pageContentEl.scrollHeight - m.pageContentEl.offsetHeight;\n      if (newScrollTop === currentScroll) return m;\n    }\n    m.$pageContentEl.scrollTop(newScrollTop, duration);\n    return m;\n  }\n\n  init() {\n    const m = this;\n\n    if (!m.messages || m.messages.length === 0) {\n      m.messages = m.getMessagesData();\n    }\n\n    if (m.params.messages && m.params.messages.length) {\n      m.renderMessages();\n    }\n\n    if (m.params.autoLayout) m.layout();\n    if (m.params.scrollMessages) m.scroll(0);\n  }\n\n  destroy() {\n    const m = this;\n    m.emit('local::beforeDestroy messagesBeforeDestroy', m);\n    m.$el.trigger('messages:beforedestroy');\n\n    if (m.$el[0]) {\n      m.$el[0].f7Messages = null;\n      delete m.$el[0].f7Messages;\n    }\n\n    deleteProps(m);\n  }\n\n}\n\nexport default Messages;"],"mappings":"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"},"metadata":{},"sourceType":"module"}