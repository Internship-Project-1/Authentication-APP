{"ast":null,"code":"import $ from '../../shared/dom7.js';\nimport { deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\nimport { getSupport } from '../../shared/get-support.js';\nimport { getDevice } from '../../shared/get-device.js';\n\nclass PullToRefresh extends Framework7Class {\n  constructor(app, el) {\n    super({}, [app]);\n    const ptr = this;\n    const device = getDevice();\n    const support = getSupport();\n    const $el = $(el);\n    const $preloaderEl = $el.find('.ptr-preloader');\n    ptr.$el = $el;\n    ptr.el = $el[0];\n    ptr.app = app;\n    ptr.bottom = ptr.$el.hasClass('ptr-bottom'); // Extend defaults with modules params\n\n    ptr.useModulesParams({});\n    const isMaterial = app.theme === 'md';\n    const isIos = app.theme === 'ios';\n    const isAurora = app.theme === 'aurora'; // Done\n\n    ptr.done = function done() {\n      const $transitionTarget = isMaterial ? $preloaderEl : $el;\n\n      const onTranstionEnd = e => {\n        if ($(e.target).closest($preloaderEl).length) return;\n        $el.removeClass('ptr-transitioning ptr-pull-up ptr-pull-down ptr-closing');\n        $el.trigger('ptr:done');\n        ptr.emit('local::done ptrDone', $el[0]);\n        $transitionTarget.off('transitionend', onTranstionEnd);\n      };\n\n      $transitionTarget.on('transitionend', onTranstionEnd);\n      $el.removeClass('ptr-refreshing').addClass('ptr-transitioning ptr-closing');\n      return ptr;\n    };\n\n    ptr.refresh = function refresh() {\n      if ($el.hasClass('ptr-refreshing')) return ptr;\n      $el.addClass('ptr-transitioning ptr-refreshing');\n      $el.trigger('ptr:refresh', ptr.done);\n      ptr.emit('local::refresh ptrRefresh', $el[0], ptr.done);\n      return ptr;\n    }; // Mousewheel\n\n\n    ptr.mousewheel = $el.attr('data-ptr-mousewheel') === 'true'; // Events handling\n\n    let touchId;\n    let isTouched;\n    let isMoved;\n    const touchesStart = {};\n    let isScrolling;\n    let touchesDiff;\n    let refresh = false;\n    let useTranslate = false;\n    let forceUseTranslate = false;\n    let startTranslate = 0;\n    let translate;\n    let scrollTop;\n    let wasScrolled;\n    let triggerDistance;\n    let dynamicTriggerDistance;\n    let pullStarted;\n    let hasNavbar = false;\n    let scrollHeight;\n    let offsetHeight;\n    let maxScrollTop;\n    const $pageEl = $el.parents('.page');\n    if ($pageEl.find('.navbar').length > 0 || $pageEl.parents('.view').children('.navbars').length > 0) hasNavbar = true;\n    if ($pageEl.hasClass('no-navbar')) hasNavbar = false;\n\n    if (!ptr.bottom) {\n      const pageNavbarEl = app.navbar.getElByPage($pageEl[0]);\n\n      if (pageNavbarEl) {\n        const $pageNavbarEl = $(pageNavbarEl);\n        const isLargeTransparent = $pageNavbarEl.hasClass('navbar-large-transparent') || $pageNavbarEl.hasClass('navbar-large') && $pageNavbarEl.hasClass('navbar-transparent');\n        const isTransparent = $pageNavbarEl.hasClass('navbar-transparent') && !$pageNavbarEl.hasClass('navbar-large');\n\n        if (isLargeTransparent) {\n          $el.addClass('ptr-with-navbar-large-transparent');\n        } else if (isTransparent) {\n          $el.addClass('ptr-with-navbar-transparent');\n        }\n      }\n    }\n\n    if (!hasNavbar && !ptr.bottom) $el.addClass('ptr-no-navbar'); // Define trigger distance\n\n    if ($el.attr('data-ptr-distance')) {\n      dynamicTriggerDistance = true;\n    } else if (isMaterial) {\n      triggerDistance = 66;\n    } else if (isIos) {\n      triggerDistance = 44;\n    } else if (isAurora) {\n      triggerDistance = 38;\n    }\n\n    function setPreloaderProgress(progress) {\n      if (progress === void 0) {\n        progress = 0;\n      }\n\n      const $bars = $preloaderEl.find('.preloader-inner-line');\n      const perBarProgress = 1 / $bars.length;\n      $bars.forEach((barEl, barIndex) => {\n        const barProgress = (progress - barIndex * perBarProgress) / perBarProgress;\n        barEl.style.opacity = Math.max(Math.min(barProgress, 1), 0) * 0.27;\n      });\n    }\n\n    function unsetPreloaderProgress() {\n      $preloaderEl.find('.preloader-inner-line').css('opacity', '');\n    }\n\n    function handleTouchStart(e) {\n      if (isTouched) {\n        if (device.os === 'android') {\n          if ('targetTouches' in e && e.targetTouches.length > 1) return;\n        } else return;\n      }\n\n      if ($el.hasClass('ptr-refreshing')) {\n        return;\n      }\n\n      if ($(e.target).closest('.sortable-handler, .ptr-ignore, .card-expandable.card-opened').length) return;\n      isMoved = false;\n      pullStarted = false;\n      isTouched = true;\n      isScrolling = undefined;\n      wasScrolled = undefined;\n      if (e.type === 'touchstart') touchId = e.targetTouches[0].identifier;\n      touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n      touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n    }\n\n    function handleTouchMove(e) {\n      if (!isTouched) return;\n      let pageX;\n      let pageY;\n      let touch;\n\n      if (e.type === 'touchmove') {\n        if (touchId && e.touches) {\n          for (let i = 0; i < e.touches.length; i += 1) {\n            if (e.touches[i].identifier === touchId) {\n              touch = e.touches[i];\n            }\n          }\n        }\n\n        if (!touch) touch = e.targetTouches[0];\n        pageX = touch.pageX;\n        pageY = touch.pageY;\n      } else {\n        pageX = e.pageX;\n        pageY = e.pageY;\n      }\n\n      if (!pageX || !pageY) return;\n\n      if (typeof isScrolling === 'undefined') {\n        isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n      }\n\n      if (!isScrolling) {\n        isTouched = false;\n        return;\n      }\n\n      scrollTop = $el[0].scrollTop;\n\n      if (!isMoved) {\n        $el.removeClass('ptr-transitioning');\n\n        if (isIos) {\n          setPreloaderProgress(0);\n        }\n\n        let targetIsScrollable;\n        scrollHeight = $el[0].scrollHeight;\n        offsetHeight = $el[0].offsetHeight;\n\n        if (ptr.bottom) {\n          maxScrollTop = scrollHeight - offsetHeight;\n        }\n\n        if (scrollTop > scrollHeight) {\n          isTouched = false;\n          return;\n        }\n\n        const $ptrWatchScrollable = $(e.target).closest('.ptr-watch-scroll');\n\n        if ($ptrWatchScrollable.length) {\n          $ptrWatchScrollable.each(ptrScrollableEl => {\n            if (ptrScrollableEl === el) return;\n\n            if (ptrScrollableEl.scrollHeight > ptrScrollableEl.offsetHeight && $(ptrScrollableEl).css('overflow') === 'auto' && (!ptr.bottom && ptrScrollableEl.scrollTop > 0 || ptr.bottom && ptrScrollableEl.scrollTop < ptrScrollableEl.scrollHeight - ptrScrollableEl.offsetHeight)) {\n              targetIsScrollable = true;\n            }\n          });\n        }\n\n        if (targetIsScrollable) {\n          isTouched = false;\n          return;\n        }\n\n        if (dynamicTriggerDistance) {\n          triggerDistance = $el.attr('data-ptr-distance');\n          if (triggerDistance.indexOf('%') >= 0) triggerDistance = scrollHeight * parseInt(triggerDistance, 10) / 100;\n        }\n\n        startTranslate = $el.hasClass('ptr-refreshing') ? triggerDistance : 0;\n\n        if (scrollHeight === offsetHeight || device.os !== 'ios' || isMaterial) {\n          useTranslate = true;\n        } else {\n          useTranslate = false;\n        }\n\n        forceUseTranslate = false;\n      }\n\n      isMoved = true;\n      touchesDiff = pageY - touchesStart.y;\n      if (typeof wasScrolled === 'undefined' && (ptr.bottom ? scrollTop !== maxScrollTop : scrollTop !== 0)) wasScrolled = true;\n      const ptrStarted = ptr.bottom ? touchesDiff < 0 && scrollTop >= maxScrollTop || scrollTop > maxScrollTop : touchesDiff > 0 && scrollTop <= 0 || scrollTop < 0;\n\n      if (ptrStarted) {\n        // iOS 8 fix\n        if (device.os === 'ios' && parseInt(device.osVersion.split('.')[0], 10) > 7) {\n          if (!ptr.bottom && scrollTop === 0 && !wasScrolled) useTranslate = true;\n          if (ptr.bottom && scrollTop === maxScrollTop && !wasScrolled) useTranslate = true;\n        }\n\n        if (!useTranslate && ptr.bottom && !isMaterial) {\n          $el.css('-webkit-overflow-scrolling', 'auto');\n          $el.scrollTop(maxScrollTop);\n          forceUseTranslate = true;\n        }\n\n        if (useTranslate || forceUseTranslate) {\n          if (e.cancelable) {\n            e.preventDefault();\n          }\n\n          translate = (ptr.bottom ? -1 * Math.abs(touchesDiff) ** 0.85 : touchesDiff ** 0.85) + startTranslate;\n\n          if (isMaterial) {\n            $preloaderEl.transform(`translate3d(0,${translate}px,0)`).find('.ptr-arrow').transform(`rotate(${180 * (Math.abs(touchesDiff) / 66) + 100}deg)`);\n          } else {\n            // eslint-disable-next-line\n            if (ptr.bottom || isIos) {\n              $el.children().transform(`translate3d(0,${translate}px,0)`);\n            } else {\n              // eslint-disable-next-line\n              $el.transform(`translate3d(0,${translate}px,0)`);\n            }\n\n            if (isIos) {\n              $preloaderEl.transform(`translate3d(0,0px,0)`);\n            }\n          }\n        } else if (isIos && !ptr.bottom) {\n          $preloaderEl.transform(`translate3d(0,${scrollTop}px,0)`);\n        }\n\n        let progress;\n\n        if (isIos && !refresh) {\n          progress = useTranslate || forceUseTranslate ? Math.abs(touchesDiff) ** 0.85 / triggerDistance : Math.abs(touchesDiff) / (triggerDistance * 2);\n          setPreloaderProgress(progress);\n        }\n\n        if ((useTranslate || forceUseTranslate) && Math.abs(touchesDiff) ** 0.85 > triggerDistance || !useTranslate && Math.abs(touchesDiff) >= triggerDistance * 2) {\n          refresh = true;\n          $el.addClass('ptr-pull-up').removeClass('ptr-pull-down');\n          unsetPreloaderProgress();\n        } else {\n          refresh = false;\n          $el.removeClass('ptr-pull-up').addClass('ptr-pull-down');\n        }\n\n        if (!pullStarted) {\n          $el.trigger('ptr:pullstart');\n          ptr.emit('local::pullStart ptrPullStart', $el[0]);\n          pullStarted = true;\n        }\n\n        $el.trigger('ptr:pullmove', {\n          event: e,\n          scrollTop,\n          translate,\n          touchesDiff\n        });\n        ptr.emit('local::pullMove ptrPullMove', $el[0], {\n          event: e,\n          scrollTop,\n          translate,\n          touchesDiff\n        });\n      } else {\n        pullStarted = false;\n        $el.removeClass('ptr-pull-up ptr-pull-down');\n        refresh = false;\n      }\n    }\n\n    function handleTouchEnd(e) {\n      if (e.type === 'touchend' && e.changedTouches && e.changedTouches.length > 0 && touchId) {\n        if (e.changedTouches[0].identifier !== touchId) {\n          isTouched = false;\n          isScrolling = false;\n          isMoved = false;\n          touchId = null;\n          return;\n        }\n      }\n\n      if (!isTouched || !isMoved) {\n        isTouched = false;\n        isMoved = false;\n        return;\n      }\n\n      if (translate) {\n        $el.addClass('ptr-transitioning');\n        translate = 0;\n      }\n\n      if (isMaterial) {\n        $preloaderEl.transform('').find('.ptr-arrow').transform('');\n      } else {\n        $preloaderEl.transform('');\n\n        if (ptr.bottom || isIos) {\n          $el.children().transform('');\n        } else {\n          $el.transform('');\n        }\n      }\n\n      if (!useTranslate && ptr.bottom && !isMaterial) {\n        $el.css('-webkit-overflow-scrolling', '');\n      }\n\n      if (refresh) {\n        $el.addClass('ptr-refreshing');\n        $el.trigger('ptr:refresh', ptr.done);\n        ptr.emit('local::refresh ptrRefresh', $el[0], ptr.done);\n      } else {\n        $el.removeClass('ptr-pull-down');\n      }\n\n      isTouched = false;\n      isMoved = false;\n\n      if (pullStarted) {\n        $el.trigger('ptr:pullend');\n        ptr.emit('local::pullEnd ptrPullEnd', $el[0]);\n      }\n    }\n\n    let mousewheelTimeout;\n    let mousewheelMoved;\n    let mousewheelAllow = true;\n    let mousewheelTranslate = 0;\n\n    function handleMouseWheelRelease() {\n      mousewheelAllow = true;\n      mousewheelMoved = false;\n      mousewheelTranslate = 0;\n\n      if (translate) {\n        $el.addClass('ptr-transitioning');\n        translate = 0;\n      }\n\n      if (isMaterial) {\n        $preloaderEl.transform('').find('.ptr-arrow').transform('');\n      } else {\n        $preloaderEl.transform('');\n\n        if (ptr.bottom) {\n          $el.children().transform('');\n        } else {\n          $el.transform('');\n        }\n      }\n\n      if (refresh) {\n        $el.addClass('ptr-refreshing');\n        $el.trigger('ptr:refresh', ptr.done);\n        ptr.emit('local::refresh ptrRefresh', $el[0], ptr.done);\n      } else {\n        $el.removeClass('ptr-pull-down');\n      }\n\n      if (pullStarted) {\n        $el.trigger('ptr:pullend');\n        ptr.emit('local::pullEnd ptrPullEnd', $el[0]);\n      }\n    }\n\n    function handleMouseWheel(e) {\n      if (!mousewheelAllow) return;\n      const {\n        deltaX,\n        deltaY\n      } = e;\n      if (Math.abs(deltaX) > Math.abs(deltaY)) return;\n\n      if ($el.hasClass('ptr-refreshing')) {\n        return;\n      }\n\n      if ($(e.target).closest('.sortable-handler, .ptr-ignore, .card-expandable.card-opened').length) return;\n      clearTimeout(mousewheelTimeout);\n      scrollTop = $el[0].scrollTop;\n\n      if (!mousewheelMoved) {\n        $el.removeClass('ptr-transitioning');\n\n        if (isIos) {\n          setPreloaderProgress(0);\n        }\n\n        let targetIsScrollable;\n        scrollHeight = $el[0].scrollHeight;\n        offsetHeight = $el[0].offsetHeight;\n\n        if (ptr.bottom) {\n          maxScrollTop = scrollHeight - offsetHeight;\n        }\n\n        if (scrollTop > scrollHeight) {\n          mousewheelAllow = false;\n          return;\n        }\n\n        const $ptrWatchScrollable = $(e.target).closest('.ptr-watch-scroll');\n\n        if ($ptrWatchScrollable.length) {\n          $ptrWatchScrollable.each(ptrScrollableEl => {\n            if (ptrScrollableEl === el) return;\n\n            if (ptrScrollableEl.scrollHeight > ptrScrollableEl.offsetHeight && $(ptrScrollableEl).css('overflow') === 'auto' && (!ptr.bottom && ptrScrollableEl.scrollTop > 0 || ptr.bottom && ptrScrollableEl.scrollTop < ptrScrollableEl.scrollHeight - ptrScrollableEl.offsetHeight)) {\n              targetIsScrollable = true;\n            }\n          });\n        }\n\n        if (targetIsScrollable) {\n          mousewheelAllow = false;\n          return;\n        }\n\n        if (dynamicTriggerDistance) {\n          triggerDistance = $el.attr('data-ptr-distance');\n          if (triggerDistance.indexOf('%') >= 0) triggerDistance = scrollHeight * parseInt(triggerDistance, 10) / 100;\n        }\n      }\n\n      isMoved = true;\n      mousewheelTranslate -= deltaY;\n      touchesDiff = mousewheelTranslate; // pageY - touchesStart.y;\n\n      if (typeof wasScrolled === 'undefined' && (ptr.bottom ? scrollTop !== maxScrollTop : scrollTop !== 0)) wasScrolled = true;\n      const ptrStarted = ptr.bottom ? touchesDiff < 0 && scrollTop >= maxScrollTop || scrollTop > maxScrollTop : touchesDiff > 0 && scrollTop <= 0 || scrollTop < 0;\n\n      if (ptrStarted) {\n        if (e.cancelable) {\n          e.preventDefault();\n        }\n\n        translate = touchesDiff;\n\n        if (Math.abs(translate) > triggerDistance) {\n          translate = triggerDistance + (Math.abs(translate) - triggerDistance) ** 0.7;\n          if (ptr.bottom) translate = -translate;\n        }\n\n        if (isMaterial) {\n          $preloaderEl.transform(`translate3d(0,${translate}px,0)`).find('.ptr-arrow').transform(`rotate(${180 * (Math.abs(touchesDiff) / 66) + 100}deg)`);\n        } else {\n          // eslint-disable-next-line\n          if (ptr.bottom) {\n            $el.children().transform(`translate3d(0,${translate}px,0)`);\n          } else {\n            $el.transform(`translate3d(0,${translate}px,0)`);\n\n            if (isIos) {\n              $preloaderEl.transform(`translate3d(0,${-translate}px,0)`);\n            }\n          }\n        }\n\n        let progress;\n\n        if (isIos && !refresh) {\n          progress = Math.abs(translate) / triggerDistance;\n          setPreloaderProgress(progress);\n        }\n\n        if (Math.abs(translate) > triggerDistance) {\n          refresh = true;\n          $el.addClass('ptr-pull-up').removeClass('ptr-pull-down');\n          unsetPreloaderProgress();\n        } else {\n          refresh = false;\n          $el.removeClass('ptr-pull-up').addClass('ptr-pull-down');\n        }\n\n        if (!pullStarted) {\n          $el.trigger('ptr:pullstart');\n          ptr.emit('local::pullStart ptrPullStart', $el[0]);\n          pullStarted = true;\n        }\n\n        $el.trigger('ptr:pullmove', {\n          event: e,\n          scrollTop,\n          translate,\n          touchesDiff\n        });\n        ptr.emit('local::pullMove ptrPullMove', $el[0], {\n          event: e,\n          scrollTop,\n          translate,\n          touchesDiff\n        });\n      } else {\n        pullStarted = false;\n        $el.removeClass('ptr-pull-up ptr-pull-down');\n        refresh = false;\n      }\n\n      mousewheelTimeout = setTimeout(handleMouseWheelRelease, 300);\n    }\n\n    if (!$pageEl.length || !$el.length) return ptr;\n    $el[0].f7PullToRefresh = ptr; // Events\n\n    ptr.attachEvents = function attachEvents() {\n      const passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      $el.on(app.touchEvents.start, handleTouchStart, passive);\n      app.on('touchmove:active', handleTouchMove);\n      app.on('touchend:passive', handleTouchEnd);\n\n      if (ptr.mousewheel && !ptr.bottom) {\n        $el.on('wheel', handleMouseWheel);\n      }\n    };\n\n    ptr.detachEvents = function detachEvents() {\n      const passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      $el.off(app.touchEvents.start, handleTouchStart, passive);\n      app.off('touchmove:active', handleTouchMove);\n      app.off('touchend:passive', handleTouchEnd);\n\n      if (ptr.mousewheel && !ptr.bottom) {\n        $el.off('wheel', handleMouseWheel);\n      }\n    }; // Install Modules\n\n\n    ptr.useModules(); // Init\n\n    ptr.init();\n    return ptr;\n  }\n\n  init() {\n    const ptr = this;\n    ptr.attachEvents();\n  }\n\n  destroy() {\n    let ptr = this;\n    ptr.emit('local::beforeDestroy ptrBeforeDestroy', ptr);\n    ptr.$el.trigger('ptr:beforedestroy');\n    delete ptr.el.f7PullToRefresh;\n    ptr.detachEvents();\n    deleteProps(ptr);\n    ptr = null;\n  }\n\n}\n\nexport default PullToRefresh;","map":{"version":3,"names":["$","deleteProps","Framework7Class","getSupport","getDevice","PullToRefresh","constructor","app","el","ptr","device","support","$el","$preloaderEl","find","bottom","hasClass","useModulesParams","isMaterial","theme","isIos","isAurora","done","$transitionTarget","onTranstionEnd","e","target","closest","length","removeClass","trigger","emit","off","on","addClass","refresh","mousewheel","attr","touchId","isTouched","isMoved","touchesStart","isScrolling","touchesDiff","useTranslate","forceUseTranslate","startTranslate","translate","scrollTop","wasScrolled","triggerDistance","dynamicTriggerDistance","pullStarted","hasNavbar","scrollHeight","offsetHeight","maxScrollTop","$pageEl","parents","children","pageNavbarEl","navbar","getElByPage","$pageNavbarEl","isLargeTransparent","isTransparent","setPreloaderProgress","progress","$bars","perBarProgress","forEach","barEl","barIndex","barProgress","style","opacity","Math","max","min","unsetPreloaderProgress","css","handleTouchStart","os","targetTouches","undefined","type","identifier","x","pageX","y","pageY","handleTouchMove","touch","touches","i","abs","targetIsScrollable","$ptrWatchScrollable","each","ptrScrollableEl","indexOf","parseInt","ptrStarted","osVersion","split","cancelable","preventDefault","transform","event","handleTouchEnd","changedTouches","mousewheelTimeout","mousewheelMoved","mousewheelAllow","mousewheelTranslate","handleMouseWheelRelease","handleMouseWheel","deltaX","deltaY","clearTimeout","setTimeout","f7PullToRefresh","attachEvents","passive","passiveListener","touchEvents","start","detachEvents","useModules","init","destroy"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/components/pull-to-refresh/pull-to-refresh-class.js"],"sourcesContent":["import $ from '../../shared/dom7.js';\nimport { deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\nimport { getSupport } from '../../shared/get-support.js';\nimport { getDevice } from '../../shared/get-device.js';\n\nclass PullToRefresh extends Framework7Class {\n  constructor(app, el) {\n    super({}, [app]);\n    const ptr = this;\n    const device = getDevice();\n    const support = getSupport();\n    const $el = $(el);\n    const $preloaderEl = $el.find('.ptr-preloader');\n    ptr.$el = $el;\n    ptr.el = $el[0];\n    ptr.app = app;\n    ptr.bottom = ptr.$el.hasClass('ptr-bottom'); // Extend defaults with modules params\n\n    ptr.useModulesParams({});\n    const isMaterial = app.theme === 'md';\n    const isIos = app.theme === 'ios';\n    const isAurora = app.theme === 'aurora'; // Done\n\n    ptr.done = function done() {\n      const $transitionTarget = isMaterial ? $preloaderEl : $el;\n\n      const onTranstionEnd = e => {\n        if ($(e.target).closest($preloaderEl).length) return;\n        $el.removeClass('ptr-transitioning ptr-pull-up ptr-pull-down ptr-closing');\n        $el.trigger('ptr:done');\n        ptr.emit('local::done ptrDone', $el[0]);\n        $transitionTarget.off('transitionend', onTranstionEnd);\n      };\n\n      $transitionTarget.on('transitionend', onTranstionEnd);\n      $el.removeClass('ptr-refreshing').addClass('ptr-transitioning ptr-closing');\n      return ptr;\n    };\n\n    ptr.refresh = function refresh() {\n      if ($el.hasClass('ptr-refreshing')) return ptr;\n      $el.addClass('ptr-transitioning ptr-refreshing');\n      $el.trigger('ptr:refresh', ptr.done);\n      ptr.emit('local::refresh ptrRefresh', $el[0], ptr.done);\n      return ptr;\n    }; // Mousewheel\n\n\n    ptr.mousewheel = $el.attr('data-ptr-mousewheel') === 'true'; // Events handling\n\n    let touchId;\n    let isTouched;\n    let isMoved;\n    const touchesStart = {};\n    let isScrolling;\n    let touchesDiff;\n    let refresh = false;\n    let useTranslate = false;\n    let forceUseTranslate = false;\n    let startTranslate = 0;\n    let translate;\n    let scrollTop;\n    let wasScrolled;\n    let triggerDistance;\n    let dynamicTriggerDistance;\n    let pullStarted;\n    let hasNavbar = false;\n    let scrollHeight;\n    let offsetHeight;\n    let maxScrollTop;\n    const $pageEl = $el.parents('.page');\n    if ($pageEl.find('.navbar').length > 0 || $pageEl.parents('.view').children('.navbars').length > 0) hasNavbar = true;\n    if ($pageEl.hasClass('no-navbar')) hasNavbar = false;\n\n    if (!ptr.bottom) {\n      const pageNavbarEl = app.navbar.getElByPage($pageEl[0]);\n\n      if (pageNavbarEl) {\n        const $pageNavbarEl = $(pageNavbarEl);\n        const isLargeTransparent = $pageNavbarEl.hasClass('navbar-large-transparent') || $pageNavbarEl.hasClass('navbar-large') && $pageNavbarEl.hasClass('navbar-transparent');\n        const isTransparent = $pageNavbarEl.hasClass('navbar-transparent') && !$pageNavbarEl.hasClass('navbar-large');\n\n        if (isLargeTransparent) {\n          $el.addClass('ptr-with-navbar-large-transparent');\n        } else if (isTransparent) {\n          $el.addClass('ptr-with-navbar-transparent');\n        }\n      }\n    }\n\n    if (!hasNavbar && !ptr.bottom) $el.addClass('ptr-no-navbar'); // Define trigger distance\n\n    if ($el.attr('data-ptr-distance')) {\n      dynamicTriggerDistance = true;\n    } else if (isMaterial) {\n      triggerDistance = 66;\n    } else if (isIos) {\n      triggerDistance = 44;\n    } else if (isAurora) {\n      triggerDistance = 38;\n    }\n\n    function setPreloaderProgress(progress) {\n      if (progress === void 0) {\n        progress = 0;\n      }\n\n      const $bars = $preloaderEl.find('.preloader-inner-line');\n      const perBarProgress = 1 / $bars.length;\n      $bars.forEach((barEl, barIndex) => {\n        const barProgress = (progress - barIndex * perBarProgress) / perBarProgress;\n        barEl.style.opacity = Math.max(Math.min(barProgress, 1), 0) * 0.27;\n      });\n    }\n\n    function unsetPreloaderProgress() {\n      $preloaderEl.find('.preloader-inner-line').css('opacity', '');\n    }\n\n    function handleTouchStart(e) {\n      if (isTouched) {\n        if (device.os === 'android') {\n          if ('targetTouches' in e && e.targetTouches.length > 1) return;\n        } else return;\n      }\n\n      if ($el.hasClass('ptr-refreshing')) {\n        return;\n      }\n\n      if ($(e.target).closest('.sortable-handler, .ptr-ignore, .card-expandable.card-opened').length) return;\n      isMoved = false;\n      pullStarted = false;\n      isTouched = true;\n      isScrolling = undefined;\n      wasScrolled = undefined;\n      if (e.type === 'touchstart') touchId = e.targetTouches[0].identifier;\n      touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n      touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n    }\n\n    function handleTouchMove(e) {\n      if (!isTouched) return;\n      let pageX;\n      let pageY;\n      let touch;\n\n      if (e.type === 'touchmove') {\n        if (touchId && e.touches) {\n          for (let i = 0; i < e.touches.length; i += 1) {\n            if (e.touches[i].identifier === touchId) {\n              touch = e.touches[i];\n            }\n          }\n        }\n\n        if (!touch) touch = e.targetTouches[0];\n        pageX = touch.pageX;\n        pageY = touch.pageY;\n      } else {\n        pageX = e.pageX;\n        pageY = e.pageY;\n      }\n\n      if (!pageX || !pageY) return;\n\n      if (typeof isScrolling === 'undefined') {\n        isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n      }\n\n      if (!isScrolling) {\n        isTouched = false;\n        return;\n      }\n\n      scrollTop = $el[0].scrollTop;\n\n      if (!isMoved) {\n        $el.removeClass('ptr-transitioning');\n\n        if (isIos) {\n          setPreloaderProgress(0);\n        }\n\n        let targetIsScrollable;\n        scrollHeight = $el[0].scrollHeight;\n        offsetHeight = $el[0].offsetHeight;\n\n        if (ptr.bottom) {\n          maxScrollTop = scrollHeight - offsetHeight;\n        }\n\n        if (scrollTop > scrollHeight) {\n          isTouched = false;\n          return;\n        }\n\n        const $ptrWatchScrollable = $(e.target).closest('.ptr-watch-scroll');\n\n        if ($ptrWatchScrollable.length) {\n          $ptrWatchScrollable.each(ptrScrollableEl => {\n            if (ptrScrollableEl === el) return;\n\n            if (ptrScrollableEl.scrollHeight > ptrScrollableEl.offsetHeight && $(ptrScrollableEl).css('overflow') === 'auto' && (!ptr.bottom && ptrScrollableEl.scrollTop > 0 || ptr.bottom && ptrScrollableEl.scrollTop < ptrScrollableEl.scrollHeight - ptrScrollableEl.offsetHeight)) {\n              targetIsScrollable = true;\n            }\n          });\n        }\n\n        if (targetIsScrollable) {\n          isTouched = false;\n          return;\n        }\n\n        if (dynamicTriggerDistance) {\n          triggerDistance = $el.attr('data-ptr-distance');\n          if (triggerDistance.indexOf('%') >= 0) triggerDistance = scrollHeight * parseInt(triggerDistance, 10) / 100;\n        }\n\n        startTranslate = $el.hasClass('ptr-refreshing') ? triggerDistance : 0;\n\n        if (scrollHeight === offsetHeight || device.os !== 'ios' || isMaterial) {\n          useTranslate = true;\n        } else {\n          useTranslate = false;\n        }\n\n        forceUseTranslate = false;\n      }\n\n      isMoved = true;\n      touchesDiff = pageY - touchesStart.y;\n      if (typeof wasScrolled === 'undefined' && (ptr.bottom ? scrollTop !== maxScrollTop : scrollTop !== 0)) wasScrolled = true;\n      const ptrStarted = ptr.bottom ? touchesDiff < 0 && scrollTop >= maxScrollTop || scrollTop > maxScrollTop : touchesDiff > 0 && scrollTop <= 0 || scrollTop < 0;\n\n      if (ptrStarted) {\n        // iOS 8 fix\n        if (device.os === 'ios' && parseInt(device.osVersion.split('.')[0], 10) > 7) {\n          if (!ptr.bottom && scrollTop === 0 && !wasScrolled) useTranslate = true;\n          if (ptr.bottom && scrollTop === maxScrollTop && !wasScrolled) useTranslate = true;\n        }\n\n        if (!useTranslate && ptr.bottom && !isMaterial) {\n          $el.css('-webkit-overflow-scrolling', 'auto');\n          $el.scrollTop(maxScrollTop);\n          forceUseTranslate = true;\n        }\n\n        if (useTranslate || forceUseTranslate) {\n          if (e.cancelable) {\n            e.preventDefault();\n          }\n\n          translate = (ptr.bottom ? -1 * Math.abs(touchesDiff) ** 0.85 : touchesDiff ** 0.85) + startTranslate;\n\n          if (isMaterial) {\n            $preloaderEl.transform(`translate3d(0,${translate}px,0)`).find('.ptr-arrow').transform(`rotate(${180 * (Math.abs(touchesDiff) / 66) + 100}deg)`);\n          } else {\n            // eslint-disable-next-line\n            if (ptr.bottom || isIos) {\n              $el.children().transform(`translate3d(0,${translate}px,0)`);\n            } else {\n              // eslint-disable-next-line\n              $el.transform(`translate3d(0,${translate}px,0)`);\n            }\n\n            if (isIos) {\n              $preloaderEl.transform(`translate3d(0,0px,0)`);\n            }\n          }\n        } else if (isIos && !ptr.bottom) {\n          $preloaderEl.transform(`translate3d(0,${scrollTop}px,0)`);\n        }\n\n        let progress;\n\n        if (isIos && !refresh) {\n          progress = useTranslate || forceUseTranslate ? Math.abs(touchesDiff) ** 0.85 / triggerDistance : Math.abs(touchesDiff) / (triggerDistance * 2);\n          setPreloaderProgress(progress);\n        }\n\n        if ((useTranslate || forceUseTranslate) && Math.abs(touchesDiff) ** 0.85 > triggerDistance || !useTranslate && Math.abs(touchesDiff) >= triggerDistance * 2) {\n          refresh = true;\n          $el.addClass('ptr-pull-up').removeClass('ptr-pull-down');\n          unsetPreloaderProgress();\n        } else {\n          refresh = false;\n          $el.removeClass('ptr-pull-up').addClass('ptr-pull-down');\n        }\n\n        if (!pullStarted) {\n          $el.trigger('ptr:pullstart');\n          ptr.emit('local::pullStart ptrPullStart', $el[0]);\n          pullStarted = true;\n        }\n\n        $el.trigger('ptr:pullmove', {\n          event: e,\n          scrollTop,\n          translate,\n          touchesDiff\n        });\n        ptr.emit('local::pullMove ptrPullMove', $el[0], {\n          event: e,\n          scrollTop,\n          translate,\n          touchesDiff\n        });\n      } else {\n        pullStarted = false;\n        $el.removeClass('ptr-pull-up ptr-pull-down');\n        refresh = false;\n      }\n    }\n\n    function handleTouchEnd(e) {\n      if (e.type === 'touchend' && e.changedTouches && e.changedTouches.length > 0 && touchId) {\n        if (e.changedTouches[0].identifier !== touchId) {\n          isTouched = false;\n          isScrolling = false;\n          isMoved = false;\n          touchId = null;\n          return;\n        }\n      }\n\n      if (!isTouched || !isMoved) {\n        isTouched = false;\n        isMoved = false;\n        return;\n      }\n\n      if (translate) {\n        $el.addClass('ptr-transitioning');\n        translate = 0;\n      }\n\n      if (isMaterial) {\n        $preloaderEl.transform('').find('.ptr-arrow').transform('');\n      } else {\n        $preloaderEl.transform('');\n\n        if (ptr.bottom || isIos) {\n          $el.children().transform('');\n        } else {\n          $el.transform('');\n        }\n      }\n\n      if (!useTranslate && ptr.bottom && !isMaterial) {\n        $el.css('-webkit-overflow-scrolling', '');\n      }\n\n      if (refresh) {\n        $el.addClass('ptr-refreshing');\n        $el.trigger('ptr:refresh', ptr.done);\n        ptr.emit('local::refresh ptrRefresh', $el[0], ptr.done);\n      } else {\n        $el.removeClass('ptr-pull-down');\n      }\n\n      isTouched = false;\n      isMoved = false;\n\n      if (pullStarted) {\n        $el.trigger('ptr:pullend');\n        ptr.emit('local::pullEnd ptrPullEnd', $el[0]);\n      }\n    }\n\n    let mousewheelTimeout;\n    let mousewheelMoved;\n    let mousewheelAllow = true;\n    let mousewheelTranslate = 0;\n\n    function handleMouseWheelRelease() {\n      mousewheelAllow = true;\n      mousewheelMoved = false;\n      mousewheelTranslate = 0;\n\n      if (translate) {\n        $el.addClass('ptr-transitioning');\n        translate = 0;\n      }\n\n      if (isMaterial) {\n        $preloaderEl.transform('').find('.ptr-arrow').transform('');\n      } else {\n        $preloaderEl.transform('');\n\n        if (ptr.bottom) {\n          $el.children().transform('');\n        } else {\n          $el.transform('');\n        }\n      }\n\n      if (refresh) {\n        $el.addClass('ptr-refreshing');\n        $el.trigger('ptr:refresh', ptr.done);\n        ptr.emit('local::refresh ptrRefresh', $el[0], ptr.done);\n      } else {\n        $el.removeClass('ptr-pull-down');\n      }\n\n      if (pullStarted) {\n        $el.trigger('ptr:pullend');\n        ptr.emit('local::pullEnd ptrPullEnd', $el[0]);\n      }\n    }\n\n    function handleMouseWheel(e) {\n      if (!mousewheelAllow) return;\n      const {\n        deltaX,\n        deltaY\n      } = e;\n      if (Math.abs(deltaX) > Math.abs(deltaY)) return;\n\n      if ($el.hasClass('ptr-refreshing')) {\n        return;\n      }\n\n      if ($(e.target).closest('.sortable-handler, .ptr-ignore, .card-expandable.card-opened').length) return;\n      clearTimeout(mousewheelTimeout);\n      scrollTop = $el[0].scrollTop;\n\n      if (!mousewheelMoved) {\n        $el.removeClass('ptr-transitioning');\n\n        if (isIos) {\n          setPreloaderProgress(0);\n        }\n\n        let targetIsScrollable;\n        scrollHeight = $el[0].scrollHeight;\n        offsetHeight = $el[0].offsetHeight;\n\n        if (ptr.bottom) {\n          maxScrollTop = scrollHeight - offsetHeight;\n        }\n\n        if (scrollTop > scrollHeight) {\n          mousewheelAllow = false;\n          return;\n        }\n\n        const $ptrWatchScrollable = $(e.target).closest('.ptr-watch-scroll');\n\n        if ($ptrWatchScrollable.length) {\n          $ptrWatchScrollable.each(ptrScrollableEl => {\n            if (ptrScrollableEl === el) return;\n\n            if (ptrScrollableEl.scrollHeight > ptrScrollableEl.offsetHeight && $(ptrScrollableEl).css('overflow') === 'auto' && (!ptr.bottom && ptrScrollableEl.scrollTop > 0 || ptr.bottom && ptrScrollableEl.scrollTop < ptrScrollableEl.scrollHeight - ptrScrollableEl.offsetHeight)) {\n              targetIsScrollable = true;\n            }\n          });\n        }\n\n        if (targetIsScrollable) {\n          mousewheelAllow = false;\n          return;\n        }\n\n        if (dynamicTriggerDistance) {\n          triggerDistance = $el.attr('data-ptr-distance');\n          if (triggerDistance.indexOf('%') >= 0) triggerDistance = scrollHeight * parseInt(triggerDistance, 10) / 100;\n        }\n      }\n\n      isMoved = true;\n      mousewheelTranslate -= deltaY;\n      touchesDiff = mousewheelTranslate; // pageY - touchesStart.y;\n\n      if (typeof wasScrolled === 'undefined' && (ptr.bottom ? scrollTop !== maxScrollTop : scrollTop !== 0)) wasScrolled = true;\n      const ptrStarted = ptr.bottom ? touchesDiff < 0 && scrollTop >= maxScrollTop || scrollTop > maxScrollTop : touchesDiff > 0 && scrollTop <= 0 || scrollTop < 0;\n\n      if (ptrStarted) {\n        if (e.cancelable) {\n          e.preventDefault();\n        }\n\n        translate = touchesDiff;\n\n        if (Math.abs(translate) > triggerDistance) {\n          translate = triggerDistance + (Math.abs(translate) - triggerDistance) ** 0.7;\n          if (ptr.bottom) translate = -translate;\n        }\n\n        if (isMaterial) {\n          $preloaderEl.transform(`translate3d(0,${translate}px,0)`).find('.ptr-arrow').transform(`rotate(${180 * (Math.abs(touchesDiff) / 66) + 100}deg)`);\n        } else {\n          // eslint-disable-next-line\n          if (ptr.bottom) {\n            $el.children().transform(`translate3d(0,${translate}px,0)`);\n          } else {\n            $el.transform(`translate3d(0,${translate}px,0)`);\n\n            if (isIos) {\n              $preloaderEl.transform(`translate3d(0,${-translate}px,0)`);\n            }\n          }\n        }\n\n        let progress;\n\n        if (isIos && !refresh) {\n          progress = Math.abs(translate) / triggerDistance;\n          setPreloaderProgress(progress);\n        }\n\n        if (Math.abs(translate) > triggerDistance) {\n          refresh = true;\n          $el.addClass('ptr-pull-up').removeClass('ptr-pull-down');\n          unsetPreloaderProgress();\n        } else {\n          refresh = false;\n          $el.removeClass('ptr-pull-up').addClass('ptr-pull-down');\n        }\n\n        if (!pullStarted) {\n          $el.trigger('ptr:pullstart');\n          ptr.emit('local::pullStart ptrPullStart', $el[0]);\n          pullStarted = true;\n        }\n\n        $el.trigger('ptr:pullmove', {\n          event: e,\n          scrollTop,\n          translate,\n          touchesDiff\n        });\n        ptr.emit('local::pullMove ptrPullMove', $el[0], {\n          event: e,\n          scrollTop,\n          translate,\n          touchesDiff\n        });\n      } else {\n        pullStarted = false;\n        $el.removeClass('ptr-pull-up ptr-pull-down');\n        refresh = false;\n      }\n\n      mousewheelTimeout = setTimeout(handleMouseWheelRelease, 300);\n    }\n\n    if (!$pageEl.length || !$el.length) return ptr;\n    $el[0].f7PullToRefresh = ptr; // Events\n\n    ptr.attachEvents = function attachEvents() {\n      const passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      $el.on(app.touchEvents.start, handleTouchStart, passive);\n      app.on('touchmove:active', handleTouchMove);\n      app.on('touchend:passive', handleTouchEnd);\n\n      if (ptr.mousewheel && !ptr.bottom) {\n        $el.on('wheel', handleMouseWheel);\n      }\n    };\n\n    ptr.detachEvents = function detachEvents() {\n      const passive = support.passiveListener ? {\n        passive: true\n      } : false;\n      $el.off(app.touchEvents.start, handleTouchStart, passive);\n      app.off('touchmove:active', handleTouchMove);\n      app.off('touchend:passive', handleTouchEnd);\n\n      if (ptr.mousewheel && !ptr.bottom) {\n        $el.off('wheel', handleMouseWheel);\n      }\n    }; // Install Modules\n\n\n    ptr.useModules(); // Init\n\n    ptr.init();\n    return ptr;\n  }\n\n  init() {\n    const ptr = this;\n    ptr.attachEvents();\n  }\n\n  destroy() {\n    let ptr = this;\n    ptr.emit('local::beforeDestroy ptrBeforeDestroy', ptr);\n    ptr.$el.trigger('ptr:beforedestroy');\n    delete ptr.el.f7PullToRefresh;\n    ptr.detachEvents();\n    deleteProps(ptr);\n    ptr = null;\n  }\n\n}\n\nexport default PullToRefresh;"],"mappings":"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"},"metadata":{},"sourceType":"module"}