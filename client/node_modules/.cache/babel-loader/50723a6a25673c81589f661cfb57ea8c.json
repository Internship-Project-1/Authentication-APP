{"ast":null,"code":"import { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7.js';\nimport { extend, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\nimport { getDevice } from '../../shared/get-device.js';\n\nclass VirtualList extends Framework7Class {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const vl = this;\n    const device = getDevice();\n    const document = getDocument();\n    let defaultHeight;\n\n    if (app.theme === 'md') {\n      defaultHeight = 48;\n    } else if (app.theme === 'ios') {\n      defaultHeight = 44;\n    } else if (app.theme === 'aurora') {\n      defaultHeight = 38;\n    }\n\n    const defaults = {\n      cols: 1,\n      height: defaultHeight,\n      cache: true,\n      dynamicHeightBufferSize: 1,\n      showFilteredItemsOnly: false,\n      renderExternal: undefined,\n      setListHeight: true,\n      searchByItem: undefined,\n      searchAll: undefined,\n      ul: null,\n      createUl: true,\n      scrollableParentEl: undefined,\n\n      renderItem(item) {\n        return `\n          <li>\n            <div class=\"item-content\">\n              <div class=\"item-inner\">\n                <div class=\"item-title\">${item}</div>\n              </div>\n            </div>\n          </li>\n        `.trim();\n      },\n\n      on: {}\n    }; // Extend defaults with modules params\n\n    vl.useModulesParams(defaults);\n    vl.params = extend(defaults, params);\n\n    if (vl.params.height === undefined || !vl.params.height) {\n      vl.params.height = defaultHeight;\n    }\n\n    vl.$el = $(params.el);\n    vl.el = vl.$el[0];\n    if (vl.$el.length === 0) return undefined;\n    vl.$el[0].f7VirtualList = vl;\n    vl.items = vl.params.items;\n\n    if (vl.params.showFilteredItemsOnly) {\n      vl.filteredItems = [];\n    }\n\n    if (vl.params.renderItem) {\n      vl.renderItem = vl.params.renderItem;\n    }\n\n    vl.$pageContentEl = vl.$el.parents('.page-content');\n    vl.pageContentEl = vl.$pageContentEl[0];\n    vl.$scrollableParentEl = vl.params.scrollableParentEl ? $(vl.params.scrollableParentEl).eq(0) : vl.$pageContentEl;\n\n    if (!vl.$scrollableParentEl.length && vl.$pageContentEl.length) {\n      vl.$scrollableParentEl = vl.$pageContentEl;\n    }\n\n    vl.scrollableParentEl = vl.$scrollableParentEl[0]; // Bad scroll\n\n    if (typeof vl.params.updatableScroll !== 'undefined') {\n      vl.updatableScroll = vl.params.updatableScroll;\n    } else {\n      vl.updatableScroll = true;\n\n      if (device.ios && device.osVersion.split('.')[0] < 8) {\n        vl.updatableScroll = false;\n      }\n    } // Append <ul>\n\n\n    const ul = vl.params.ul;\n    vl.$ul = ul ? $(vl.params.ul) : vl.$el.children('ul');\n\n    if (vl.$ul.length === 0 && vl.params.createUl) {\n      vl.$el.append('<ul></ul>');\n      vl.$ul = vl.$el.children('ul');\n    }\n\n    vl.ul = vl.$ul[0];\n    let $itemsWrapEl;\n    if (!vl.ul && !vl.params.createUl) $itemsWrapEl = vl.$el;else $itemsWrapEl = vl.$ul;\n    extend(vl, {\n      $itemsWrapEl,\n      itemsWrapEl: $itemsWrapEl[0],\n      // DOM cached items\n      domCache: {},\n      displayDomCache: {},\n      // Temporary DOM Element\n      tempDomElement: document.createElement('ul'),\n      // Last repain position\n      lastRepaintY: null,\n      // Fragment\n      fragment: document.createDocumentFragment(),\n      // Props\n      pageHeight: undefined,\n      rowsPerScreen: undefined,\n      rowsBefore: undefined,\n      rowsAfter: undefined,\n      rowsToRender: undefined,\n      maxBufferHeight: 0,\n      listHeight: undefined,\n      dynamicHeight: typeof vl.params.height === 'function',\n      autoHeight: vl.params.height === 'auto'\n    }); // Install Modules\n\n    vl.useModules(); // Attach events\n\n    const handleScrollBound = vl.handleScroll.bind(vl);\n    const handleResizeBound = vl.handleResize.bind(vl);\n    let $pageEl;\n    let $tabEl;\n    let $panelEl;\n    let $popupEl;\n\n    vl.attachEvents = function attachEvents() {\n      $pageEl = vl.$el.parents('.page').eq(0);\n      $tabEl = vl.$el.parents('.tab').filter(tabEl => {\n        return $(tabEl).parent('.tabs').parent('.tabs-animated-wrap, .tabs-swipeable-wrap').length === 0;\n      }).eq(0);\n      $panelEl = vl.$el.parents('.panel').eq(0);\n      $popupEl = vl.$el.parents('.popup').eq(0);\n      vl.$scrollableParentEl.on('scroll', handleScrollBound);\n      if ($pageEl.length) $pageEl.on('page:reinit', handleResizeBound);\n      if ($tabEl.length) $tabEl.on('tab:show', handleResizeBound);\n      if ($panelEl.length) $panelEl.on('panel:open', handleResizeBound);\n      if ($popupEl.length) $popupEl.on('popup:open', handleResizeBound);\n      app.on('resize', handleResizeBound);\n    };\n\n    vl.detachEvents = function attachEvents() {\n      vl.$scrollableParentEl.off('scroll', handleScrollBound);\n      if ($pageEl.length) $pageEl.off('page:reinit', handleResizeBound);\n      if ($tabEl.length) $tabEl.off('tab:show', handleResizeBound);\n      if ($panelEl.length) $panelEl.off('panel:open', handleResizeBound);\n      if ($popupEl.length) $popupEl.off('popup:open', handleResizeBound);\n      app.off('resize', handleResizeBound);\n    }; // Init\n\n\n    vl.init();\n    return vl;\n  }\n\n  setListSize(autoHeightRerender) {\n    const vl = this;\n    const items = vl.filteredItems || vl.items;\n\n    if (!autoHeightRerender) {\n      vl.pageHeight = vl.$scrollableParentEl[0].offsetHeight;\n    }\n\n    if (vl.dynamicHeight) {\n      vl.listHeight = 0;\n      vl.heights = [];\n\n      for (let i = 0; i < items.length; i += 1) {\n        const itemHeight = vl.params.height(items[i]);\n        vl.listHeight += itemHeight;\n        vl.heights.push(itemHeight);\n      }\n    } else if (vl.autoHeight) {\n      vl.listHeight = 0;\n      if (!vl.heights) vl.heights = [];\n      if (!vl.heightsCalculated) vl.heightsCalculated = [];\n      const renderedItems = {};\n      vl.$itemsWrapEl.find(`[data-virtual-list-index]`).forEach(el => {\n        renderedItems[parseInt(el.getAttribute('data-virtual-list-index'), 10)] = el;\n      });\n\n      for (let i = 0; i < items.length; i += 1) {\n        const renderedItem = renderedItems[i];\n\n        if (renderedItem) {\n          if (!vl.heightsCalculated.includes(i)) {\n            vl.heights[i] = renderedItem.offsetHeight;\n            vl.heightsCalculated.push(i);\n          }\n        }\n\n        if (typeof vl.heights[i] === 'undefined') {\n          vl.heights[i] = 40;\n        }\n\n        vl.listHeight += vl.heights[i];\n      }\n    } else {\n      vl.listHeight = Math.ceil(items.length / vl.params.cols) * vl.params.height;\n      vl.rowsPerScreen = Math.ceil(vl.pageHeight / vl.params.height);\n      vl.rowsBefore = vl.params.rowsBefore || vl.rowsPerScreen * 2;\n      vl.rowsAfter = vl.params.rowsAfter || vl.rowsPerScreen;\n      vl.rowsToRender = vl.rowsPerScreen + vl.rowsBefore + vl.rowsAfter;\n      vl.maxBufferHeight = vl.rowsBefore / 2 * vl.params.height;\n    }\n\n    if (vl.updatableScroll || vl.params.setListHeight) {\n      vl.$itemsWrapEl.css({\n        height: `${vl.listHeight}px`\n      });\n    }\n  }\n\n  render(force, forceScrollTop) {\n    const vl = this;\n    if (force) vl.lastRepaintY = null;\n    let scrollTop = -(vl.$el[0].getBoundingClientRect().top - vl.$scrollableParentEl[0].getBoundingClientRect().top);\n    if (typeof forceScrollTop !== 'undefined') scrollTop = forceScrollTop;\n\n    if (vl.lastRepaintY === null || Math.abs(scrollTop - vl.lastRepaintY) > vl.maxBufferHeight || !vl.updatableScroll && vl.$scrollableParentEl[0].scrollTop + vl.pageHeight >= vl.$scrollableParentEl[0].scrollHeight) {\n      vl.lastRepaintY = scrollTop;\n    } else {\n      return;\n    }\n\n    const items = vl.filteredItems || vl.items;\n    let fromIndex;\n    let toIndex;\n    let heightBeforeFirstItem = 0;\n    let heightBeforeLastItem = 0;\n\n    if (vl.dynamicHeight || vl.autoHeight) {\n      let itemTop = 0;\n      let itemHeight;\n      vl.maxBufferHeight = vl.pageHeight;\n\n      for (let j = 0; j < vl.heights.length; j += 1) {\n        itemHeight = vl.heights[j];\n\n        if (typeof fromIndex === 'undefined') {\n          if (itemTop + itemHeight >= scrollTop - vl.pageHeight * 2 * vl.params.dynamicHeightBufferSize) fromIndex = j;else heightBeforeFirstItem += itemHeight;\n        }\n\n        if (typeof toIndex === 'undefined') {\n          if (itemTop + itemHeight >= scrollTop + vl.pageHeight * 2 * vl.params.dynamicHeightBufferSize || j === vl.heights.length - 1) toIndex = j + 1;\n          heightBeforeLastItem += itemHeight;\n        }\n\n        itemTop += itemHeight;\n      }\n\n      toIndex = Math.min(toIndex, items.length);\n    } else {\n      fromIndex = (parseInt(scrollTop / vl.params.height, 10) - vl.rowsBefore) * vl.params.cols;\n\n      if (fromIndex < 0) {\n        fromIndex = 0;\n      }\n\n      toIndex = Math.min(fromIndex + vl.rowsToRender * vl.params.cols, items.length);\n    }\n\n    let topPosition;\n    const renderExternalItems = [];\n    vl.reachEnd = false;\n    let i;\n\n    for (i = fromIndex; i < toIndex; i += 1) {\n      let itemEl; // Define real item index\n\n      const index = vl.items.indexOf(items[i]);\n      if (i === fromIndex) vl.currentFromIndex = index;\n      if (i === toIndex - 1) vl.currentToIndex = index;\n\n      if (vl.filteredItems) {\n        if (vl.items[index] === vl.filteredItems[vl.filteredItems.length - 1]) vl.reachEnd = true;\n      } else if (index === vl.items.length - 1) vl.reachEnd = true; // Find items\n\n\n      if (vl.params.renderExternal) {\n        renderExternalItems.push(items[i]);\n      } else if (vl.domCache[index]) {\n        itemEl = vl.domCache[index];\n        itemEl.f7VirtualListIndex = index;\n      } else {\n        if (vl.renderItem) {\n          vl.tempDomElement.innerHTML = vl.renderItem(items[i], index).trim();\n        } else {\n          vl.tempDomElement.innerHTML = items[i].toString().trim();\n        }\n\n        itemEl = vl.tempDomElement.childNodes[0];\n        if (vl.params.cache) vl.domCache[index] = itemEl;\n        itemEl.f7VirtualListIndex = index;\n      } // Set item top position\n\n\n      if (i === fromIndex) {\n        if (vl.dynamicHeight || vl.autoHeight) {\n          topPosition = heightBeforeFirstItem;\n        } else {\n          topPosition = i * vl.params.height / vl.params.cols;\n        }\n      }\n\n      if (!vl.params.renderExternal) {\n        itemEl.style.top = `${topPosition}px`; // Before item insert\n\n        vl.emit('local::itemBeforeInsert vlItemBeforeInsert', vl, itemEl, items[i]); // Append item to fragment\n\n        vl.fragment.appendChild(itemEl);\n      }\n    } // Update list height with not updatable scroll\n\n\n    if (!vl.updatableScroll) {\n      if (vl.dynamicHeight || vl.autoHeight) {\n        vl.itemsWrapEl.style.height = `${heightBeforeLastItem}px`;\n      } else {\n        vl.itemsWrapEl.style.height = `${i * vl.params.height / vl.params.cols}px`;\n      }\n    } // Update list html\n\n\n    if (vl.params.renderExternal) {\n      if (items && items.length === 0) {\n        vl.reachEnd = true;\n      }\n    } else {\n      vl.emit('local::beforeClear vlBeforeClear', vl, vl.fragment);\n      vl.itemsWrapEl.innerHTML = '';\n      vl.emit('local::itemsBeforeInsert vlItemsBeforeInsert', vl, vl.fragment);\n\n      if (items && items.length === 0) {\n        vl.reachEnd = true;\n        if (vl.params.emptyTemplate) vl.itemsWrapEl.innerHTML = vl.params.emptyTemplate;\n      } else {\n        vl.itemsWrapEl.appendChild(vl.fragment);\n      }\n\n      vl.emit('local::itemsAfterInsert vlItemsAfterInsert', vl, vl.fragment);\n    }\n\n    if (typeof forceScrollTop !== 'undefined' && force) {\n      vl.$scrollableParentEl.scrollTop(forceScrollTop, 0);\n    }\n\n    if (vl.params.renderExternal) {\n      vl.params.renderExternal(vl, {\n        fromIndex,\n        toIndex,\n        listHeight: vl.listHeight,\n        topPosition,\n        items: renderExternalItems\n      });\n    }\n\n    if (vl.autoHeight) {\n      requestAnimationFrame(() => {\n        vl.setListSize(true);\n      });\n    }\n  } // Filter\n\n\n  filterItems(indexes, resetScrollTop) {\n    if (resetScrollTop === void 0) {\n      resetScrollTop = true;\n    }\n\n    const vl = this;\n    vl.filteredItems = [];\n\n    for (let i = 0; i < indexes.length; i += 1) {\n      vl.filteredItems.push(vl.items[indexes[i]]);\n    }\n\n    if (resetScrollTop) {\n      vl.$scrollableParentEl[0].scrollTop = 0;\n    }\n\n    vl.update();\n  }\n\n  resetFilter() {\n    const vl = this;\n\n    if (vl.params.showFilteredItemsOnly) {\n      vl.filteredItems = [];\n    } else {\n      vl.filteredItems = null;\n      delete vl.filteredItems;\n    }\n\n    vl.update();\n  }\n\n  scrollToItem(index) {\n    const vl = this;\n    if (index > vl.items.length) return false;\n    let itemTop = 0;\n\n    if (vl.dynamicHeight || vl.autoHeight) {\n      for (let i = 0; i < index; i += 1) {\n        itemTop += vl.heights[i];\n      }\n    } else {\n      itemTop = index * vl.params.height;\n    }\n\n    const listTop = vl.$el[0].offsetTop;\n    vl.render(true, listTop + itemTop - parseInt(vl.$scrollableParentEl.css('padding-top'), 10));\n    return true;\n  }\n\n  handleScroll() {\n    const vl = this;\n    vl.render();\n  } // Handle resize event\n\n\n  isVisible() {\n    const vl = this;\n    return !!(vl.el.offsetWidth || vl.el.offsetHeight || vl.el.getClientRects().length);\n  }\n\n  handleResize() {\n    const vl = this;\n\n    if (vl.isVisible()) {\n      vl.heightsCalculated = [];\n      vl.setListSize();\n      vl.render(true);\n    }\n  } // Append\n\n\n  appendItems(items) {\n    const vl = this;\n\n    for (let i = 0; i < items.length; i += 1) {\n      vl.items.push(items[i]);\n    }\n\n    vl.update();\n  }\n\n  appendItem(item) {\n    const vl = this;\n    vl.appendItems([item]);\n  } // Replace\n\n\n  replaceAllItems(items) {\n    const vl = this;\n    vl.items = items;\n    delete vl.filteredItems;\n    vl.domCache = {};\n    vl.update();\n  }\n\n  replaceItem(index, item) {\n    const vl = this;\n    vl.items[index] = item;\n    if (vl.params.cache) delete vl.domCache[index];\n    vl.update();\n  } // Prepend\n\n\n  prependItems(items) {\n    const vl = this;\n\n    for (let i = items.length - 1; i >= 0; i -= 1) {\n      vl.items.unshift(items[i]);\n    }\n\n    if (vl.params.cache) {\n      const newCache = {};\n      Object.keys(vl.domCache).forEach(cached => {\n        newCache[parseInt(cached, 10) + items.length] = vl.domCache[cached];\n      });\n      vl.domCache = newCache;\n    }\n\n    vl.update();\n  }\n\n  prependItem(item) {\n    const vl = this;\n    vl.prependItems([item]);\n  } // Move\n\n\n  moveItem(from, to) {\n    const vl = this;\n    const fromIndex = from;\n    let toIndex = to;\n    if (fromIndex === toIndex) return; // remove item from array\n\n    const item = vl.items.splice(fromIndex, 1)[0];\n\n    if (toIndex >= vl.items.length) {\n      // Add item to the end\n      vl.items.push(item);\n      toIndex = vl.items.length - 1;\n    } else {\n      // Add item to new index\n      vl.items.splice(toIndex, 0, item);\n    } // Update cache\n\n\n    if (vl.params.cache) {\n      const newCache = {};\n      Object.keys(vl.domCache).forEach(cached => {\n        const cachedIndex = parseInt(cached, 10);\n        const leftIndex = fromIndex < toIndex ? fromIndex : toIndex;\n        const rightIndex = fromIndex < toIndex ? toIndex : fromIndex;\n        const indexShift = fromIndex < toIndex ? -1 : 1;\n        if (cachedIndex < leftIndex || cachedIndex > rightIndex) newCache[cachedIndex] = vl.domCache[cachedIndex];\n        if (cachedIndex === leftIndex) newCache[rightIndex] = vl.domCache[cachedIndex];\n        if (cachedIndex > leftIndex && cachedIndex <= rightIndex) newCache[cachedIndex + indexShift] = vl.domCache[cachedIndex];\n      });\n      vl.domCache = newCache;\n    }\n\n    vl.update();\n  } // Insert before\n\n\n  insertItemBefore(index, item) {\n    const vl = this;\n\n    if (index === 0) {\n      vl.prependItem(item);\n      return;\n    }\n\n    if (index >= vl.items.length) {\n      vl.appendItem(item);\n      return;\n    }\n\n    vl.items.splice(index, 0, item); // Update cache\n\n    if (vl.params.cache) {\n      const newCache = {};\n      Object.keys(vl.domCache).forEach(cached => {\n        const cachedIndex = parseInt(cached, 10);\n\n        if (cachedIndex >= index) {\n          newCache[cachedIndex + 1] = vl.domCache[cachedIndex];\n        }\n      });\n      vl.domCache = newCache;\n    }\n\n    vl.update();\n  } // Delete\n\n\n  deleteItems(indexes) {\n    const vl = this;\n    let prevIndex;\n    let indexShift = 0;\n\n    for (let i = 0; i < indexes.length; i += 1) {\n      let index = indexes[i];\n\n      if (typeof prevIndex !== 'undefined') {\n        if (index > prevIndex) {\n          indexShift = -i;\n        }\n      }\n\n      index += indexShift;\n      prevIndex = indexes[i]; // Delete item\n\n      const deletedItem = vl.items.splice(index, 1)[0]; // Delete from filtered\n\n      if (vl.filteredItems && vl.filteredItems.indexOf(deletedItem) >= 0) {\n        vl.filteredItems.splice(vl.filteredItems.indexOf(deletedItem), 1);\n      } // Update cache\n\n\n      if (vl.params.cache) {\n        const newCache = {};\n        Object.keys(vl.domCache).forEach(cached => {\n          const cachedIndex = parseInt(cached, 10);\n\n          if (cachedIndex === index) {\n            delete vl.domCache[index];\n          } else if (parseInt(cached, 10) > index) {\n            newCache[cachedIndex - 1] = vl.domCache[cached];\n          } else {\n            newCache[cachedIndex] = vl.domCache[cached];\n          }\n        });\n        vl.domCache = newCache;\n      }\n    }\n\n    vl.update();\n  }\n\n  deleteAllItems() {\n    const vl = this;\n    vl.items = [];\n    delete vl.filteredItems;\n    if (vl.params.cache) vl.domCache = {};\n    vl.update();\n  }\n\n  deleteItem(index) {\n    const vl = this;\n    vl.deleteItems([index]);\n  } // Clear cache\n\n\n  clearCache() {\n    const vl = this;\n    vl.domCache = {};\n  } // Update Virtual List\n\n\n  update(deleteCache) {\n    const vl = this;\n\n    if (deleteCache && vl.params.cache) {\n      vl.domCache = {};\n    }\n\n    vl.heightsCalculated = [];\n    vl.setListSize();\n    vl.render(true);\n  }\n\n  init() {\n    const vl = this;\n    vl.attachEvents();\n    vl.setListSize();\n    vl.render();\n  }\n\n  destroy() {\n    let vl = this;\n    vl.detachEvents();\n    vl.$el[0].f7VirtualList = null;\n    delete vl.$el[0].f7VirtualList;\n    deleteProps(vl);\n    vl = null;\n  }\n\n}\n\nexport default VirtualList;","map":{"version":3,"names":["getDocument","$","extend","deleteProps","Framework7Class","getDevice","VirtualList","constructor","app","params","vl","device","document","defaultHeight","theme","defaults","cols","height","cache","dynamicHeightBufferSize","showFilteredItemsOnly","renderExternal","undefined","setListHeight","searchByItem","searchAll","ul","createUl","scrollableParentEl","renderItem","item","trim","on","useModulesParams","$el","el","length","f7VirtualList","items","filteredItems","$pageContentEl","parents","pageContentEl","$scrollableParentEl","eq","updatableScroll","ios","osVersion","split","$ul","children","append","$itemsWrapEl","itemsWrapEl","domCache","displayDomCache","tempDomElement","createElement","lastRepaintY","fragment","createDocumentFragment","pageHeight","rowsPerScreen","rowsBefore","rowsAfter","rowsToRender","maxBufferHeight","listHeight","dynamicHeight","autoHeight","useModules","handleScrollBound","handleScroll","bind","handleResizeBound","handleResize","$pageEl","$tabEl","$panelEl","$popupEl","attachEvents","filter","tabEl","parent","detachEvents","off","init","setListSize","autoHeightRerender","offsetHeight","heights","i","itemHeight","push","heightsCalculated","renderedItems","find","forEach","parseInt","getAttribute","renderedItem","includes","Math","ceil","css","render","force","forceScrollTop","scrollTop","getBoundingClientRect","top","abs","scrollHeight","fromIndex","toIndex","heightBeforeFirstItem","heightBeforeLastItem","itemTop","j","min","topPosition","renderExternalItems","reachEnd","itemEl","index","indexOf","currentFromIndex","currentToIndex","f7VirtualListIndex","innerHTML","toString","childNodes","style","emit","appendChild","emptyTemplate","requestAnimationFrame","filterItems","indexes","resetScrollTop","update","resetFilter","scrollToItem","listTop","offsetTop","isVisible","offsetWidth","getClientRects","appendItems","appendItem","replaceAllItems","replaceItem","prependItems","unshift","newCache","Object","keys","cached","prependItem","moveItem","from","to","splice","cachedIndex","leftIndex","rightIndex","indexShift","insertItemBefore","deleteItems","prevIndex","deletedItem","deleteAllItems","deleteItem","clearCache","deleteCache","destroy"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/components/virtual-list/virtual-list-class.js"],"sourcesContent":["import { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7.js';\nimport { extend, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\nimport { getDevice } from '../../shared/get-device.js';\n\nclass VirtualList extends Framework7Class {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const vl = this;\n    const device = getDevice();\n    const document = getDocument();\n    let defaultHeight;\n\n    if (app.theme === 'md') {\n      defaultHeight = 48;\n    } else if (app.theme === 'ios') {\n      defaultHeight = 44;\n    } else if (app.theme === 'aurora') {\n      defaultHeight = 38;\n    }\n\n    const defaults = {\n      cols: 1,\n      height: defaultHeight,\n      cache: true,\n      dynamicHeightBufferSize: 1,\n      showFilteredItemsOnly: false,\n      renderExternal: undefined,\n      setListHeight: true,\n      searchByItem: undefined,\n      searchAll: undefined,\n      ul: null,\n      createUl: true,\n      scrollableParentEl: undefined,\n\n      renderItem(item) {\n        return `\n          <li>\n            <div class=\"item-content\">\n              <div class=\"item-inner\">\n                <div class=\"item-title\">${item}</div>\n              </div>\n            </div>\n          </li>\n        `.trim();\n      },\n\n      on: {}\n    }; // Extend defaults with modules params\n\n    vl.useModulesParams(defaults);\n    vl.params = extend(defaults, params);\n\n    if (vl.params.height === undefined || !vl.params.height) {\n      vl.params.height = defaultHeight;\n    }\n\n    vl.$el = $(params.el);\n    vl.el = vl.$el[0];\n    if (vl.$el.length === 0) return undefined;\n    vl.$el[0].f7VirtualList = vl;\n    vl.items = vl.params.items;\n\n    if (vl.params.showFilteredItemsOnly) {\n      vl.filteredItems = [];\n    }\n\n    if (vl.params.renderItem) {\n      vl.renderItem = vl.params.renderItem;\n    }\n\n    vl.$pageContentEl = vl.$el.parents('.page-content');\n    vl.pageContentEl = vl.$pageContentEl[0];\n    vl.$scrollableParentEl = vl.params.scrollableParentEl ? $(vl.params.scrollableParentEl).eq(0) : vl.$pageContentEl;\n\n    if (!vl.$scrollableParentEl.length && vl.$pageContentEl.length) {\n      vl.$scrollableParentEl = vl.$pageContentEl;\n    }\n\n    vl.scrollableParentEl = vl.$scrollableParentEl[0]; // Bad scroll\n\n    if (typeof vl.params.updatableScroll !== 'undefined') {\n      vl.updatableScroll = vl.params.updatableScroll;\n    } else {\n      vl.updatableScroll = true;\n\n      if (device.ios && device.osVersion.split('.')[0] < 8) {\n        vl.updatableScroll = false;\n      }\n    } // Append <ul>\n\n\n    const ul = vl.params.ul;\n    vl.$ul = ul ? $(vl.params.ul) : vl.$el.children('ul');\n\n    if (vl.$ul.length === 0 && vl.params.createUl) {\n      vl.$el.append('<ul></ul>');\n      vl.$ul = vl.$el.children('ul');\n    }\n\n    vl.ul = vl.$ul[0];\n    let $itemsWrapEl;\n    if (!vl.ul && !vl.params.createUl) $itemsWrapEl = vl.$el;else $itemsWrapEl = vl.$ul;\n    extend(vl, {\n      $itemsWrapEl,\n      itemsWrapEl: $itemsWrapEl[0],\n      // DOM cached items\n      domCache: {},\n      displayDomCache: {},\n      // Temporary DOM Element\n      tempDomElement: document.createElement('ul'),\n      // Last repain position\n      lastRepaintY: null,\n      // Fragment\n      fragment: document.createDocumentFragment(),\n      // Props\n      pageHeight: undefined,\n      rowsPerScreen: undefined,\n      rowsBefore: undefined,\n      rowsAfter: undefined,\n      rowsToRender: undefined,\n      maxBufferHeight: 0,\n      listHeight: undefined,\n      dynamicHeight: typeof vl.params.height === 'function',\n      autoHeight: vl.params.height === 'auto'\n    }); // Install Modules\n\n    vl.useModules(); // Attach events\n\n    const handleScrollBound = vl.handleScroll.bind(vl);\n    const handleResizeBound = vl.handleResize.bind(vl);\n    let $pageEl;\n    let $tabEl;\n    let $panelEl;\n    let $popupEl;\n\n    vl.attachEvents = function attachEvents() {\n      $pageEl = vl.$el.parents('.page').eq(0);\n      $tabEl = vl.$el.parents('.tab').filter(tabEl => {\n        return $(tabEl).parent('.tabs').parent('.tabs-animated-wrap, .tabs-swipeable-wrap').length === 0;\n      }).eq(0);\n      $panelEl = vl.$el.parents('.panel').eq(0);\n      $popupEl = vl.$el.parents('.popup').eq(0);\n      vl.$scrollableParentEl.on('scroll', handleScrollBound);\n      if ($pageEl.length) $pageEl.on('page:reinit', handleResizeBound);\n      if ($tabEl.length) $tabEl.on('tab:show', handleResizeBound);\n      if ($panelEl.length) $panelEl.on('panel:open', handleResizeBound);\n      if ($popupEl.length) $popupEl.on('popup:open', handleResizeBound);\n      app.on('resize', handleResizeBound);\n    };\n\n    vl.detachEvents = function attachEvents() {\n      vl.$scrollableParentEl.off('scroll', handleScrollBound);\n      if ($pageEl.length) $pageEl.off('page:reinit', handleResizeBound);\n      if ($tabEl.length) $tabEl.off('tab:show', handleResizeBound);\n      if ($panelEl.length) $panelEl.off('panel:open', handleResizeBound);\n      if ($popupEl.length) $popupEl.off('popup:open', handleResizeBound);\n      app.off('resize', handleResizeBound);\n    }; // Init\n\n\n    vl.init();\n    return vl;\n  }\n\n  setListSize(autoHeightRerender) {\n    const vl = this;\n    const items = vl.filteredItems || vl.items;\n\n    if (!autoHeightRerender) {\n      vl.pageHeight = vl.$scrollableParentEl[0].offsetHeight;\n    }\n\n    if (vl.dynamicHeight) {\n      vl.listHeight = 0;\n      vl.heights = [];\n\n      for (let i = 0; i < items.length; i += 1) {\n        const itemHeight = vl.params.height(items[i]);\n        vl.listHeight += itemHeight;\n        vl.heights.push(itemHeight);\n      }\n    } else if (vl.autoHeight) {\n      vl.listHeight = 0;\n      if (!vl.heights) vl.heights = [];\n      if (!vl.heightsCalculated) vl.heightsCalculated = [];\n      const renderedItems = {};\n      vl.$itemsWrapEl.find(`[data-virtual-list-index]`).forEach(el => {\n        renderedItems[parseInt(el.getAttribute('data-virtual-list-index'), 10)] = el;\n      });\n\n      for (let i = 0; i < items.length; i += 1) {\n        const renderedItem = renderedItems[i];\n\n        if (renderedItem) {\n          if (!vl.heightsCalculated.includes(i)) {\n            vl.heights[i] = renderedItem.offsetHeight;\n            vl.heightsCalculated.push(i);\n          }\n        }\n\n        if (typeof vl.heights[i] === 'undefined') {\n          vl.heights[i] = 40;\n        }\n\n        vl.listHeight += vl.heights[i];\n      }\n    } else {\n      vl.listHeight = Math.ceil(items.length / vl.params.cols) * vl.params.height;\n      vl.rowsPerScreen = Math.ceil(vl.pageHeight / vl.params.height);\n      vl.rowsBefore = vl.params.rowsBefore || vl.rowsPerScreen * 2;\n      vl.rowsAfter = vl.params.rowsAfter || vl.rowsPerScreen;\n      vl.rowsToRender = vl.rowsPerScreen + vl.rowsBefore + vl.rowsAfter;\n      vl.maxBufferHeight = vl.rowsBefore / 2 * vl.params.height;\n    }\n\n    if (vl.updatableScroll || vl.params.setListHeight) {\n      vl.$itemsWrapEl.css({\n        height: `${vl.listHeight}px`\n      });\n    }\n  }\n\n  render(force, forceScrollTop) {\n    const vl = this;\n    if (force) vl.lastRepaintY = null;\n    let scrollTop = -(vl.$el[0].getBoundingClientRect().top - vl.$scrollableParentEl[0].getBoundingClientRect().top);\n    if (typeof forceScrollTop !== 'undefined') scrollTop = forceScrollTop;\n\n    if (vl.lastRepaintY === null || Math.abs(scrollTop - vl.lastRepaintY) > vl.maxBufferHeight || !vl.updatableScroll && vl.$scrollableParentEl[0].scrollTop + vl.pageHeight >= vl.$scrollableParentEl[0].scrollHeight) {\n      vl.lastRepaintY = scrollTop;\n    } else {\n      return;\n    }\n\n    const items = vl.filteredItems || vl.items;\n    let fromIndex;\n    let toIndex;\n    let heightBeforeFirstItem = 0;\n    let heightBeforeLastItem = 0;\n\n    if (vl.dynamicHeight || vl.autoHeight) {\n      let itemTop = 0;\n      let itemHeight;\n      vl.maxBufferHeight = vl.pageHeight;\n\n      for (let j = 0; j < vl.heights.length; j += 1) {\n        itemHeight = vl.heights[j];\n\n        if (typeof fromIndex === 'undefined') {\n          if (itemTop + itemHeight >= scrollTop - vl.pageHeight * 2 * vl.params.dynamicHeightBufferSize) fromIndex = j;else heightBeforeFirstItem += itemHeight;\n        }\n\n        if (typeof toIndex === 'undefined') {\n          if (itemTop + itemHeight >= scrollTop + vl.pageHeight * 2 * vl.params.dynamicHeightBufferSize || j === vl.heights.length - 1) toIndex = j + 1;\n          heightBeforeLastItem += itemHeight;\n        }\n\n        itemTop += itemHeight;\n      }\n\n      toIndex = Math.min(toIndex, items.length);\n    } else {\n      fromIndex = (parseInt(scrollTop / vl.params.height, 10) - vl.rowsBefore) * vl.params.cols;\n\n      if (fromIndex < 0) {\n        fromIndex = 0;\n      }\n\n      toIndex = Math.min(fromIndex + vl.rowsToRender * vl.params.cols, items.length);\n    }\n\n    let topPosition;\n    const renderExternalItems = [];\n    vl.reachEnd = false;\n    let i;\n\n    for (i = fromIndex; i < toIndex; i += 1) {\n      let itemEl; // Define real item index\n\n      const index = vl.items.indexOf(items[i]);\n      if (i === fromIndex) vl.currentFromIndex = index;\n      if (i === toIndex - 1) vl.currentToIndex = index;\n\n      if (vl.filteredItems) {\n        if (vl.items[index] === vl.filteredItems[vl.filteredItems.length - 1]) vl.reachEnd = true;\n      } else if (index === vl.items.length - 1) vl.reachEnd = true; // Find items\n\n\n      if (vl.params.renderExternal) {\n        renderExternalItems.push(items[i]);\n      } else if (vl.domCache[index]) {\n        itemEl = vl.domCache[index];\n        itemEl.f7VirtualListIndex = index;\n      } else {\n        if (vl.renderItem) {\n          vl.tempDomElement.innerHTML = vl.renderItem(items[i], index).trim();\n        } else {\n          vl.tempDomElement.innerHTML = items[i].toString().trim();\n        }\n\n        itemEl = vl.tempDomElement.childNodes[0];\n        if (vl.params.cache) vl.domCache[index] = itemEl;\n        itemEl.f7VirtualListIndex = index;\n      } // Set item top position\n\n\n      if (i === fromIndex) {\n        if (vl.dynamicHeight || vl.autoHeight) {\n          topPosition = heightBeforeFirstItem;\n        } else {\n          topPosition = i * vl.params.height / vl.params.cols;\n        }\n      }\n\n      if (!vl.params.renderExternal) {\n        itemEl.style.top = `${topPosition}px`; // Before item insert\n\n        vl.emit('local::itemBeforeInsert vlItemBeforeInsert', vl, itemEl, items[i]); // Append item to fragment\n\n        vl.fragment.appendChild(itemEl);\n      }\n    } // Update list height with not updatable scroll\n\n\n    if (!vl.updatableScroll) {\n      if (vl.dynamicHeight || vl.autoHeight) {\n        vl.itemsWrapEl.style.height = `${heightBeforeLastItem}px`;\n      } else {\n        vl.itemsWrapEl.style.height = `${i * vl.params.height / vl.params.cols}px`;\n      }\n    } // Update list html\n\n\n    if (vl.params.renderExternal) {\n      if (items && items.length === 0) {\n        vl.reachEnd = true;\n      }\n    } else {\n      vl.emit('local::beforeClear vlBeforeClear', vl, vl.fragment);\n      vl.itemsWrapEl.innerHTML = '';\n      vl.emit('local::itemsBeforeInsert vlItemsBeforeInsert', vl, vl.fragment);\n\n      if (items && items.length === 0) {\n        vl.reachEnd = true;\n        if (vl.params.emptyTemplate) vl.itemsWrapEl.innerHTML = vl.params.emptyTemplate;\n      } else {\n        vl.itemsWrapEl.appendChild(vl.fragment);\n      }\n\n      vl.emit('local::itemsAfterInsert vlItemsAfterInsert', vl, vl.fragment);\n    }\n\n    if (typeof forceScrollTop !== 'undefined' && force) {\n      vl.$scrollableParentEl.scrollTop(forceScrollTop, 0);\n    }\n\n    if (vl.params.renderExternal) {\n      vl.params.renderExternal(vl, {\n        fromIndex,\n        toIndex,\n        listHeight: vl.listHeight,\n        topPosition,\n        items: renderExternalItems\n      });\n    }\n\n    if (vl.autoHeight) {\n      requestAnimationFrame(() => {\n        vl.setListSize(true);\n      });\n    }\n  } // Filter\n\n\n  filterItems(indexes, resetScrollTop) {\n    if (resetScrollTop === void 0) {\n      resetScrollTop = true;\n    }\n\n    const vl = this;\n    vl.filteredItems = [];\n\n    for (let i = 0; i < indexes.length; i += 1) {\n      vl.filteredItems.push(vl.items[indexes[i]]);\n    }\n\n    if (resetScrollTop) {\n      vl.$scrollableParentEl[0].scrollTop = 0;\n    }\n\n    vl.update();\n  }\n\n  resetFilter() {\n    const vl = this;\n\n    if (vl.params.showFilteredItemsOnly) {\n      vl.filteredItems = [];\n    } else {\n      vl.filteredItems = null;\n      delete vl.filteredItems;\n    }\n\n    vl.update();\n  }\n\n  scrollToItem(index) {\n    const vl = this;\n    if (index > vl.items.length) return false;\n    let itemTop = 0;\n\n    if (vl.dynamicHeight || vl.autoHeight) {\n      for (let i = 0; i < index; i += 1) {\n        itemTop += vl.heights[i];\n      }\n    } else {\n      itemTop = index * vl.params.height;\n    }\n\n    const listTop = vl.$el[0].offsetTop;\n    vl.render(true, listTop + itemTop - parseInt(vl.$scrollableParentEl.css('padding-top'), 10));\n    return true;\n  }\n\n  handleScroll() {\n    const vl = this;\n    vl.render();\n  } // Handle resize event\n\n\n  isVisible() {\n    const vl = this;\n    return !!(vl.el.offsetWidth || vl.el.offsetHeight || vl.el.getClientRects().length);\n  }\n\n  handleResize() {\n    const vl = this;\n\n    if (vl.isVisible()) {\n      vl.heightsCalculated = [];\n      vl.setListSize();\n      vl.render(true);\n    }\n  } // Append\n\n\n  appendItems(items) {\n    const vl = this;\n\n    for (let i = 0; i < items.length; i += 1) {\n      vl.items.push(items[i]);\n    }\n\n    vl.update();\n  }\n\n  appendItem(item) {\n    const vl = this;\n    vl.appendItems([item]);\n  } // Replace\n\n\n  replaceAllItems(items) {\n    const vl = this;\n    vl.items = items;\n    delete vl.filteredItems;\n    vl.domCache = {};\n    vl.update();\n  }\n\n  replaceItem(index, item) {\n    const vl = this;\n    vl.items[index] = item;\n    if (vl.params.cache) delete vl.domCache[index];\n    vl.update();\n  } // Prepend\n\n\n  prependItems(items) {\n    const vl = this;\n\n    for (let i = items.length - 1; i >= 0; i -= 1) {\n      vl.items.unshift(items[i]);\n    }\n\n    if (vl.params.cache) {\n      const newCache = {};\n      Object.keys(vl.domCache).forEach(cached => {\n        newCache[parseInt(cached, 10) + items.length] = vl.domCache[cached];\n      });\n      vl.domCache = newCache;\n    }\n\n    vl.update();\n  }\n\n  prependItem(item) {\n    const vl = this;\n    vl.prependItems([item]);\n  } // Move\n\n\n  moveItem(from, to) {\n    const vl = this;\n    const fromIndex = from;\n    let toIndex = to;\n    if (fromIndex === toIndex) return; // remove item from array\n\n    const item = vl.items.splice(fromIndex, 1)[0];\n\n    if (toIndex >= vl.items.length) {\n      // Add item to the end\n      vl.items.push(item);\n      toIndex = vl.items.length - 1;\n    } else {\n      // Add item to new index\n      vl.items.splice(toIndex, 0, item);\n    } // Update cache\n\n\n    if (vl.params.cache) {\n      const newCache = {};\n      Object.keys(vl.domCache).forEach(cached => {\n        const cachedIndex = parseInt(cached, 10);\n        const leftIndex = fromIndex < toIndex ? fromIndex : toIndex;\n        const rightIndex = fromIndex < toIndex ? toIndex : fromIndex;\n        const indexShift = fromIndex < toIndex ? -1 : 1;\n        if (cachedIndex < leftIndex || cachedIndex > rightIndex) newCache[cachedIndex] = vl.domCache[cachedIndex];\n        if (cachedIndex === leftIndex) newCache[rightIndex] = vl.domCache[cachedIndex];\n        if (cachedIndex > leftIndex && cachedIndex <= rightIndex) newCache[cachedIndex + indexShift] = vl.domCache[cachedIndex];\n      });\n      vl.domCache = newCache;\n    }\n\n    vl.update();\n  } // Insert before\n\n\n  insertItemBefore(index, item) {\n    const vl = this;\n\n    if (index === 0) {\n      vl.prependItem(item);\n      return;\n    }\n\n    if (index >= vl.items.length) {\n      vl.appendItem(item);\n      return;\n    }\n\n    vl.items.splice(index, 0, item); // Update cache\n\n    if (vl.params.cache) {\n      const newCache = {};\n      Object.keys(vl.domCache).forEach(cached => {\n        const cachedIndex = parseInt(cached, 10);\n\n        if (cachedIndex >= index) {\n          newCache[cachedIndex + 1] = vl.domCache[cachedIndex];\n        }\n      });\n      vl.domCache = newCache;\n    }\n\n    vl.update();\n  } // Delete\n\n\n  deleteItems(indexes) {\n    const vl = this;\n    let prevIndex;\n    let indexShift = 0;\n\n    for (let i = 0; i < indexes.length; i += 1) {\n      let index = indexes[i];\n\n      if (typeof prevIndex !== 'undefined') {\n        if (index > prevIndex) {\n          indexShift = -i;\n        }\n      }\n\n      index += indexShift;\n      prevIndex = indexes[i]; // Delete item\n\n      const deletedItem = vl.items.splice(index, 1)[0]; // Delete from filtered\n\n      if (vl.filteredItems && vl.filteredItems.indexOf(deletedItem) >= 0) {\n        vl.filteredItems.splice(vl.filteredItems.indexOf(deletedItem), 1);\n      } // Update cache\n\n\n      if (vl.params.cache) {\n        const newCache = {};\n        Object.keys(vl.domCache).forEach(cached => {\n          const cachedIndex = parseInt(cached, 10);\n\n          if (cachedIndex === index) {\n            delete vl.domCache[index];\n          } else if (parseInt(cached, 10) > index) {\n            newCache[cachedIndex - 1] = vl.domCache[cached];\n          } else {\n            newCache[cachedIndex] = vl.domCache[cached];\n          }\n        });\n        vl.domCache = newCache;\n      }\n    }\n\n    vl.update();\n  }\n\n  deleteAllItems() {\n    const vl = this;\n    vl.items = [];\n    delete vl.filteredItems;\n    if (vl.params.cache) vl.domCache = {};\n    vl.update();\n  }\n\n  deleteItem(index) {\n    const vl = this;\n    vl.deleteItems([index]);\n  } // Clear cache\n\n\n  clearCache() {\n    const vl = this;\n    vl.domCache = {};\n  } // Update Virtual List\n\n\n  update(deleteCache) {\n    const vl = this;\n\n    if (deleteCache && vl.params.cache) {\n      vl.domCache = {};\n    }\n\n    vl.heightsCalculated = [];\n    vl.setListSize();\n    vl.render(true);\n  }\n\n  init() {\n    const vl = this;\n    vl.attachEvents();\n    vl.setListSize();\n    vl.render();\n  }\n\n  destroy() {\n    let vl = this;\n    vl.detachEvents();\n    vl.$el[0].f7VirtualList = null;\n    delete vl.$el[0].f7VirtualList;\n    deleteProps(vl);\n    vl = null;\n  }\n\n}\n\nexport default VirtualList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}