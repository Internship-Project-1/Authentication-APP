{"ast":null,"code":"import { getWindow, getDocument } from 'ssr-window';\nimport { id } from '../../shared/utils.js';\nimport $ from '../../shared/dom7.js';\nconst fetchedModules = [];\n\nfunction loadModule(moduleToLoad) {\n  const Framework7 = this;\n  const window = getWindow();\n  const document = getDocument();\n  return new Promise((resolve, reject) => {\n    const app = Framework7.instance;\n    let modulePath;\n    let moduleObj;\n    let moduleFunc;\n\n    if (!moduleToLoad) {\n      reject(new Error('Framework7: Lazy module must be specified'));\n      return;\n    }\n\n    function install(module) {\n      Framework7.use(module);\n\n      if (app) {\n        app.useModuleParams(module, app.params);\n        app.useModule(module);\n      }\n    }\n\n    if (typeof moduleToLoad === 'string') {\n      const matchNamePattern = moduleToLoad.match(/([a-z0-9-]*)/i);\n\n      if (moduleToLoad.indexOf('.') < 0 && matchNamePattern && matchNamePattern[0].length === moduleToLoad.length) {\n        if (!app || app && !app.params.lazyModulesPath) {\n          reject(new Error('Framework7: \"lazyModulesPath\" app parameter must be specified to fetch module by name'));\n          return;\n        }\n\n        modulePath = `${app.params.lazyModulesPath}/${moduleToLoad}/${moduleToLoad}.lazy.js`;\n      } else {\n        modulePath = moduleToLoad;\n      }\n    } else if (typeof moduleToLoad === 'function') {\n      moduleFunc = moduleToLoad;\n    } else {\n      // considering F7-Plugin object\n      moduleObj = moduleToLoad;\n    }\n\n    if (moduleFunc) {\n      const module = moduleFunc(Framework7, false);\n\n      if (!module) {\n        reject(new Error(\"Framework7: Can't find Framework7 component in specified component function\"));\n        return;\n      } // Check if it was added\n\n\n      if (Framework7.prototype.modules && Framework7.prototype.modules[module.name]) {\n        resolve();\n        return;\n      } // Install It\n\n\n      install(module);\n      resolve();\n    }\n\n    if (moduleObj) {\n      const module = moduleObj;\n\n      if (!module) {\n        reject(new Error(\"Framework7: Can't find Framework7 component in specified component\"));\n        return;\n      } // Check if it was added\n\n\n      if (Framework7.prototype.modules && Framework7.prototype.modules[module.name]) {\n        resolve();\n        return;\n      } // Install It\n\n\n      install(module);\n      resolve();\n    }\n\n    if (modulePath) {\n      if (fetchedModules.indexOf(modulePath) >= 0) {\n        resolve();\n        return;\n      }\n\n      fetchedModules.push(modulePath);\n      const scriptLoad = new Promise((resolveScript, rejectScript) => {\n        Framework7.request.get(modulePath, scriptContent => {\n          const callbackId = id();\n          const callbackLoadName = `f7_component_loader_callback_${callbackId}`;\n          const scriptEl = document.createElement('script');\n          scriptEl.innerHTML = `window.${callbackLoadName} = function (Framework7, Framework7AutoInstallComponent) {return ${scriptContent.trim()}}`;\n          $('head').append(scriptEl);\n          const componentLoader = window[callbackLoadName];\n          delete window[callbackLoadName];\n          $(scriptEl).remove();\n          const module = componentLoader(Framework7, false);\n\n          if (!module) {\n            rejectScript(new Error(`Framework7: Can't find Framework7 component in ${modulePath} file`));\n            return;\n          } // Check if it was added\n\n\n          if (Framework7.prototype.modules && Framework7.prototype.modules[module.name]) {\n            resolveScript();\n            return;\n          } // Install It\n\n\n          install(module);\n          resolveScript();\n        }, (xhr, status) => {\n          rejectScript(xhr, status);\n        });\n      });\n      const styleLoad = new Promise(resolveStyle => {\n        Framework7.request.get(modulePath.replace('.lazy.js', app.rtl ? '.rtl.css' : '.css').replace('.js', app.rtl ? '.rtl.css' : '.css'), styleContent => {\n          const styleEl = document.createElement('style');\n          styleEl.innerHTML = styleContent;\n          $('head').append(styleEl);\n          resolveStyle();\n        }, () => {\n          resolveStyle();\n        });\n      });\n      Promise.all([scriptLoad, styleLoad]).then(() => {\n        resolve();\n      }).catch(err => {\n        reject(err);\n      });\n    }\n  });\n}\n\nexport default loadModule;","map":{"version":3,"names":["getWindow","getDocument","id","$","fetchedModules","loadModule","moduleToLoad","Framework7","window","document","Promise","resolve","reject","app","instance","modulePath","moduleObj","moduleFunc","Error","install","module","use","useModuleParams","params","useModule","matchNamePattern","match","indexOf","length","lazyModulesPath","prototype","modules","name","push","scriptLoad","resolveScript","rejectScript","request","get","scriptContent","callbackId","callbackLoadName","scriptEl","createElement","innerHTML","trim","append","componentLoader","remove","xhr","status","styleLoad","resolveStyle","replace","rtl","styleContent","styleEl","all","then","catch","err"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/components/app/load-module.js"],"sourcesContent":["import { getWindow, getDocument } from 'ssr-window';\nimport { id } from '../../shared/utils.js';\nimport $ from '../../shared/dom7.js';\nconst fetchedModules = [];\n\nfunction loadModule(moduleToLoad) {\n  const Framework7 = this;\n  const window = getWindow();\n  const document = getDocument();\n  return new Promise((resolve, reject) => {\n    const app = Framework7.instance;\n    let modulePath;\n    let moduleObj;\n    let moduleFunc;\n\n    if (!moduleToLoad) {\n      reject(new Error('Framework7: Lazy module must be specified'));\n      return;\n    }\n\n    function install(module) {\n      Framework7.use(module);\n\n      if (app) {\n        app.useModuleParams(module, app.params);\n        app.useModule(module);\n      }\n    }\n\n    if (typeof moduleToLoad === 'string') {\n      const matchNamePattern = moduleToLoad.match(/([a-z0-9-]*)/i);\n\n      if (moduleToLoad.indexOf('.') < 0 && matchNamePattern && matchNamePattern[0].length === moduleToLoad.length) {\n        if (!app || app && !app.params.lazyModulesPath) {\n          reject(new Error('Framework7: \"lazyModulesPath\" app parameter must be specified to fetch module by name'));\n          return;\n        }\n\n        modulePath = `${app.params.lazyModulesPath}/${moduleToLoad}/${moduleToLoad}.lazy.js`;\n      } else {\n        modulePath = moduleToLoad;\n      }\n    } else if (typeof moduleToLoad === 'function') {\n      moduleFunc = moduleToLoad;\n    } else {\n      // considering F7-Plugin object\n      moduleObj = moduleToLoad;\n    }\n\n    if (moduleFunc) {\n      const module = moduleFunc(Framework7, false);\n\n      if (!module) {\n        reject(new Error(\"Framework7: Can't find Framework7 component in specified component function\"));\n        return;\n      } // Check if it was added\n\n\n      if (Framework7.prototype.modules && Framework7.prototype.modules[module.name]) {\n        resolve();\n        return;\n      } // Install It\n\n\n      install(module);\n      resolve();\n    }\n\n    if (moduleObj) {\n      const module = moduleObj;\n\n      if (!module) {\n        reject(new Error(\"Framework7: Can't find Framework7 component in specified component\"));\n        return;\n      } // Check if it was added\n\n\n      if (Framework7.prototype.modules && Framework7.prototype.modules[module.name]) {\n        resolve();\n        return;\n      } // Install It\n\n\n      install(module);\n      resolve();\n    }\n\n    if (modulePath) {\n      if (fetchedModules.indexOf(modulePath) >= 0) {\n        resolve();\n        return;\n      }\n\n      fetchedModules.push(modulePath);\n      const scriptLoad = new Promise((resolveScript, rejectScript) => {\n        Framework7.request.get(modulePath, scriptContent => {\n          const callbackId = id();\n          const callbackLoadName = `f7_component_loader_callback_${callbackId}`;\n          const scriptEl = document.createElement('script');\n          scriptEl.innerHTML = `window.${callbackLoadName} = function (Framework7, Framework7AutoInstallComponent) {return ${scriptContent.trim()}}`;\n          $('head').append(scriptEl);\n          const componentLoader = window[callbackLoadName];\n          delete window[callbackLoadName];\n          $(scriptEl).remove();\n          const module = componentLoader(Framework7, false);\n\n          if (!module) {\n            rejectScript(new Error(`Framework7: Can't find Framework7 component in ${modulePath} file`));\n            return;\n          } // Check if it was added\n\n\n          if (Framework7.prototype.modules && Framework7.prototype.modules[module.name]) {\n            resolveScript();\n            return;\n          } // Install It\n\n\n          install(module);\n          resolveScript();\n        }, (xhr, status) => {\n          rejectScript(xhr, status);\n        });\n      });\n      const styleLoad = new Promise(resolveStyle => {\n        Framework7.request.get(modulePath.replace('.lazy.js', app.rtl ? '.rtl.css' : '.css').replace('.js', app.rtl ? '.rtl.css' : '.css'), styleContent => {\n          const styleEl = document.createElement('style');\n          styleEl.innerHTML = styleContent;\n          $('head').append(styleEl);\n          resolveStyle();\n        }, () => {\n          resolveStyle();\n        });\n      });\n      Promise.all([scriptLoad, styleLoad]).then(() => {\n        resolve();\n      }).catch(err => {\n        reject(err);\n      });\n    }\n  });\n}\n\nexport default loadModule;"],"mappings":"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"},"metadata":{},"sourceType":"module"}