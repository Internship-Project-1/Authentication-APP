{"ast":null,"code":"import { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7.js';\nimport { extend, nextTick, deleteProps } from '../../shared/utils.js';\nimport FrameworkClass from '../../shared/class.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport removeDiacritics from './remove-diacritics.js';\n\nclass Searchbar extends FrameworkClass {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const sb = this;\n    const defaults = {\n      el: undefined,\n      inputEl: undefined,\n      inputEvents: 'change input compositionend',\n      disableButton: true,\n      disableButtonEl: undefined,\n      backdropEl: undefined,\n      searchContainer: undefined,\n      // container to search, HTMLElement or CSS selector\n      searchItem: 'li',\n      // single item selector, CSS selector\n      searchIn: undefined,\n      // where to search in item, CSS selector\n      searchGroup: '.list-group',\n      searchGroupTitle: '.item-divider, .list-group-title',\n      ignore: '.searchbar-ignore',\n      foundEl: '.searchbar-found',\n      notFoundEl: '.searchbar-not-found',\n      hideOnEnableEl: '.searchbar-hide-on-enable',\n      hideOnSearchEl: '.searchbar-hide-on-search',\n      backdrop: undefined,\n      removeDiacritics: true,\n      customSearch: false,\n      hideDividers: true,\n      hideGroups: true,\n      disableOnBackdropClick: true,\n      expandable: false,\n      inline: false\n    }; // Extend defaults with modules params\n\n    sb.useModulesParams(defaults);\n    sb.params = extend(defaults, params);\n    const $el = $(sb.params.el);\n    if ($el.length === 0) return sb;\n    if ($el[0].f7Searchbar) return $el[0].f7Searchbar;\n    $el[0].f7Searchbar = sb;\n    let $pageEl;\n    const $navbarEl = $el.parents('.navbar');\n\n    if ($el.parents('.page').length > 0) {\n      $pageEl = $el.parents('.page');\n    } else if ($navbarEl.length > 0) {\n      $pageEl = $(app.navbar.getPageByEl($navbarEl[0]));\n\n      if (!$pageEl.length) {\n        const $currentPageEl = $el.parents('.view').find('.page-current');\n\n        if ($currentPageEl[0] && $currentPageEl[0].f7Page && $currentPageEl[0].f7Page.navbarEl === $navbarEl[0]) {\n          $pageEl = $currentPageEl;\n        }\n      }\n    }\n\n    let $foundEl;\n\n    if (params.foundEl) {\n      $foundEl = $(params.foundEl);\n    } else if (typeof sb.params.foundEl === 'string' && $pageEl) {\n      $foundEl = $pageEl.find(sb.params.foundEl);\n    }\n\n    let $notFoundEl;\n\n    if (params.notFoundEl) {\n      $notFoundEl = $(params.notFoundEl);\n    } else if (typeof sb.params.notFoundEl === 'string' && $pageEl) {\n      $notFoundEl = $pageEl.find(sb.params.notFoundEl);\n    }\n\n    let $hideOnEnableEl;\n\n    if (params.hideOnEnableEl) {\n      $hideOnEnableEl = $(params.hideOnEnableEl);\n    } else if (typeof sb.params.hideOnEnableEl === 'string' && $pageEl) {\n      $hideOnEnableEl = $pageEl.find(sb.params.hideOnEnableEl);\n    }\n\n    let $hideOnSearchEl;\n\n    if (params.hideOnSearchEl) {\n      $hideOnSearchEl = $(params.hideOnSearchEl);\n    } else if (typeof sb.params.hideOnSearchEl === 'string' && $pageEl) {\n      $hideOnSearchEl = $pageEl.find(sb.params.hideOnSearchEl);\n    }\n\n    const expandable = sb.params.expandable || $el.hasClass('searchbar-expandable');\n    const inline = sb.params.inline || $el.hasClass('searchbar-inline');\n\n    if (typeof sb.params.backdrop === 'undefined') {\n      if (!inline) sb.params.backdrop = app.theme !== 'aurora';else sb.params.backdrop = false;\n    }\n\n    let $backdropEl;\n\n    if (sb.params.backdrop) {\n      if (sb.params.backdropEl) {\n        $backdropEl = $(sb.params.backdropEl);\n      } else if ($pageEl && $pageEl.length > 0) {\n        $backdropEl = $pageEl.find('.searchbar-backdrop');\n      } else {\n        $backdropEl = $el.siblings('.searchbar-backdrop');\n      }\n\n      if ($backdropEl.length === 0) {\n        $backdropEl = $('<div class=\"searchbar-backdrop\"></div>');\n\n        if ($pageEl && $pageEl.length) {\n          if ($el.parents($pageEl).length > 0 && $navbarEl && $el.parents($navbarEl).length === 0) {\n            $backdropEl.insertBefore($el);\n          } else {\n            $backdropEl.insertBefore($pageEl.find('.page-content').eq(0));\n          }\n        } else {\n          $backdropEl.insertBefore($el);\n        }\n      }\n    }\n\n    let $searchContainer;\n\n    if (sb.params.searchContainer) {\n      $searchContainer = $(sb.params.searchContainer);\n    }\n\n    let $inputEl;\n\n    if (sb.params.inputEl) {\n      $inputEl = $(sb.params.inputEl);\n    } else {\n      $inputEl = $el.find('input[type=\"search\"]').eq(0);\n    }\n\n    let $disableButtonEl;\n\n    if (sb.params.disableButton) {\n      if (sb.params.disableButtonEl) {\n        $disableButtonEl = $(sb.params.disableButtonEl);\n      } else {\n        $disableButtonEl = $el.find('.searchbar-disable-button');\n      }\n    }\n\n    extend(sb, {\n      app,\n      view: app.views.get($el.parents('.view')),\n      $el,\n      el: $el[0],\n      $backdropEl,\n      backdropEl: $backdropEl && $backdropEl[0],\n      $searchContainer,\n      searchContainer: $searchContainer && $searchContainer[0],\n      $inputEl,\n      inputEl: $inputEl[0],\n      $disableButtonEl,\n      disableButtonEl: $disableButtonEl && $disableButtonEl[0],\n      disableButtonHasMargin: false,\n      $pageEl,\n      pageEl: $pageEl && $pageEl[0],\n      $navbarEl,\n      navbarEl: $navbarEl && $navbarEl[0],\n      $foundEl,\n      foundEl: $foundEl && $foundEl[0],\n      $notFoundEl,\n      notFoundEl: $notFoundEl && $notFoundEl[0],\n      $hideOnEnableEl,\n      hideOnEnableEl: $hideOnEnableEl && $hideOnEnableEl[0],\n      $hideOnSearchEl,\n      hideOnSearchEl: $hideOnSearchEl && $hideOnSearchEl[0],\n      previousQuery: '',\n      query: '',\n      isVirtualList: $searchContainer && $searchContainer.hasClass('virtual-list'),\n      virtualList: undefined,\n      enabled: false,\n      expandable,\n      inline\n    }); // Events\n\n    function preventSubmit(e) {\n      e.preventDefault();\n    }\n\n    function onInputFocus(e) {\n      sb.enable(e);\n      sb.$el.addClass('searchbar-focused');\n    }\n\n    function onInputBlur() {\n      sb.$el.removeClass('searchbar-focused');\n\n      if (app.theme === 'aurora' && (!$disableButtonEl || !$disableButtonEl.length || !sb.params.disableButton) && !sb.query) {\n        sb.disable();\n      }\n    }\n\n    function onInputChange() {\n      const value = sb.$inputEl.val().trim();\n\n      if (sb.$searchContainer && sb.$searchContainer.length > 0 && (sb.params.searchIn || sb.isVirtualList || sb.params.searchIn === sb.params.searchItem) || sb.params.customSearch) {\n        sb.search(value, true);\n      }\n    }\n\n    function onInputClear(e, previousValue) {\n      sb.$el.trigger('searchbar:clear', previousValue);\n      sb.emit('local::clear searchbarClear', sb, previousValue);\n    }\n\n    function disableOnClick(e) {\n      sb.disable(e);\n    }\n\n    function onPageBeforeOut() {\n      if (!sb || sb && !sb.$el) return;\n\n      if (sb.enabled) {\n        sb.$el.removeClass('searchbar-enabled');\n\n        if (sb.expandable) {\n          sb.$el.parents('.navbar').removeClass('with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition');\n        }\n      }\n    }\n\n    function onPageBeforeIn() {\n      if (!sb || sb && !sb.$el) return;\n\n      if (sb.enabled) {\n        sb.$el.addClass('searchbar-enabled');\n\n        if (sb.expandable) {\n          sb.$el.parents('.navbar').addClass('with-searchbar-expandable-enabled-no-transition');\n        }\n      }\n    }\n\n    sb.attachEvents = function attachEvents() {\n      $el.on('submit', preventSubmit);\n\n      if (sb.params.disableButton) {\n        sb.$disableButtonEl.on('click', disableOnClick);\n      }\n\n      if (sb.params.disableOnBackdropClick && sb.$backdropEl) {\n        sb.$backdropEl.on('click', disableOnClick);\n      }\n\n      if (sb.expandable && app.theme === 'ios' && sb.view && $navbarEl.length && sb.$pageEl) {\n        sb.$pageEl.on('page:beforeout', onPageBeforeOut);\n        sb.$pageEl.on('page:beforein', onPageBeforeIn);\n      }\n\n      sb.$inputEl.on('focus', onInputFocus);\n      sb.$inputEl.on('blur', onInputBlur);\n      sb.$inputEl.on(sb.params.inputEvents, onInputChange);\n      sb.$inputEl.on('input:clear', onInputClear);\n    };\n\n    sb.detachEvents = function detachEvents() {\n      $el.off('submit', preventSubmit);\n\n      if (sb.params.disableButton) {\n        sb.$disableButtonEl.off('click', disableOnClick);\n      }\n\n      if (sb.params.disableOnBackdropClick && sb.$backdropEl) {\n        sb.$backdropEl.off('click', disableOnClick);\n      }\n\n      if (sb.expandable && app.theme === 'ios' && sb.view && $navbarEl.length && sb.$pageEl) {\n        sb.$pageEl.off('page:beforeout', onPageBeforeOut);\n        sb.$pageEl.off('page:beforein', onPageBeforeIn);\n      }\n\n      sb.$inputEl.off('focus', onInputFocus);\n      sb.$inputEl.off('blur', onInputBlur);\n      sb.$inputEl.off(sb.params.inputEvents, onInputChange);\n      sb.$inputEl.off('input:clear', onInputClear);\n    }; // Install Modules\n\n\n    sb.useModules(); // Init\n\n    sb.init();\n    return sb;\n  }\n\n  clear(e) {\n    const sb = this;\n\n    if (!sb.query && e && $(e.target).hasClass('searchbar-clear')) {\n      sb.disable();\n      return sb;\n    }\n\n    const previousQuery = sb.value;\n    sb.$inputEl.val('').trigger('change').focus();\n    sb.$el.trigger('searchbar:clear', previousQuery);\n    sb.emit('local::clear searchbarClear', sb, previousQuery);\n    return sb;\n  }\n\n  setDisableButtonMargin() {\n    const sb = this;\n    if (sb.expandable) return;\n    const app = sb.app;\n    sb.$disableButtonEl.transition(0).show();\n    sb.$disableButtonEl.css(`margin-${app.rtl ? 'left' : 'right'}`, `${-sb.disableButtonEl.offsetWidth}px`);\n    /* eslint no-underscore-dangle: [\"error\", { \"allow\": [\"_clientLeft\"] }] */\n\n    sb._clientLeft = sb.$disableButtonEl[0].clientLeft;\n    sb.$disableButtonEl.transition('');\n    sb.disableButtonHasMargin = true;\n  }\n\n  enable(setFocus) {\n    const sb = this;\n    if (sb.enabled) return sb;\n    const app = sb.app;\n    const document = getDocument();\n    const device = getDevice();\n    sb.enabled = true;\n\n    function enable() {\n      if (sb.$backdropEl && (sb.$searchContainer && sb.$searchContainer.length || sb.params.customSearch) && !sb.$el.hasClass('searchbar-enabled') && !sb.query) {\n        sb.backdropShow();\n      }\n\n      sb.$el.addClass('searchbar-enabled');\n\n      if (!sb.$disableButtonEl || sb.$disableButtonEl && sb.$disableButtonEl.length === 0) {\n        sb.$el.addClass('searchbar-enabled-no-disable-button');\n      }\n\n      if (!sb.expandable && sb.$disableButtonEl && sb.$disableButtonEl.length > 0 && app.theme !== 'md') {\n        if (!sb.disableButtonHasMargin) {\n          sb.setDisableButtonMargin();\n        }\n\n        sb.$disableButtonEl.css(`margin-${app.rtl ? 'left' : 'right'}`, '0px');\n      }\n\n      if (sb.expandable) {\n        const $navbarEl = sb.$el.parents('.navbar');\n\n        if ($navbarEl.hasClass('navbar-large') && sb.$pageEl) {\n          const $pageContentEl = sb.$pageEl.find('.page-content');\n          const $titleLargeEl = $navbarEl.find('.title-large');\n          $pageContentEl.addClass('with-searchbar-expandable-enabled');\n\n          if ($navbarEl.hasClass('navbar-large') && $navbarEl.hasClass('navbar-large-collapsed') && $titleLargeEl.length && $pageContentEl.length) {\n            $pageContentEl.transition(0);\n            $pageContentEl[0].scrollTop -= $titleLargeEl[0].offsetHeight;\n            setTimeout(() => {\n              $pageContentEl.transition('');\n            }, 200);\n          }\n        }\n\n        if (app.theme === 'md' && $navbarEl.length) {\n          $navbarEl.addClass('with-searchbar-expandable-enabled');\n        } else {\n          $navbarEl.addClass('with-searchbar-expandable-enabled');\n\n          if ($navbarEl.hasClass('navbar-large')) {\n            $navbarEl.addClass('navbar-large-collapsed');\n          }\n        }\n      }\n\n      if (sb.$hideOnEnableEl) sb.$hideOnEnableEl.addClass('hidden-by-searchbar');\n      sb.$el.trigger('searchbar:enable');\n      sb.emit('local::enable searchbarEnable', sb);\n    }\n\n    let needsFocus = false;\n\n    if (setFocus === true) {\n      if (document.activeElement !== sb.inputEl) {\n        needsFocus = true;\n      }\n    }\n\n    const isIos = device.ios && app.theme === 'ios';\n\n    if (isIos) {\n      if (sb.expandable) {\n        if (needsFocus) sb.$inputEl.focus();\n        enable();\n      } else {\n        if (needsFocus) sb.$inputEl.focus();\n\n        if (setFocus && (setFocus.type === 'focus' || setFocus === true)) {\n          nextTick(() => {\n            enable();\n          }, 400);\n        } else {\n          enable();\n        }\n      }\n    } else {\n      if (needsFocus) sb.$inputEl.focus();\n\n      if (app.theme === 'md' && sb.expandable) {\n        sb.$el.parents('.page, .view, .navbar-inner, .navbar').scrollLeft(app.rtl ? 100 : 0);\n      }\n\n      enable();\n    }\n\n    return sb;\n  }\n\n  disable() {\n    const sb = this;\n    if (!sb.enabled) return sb;\n    const app = sb.app;\n    sb.$inputEl.val('').trigger('change');\n    sb.$el.removeClass('searchbar-enabled searchbar-focused searchbar-enabled-no-disable-button');\n\n    if (sb.expandable) {\n      const $navbarEl = sb.$el.parents('.navbar');\n      const $pageContentEl = sb.$pageEl && sb.$pageEl.find('.page-content');\n\n      if ($navbarEl.hasClass('navbar-large') && $pageContentEl.length) {\n        const $titleLargeEl = $navbarEl.find('.title-large');\n        sb.$el.transitionEnd(() => {\n          $pageContentEl.removeClass('with-searchbar-expandable-closing');\n        });\n\n        if ($navbarEl.hasClass('navbar-large') && $navbarEl.hasClass('navbar-large-collapsed') && $titleLargeEl.length) {\n          const scrollTop = $pageContentEl[0].scrollTop;\n          const titleLargeHeight = $titleLargeEl[0].offsetHeight;\n\n          if (scrollTop > titleLargeHeight) {\n            $pageContentEl.transition(0);\n            $pageContentEl[0].scrollTop = scrollTop + titleLargeHeight;\n            setTimeout(() => {\n              $pageContentEl.transition('');\n            }, 200);\n          }\n        }\n\n        $pageContentEl.removeClass('with-searchbar-expandable-enabled').addClass('with-searchbar-expandable-closing');\n      }\n\n      if (app.theme === 'md' && $navbarEl.length) {\n        $navbarEl.removeClass('with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition').addClass('with-searchbar-expandable-closing');\n        sb.$el.transitionEnd(() => {\n          $navbarEl.removeClass('with-searchbar-expandable-closing');\n        });\n      } else {\n        $navbarEl.removeClass('with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition').addClass('with-searchbar-expandable-closing');\n        sb.$el.transitionEnd(() => {\n          $navbarEl.removeClass('with-searchbar-expandable-closing');\n        });\n\n        if (sb.$pageEl) {\n          sb.$pageEl.find('.page-content').trigger('scroll');\n        }\n      }\n    }\n\n    if (!sb.expandable && sb.$disableButtonEl && sb.$disableButtonEl.length > 0 && app.theme !== 'md') {\n      sb.$disableButtonEl.css(`margin-${app.rtl ? 'left' : 'right'}`, `${-sb.disableButtonEl.offsetWidth}px`);\n    }\n\n    if (sb.$backdropEl && (sb.$searchContainer && sb.$searchContainer.length || sb.params.customSearch)) {\n      sb.backdropHide();\n    }\n\n    sb.enabled = false;\n    sb.$inputEl.blur();\n    if (sb.$hideOnEnableEl) sb.$hideOnEnableEl.removeClass('hidden-by-searchbar');\n    sb.$el.trigger('searchbar:disable');\n    sb.emit('local::disable searchbarDisable', sb);\n    return sb;\n  }\n\n  toggle() {\n    const sb = this;\n    if (sb.enabled) sb.disable();else sb.enable(true);\n    return sb;\n  }\n\n  backdropShow() {\n    const sb = this;\n\n    if (sb.$backdropEl) {\n      sb.$backdropEl.addClass('searchbar-backdrop-in');\n    }\n\n    return sb;\n  }\n\n  backdropHide() {\n    const sb = this;\n\n    if (sb.$backdropEl) {\n      sb.$backdropEl.removeClass('searchbar-backdrop-in');\n    }\n\n    return sb;\n  }\n\n  search(query, internal) {\n    const sb = this;\n    sb.previousQuery = sb.query || '';\n    if (query === sb.previousQuery) return sb;\n\n    if (!internal) {\n      if (!sb.enabled) {\n        sb.enable();\n      }\n\n      sb.$inputEl.val(query);\n      sb.$inputEl.trigger('input');\n    }\n\n    sb.query = query;\n    sb.value = query;\n    const {\n      $searchContainer,\n      $el,\n      $foundEl,\n      $notFoundEl,\n      $hideOnSearchEl,\n      isVirtualList\n    } = sb; // Hide on search element\n\n    if (query.length > 0 && $hideOnSearchEl) {\n      $hideOnSearchEl.addClass('hidden-by-searchbar');\n    } else if ($hideOnSearchEl) {\n      $hideOnSearchEl.removeClass('hidden-by-searchbar');\n    } // Add active/inactive classes on overlay\n\n\n    if ($searchContainer && $searchContainer.length && $el.hasClass('searchbar-enabled') || sb.params.customSearch && $el.hasClass('searchbar-enabled')) {\n      if (query.length === 0) {\n        sb.backdropShow();\n      } else {\n        sb.backdropHide();\n      }\n    }\n\n    if (sb.params.customSearch) {\n      $el.trigger('searchbar:search', {\n        query,\n        previousQuery: sb.previousQuery\n      });\n      sb.emit('local::search searchbarSearch', sb, query, sb.previousQuery);\n      return sb;\n    }\n\n    let foundItems = [];\n    let vlQuery;\n\n    if (isVirtualList) {\n      sb.virtualList = $searchContainer[0].f7VirtualList;\n\n      if (query.trim() === '') {\n        sb.virtualList.resetFilter();\n        if ($notFoundEl) $notFoundEl.hide();\n        if ($foundEl) $foundEl.show();\n        $el.trigger('searchbar:search', {\n          query,\n          previousQuery: sb.previousQuery\n        });\n        sb.emit('local::search searchbarSearch', sb, query, sb.previousQuery);\n        return sb;\n      }\n\n      vlQuery = sb.params.removeDiacritics ? removeDiacritics(query) : query;\n\n      if (sb.virtualList.params.searchAll) {\n        foundItems = sb.virtualList.params.searchAll(vlQuery, sb.virtualList.items) || [];\n      } else if (sb.virtualList.params.searchByItem) {\n        for (let i = 0; i < sb.virtualList.items.length; i += 1) {\n          if (sb.virtualList.params.searchByItem(vlQuery, sb.virtualList.items[i], i)) {\n            foundItems.push(i);\n          }\n        }\n      }\n    } else {\n      let values;\n      if (sb.params.removeDiacritics) values = removeDiacritics(query.trim().toLowerCase()).split(' ');else {\n        values = query.trim().toLowerCase().split(' ');\n      }\n      $searchContainer.find(sb.params.searchItem).removeClass('hidden-by-searchbar').each(itemEl => {\n        const $itemEl = $(itemEl);\n        let compareWithText = [];\n        let $searchIn = sb.params.searchIn ? $itemEl.find(sb.params.searchIn) : $itemEl;\n\n        if (sb.params.searchIn === sb.params.searchItem) {\n          $searchIn = $itemEl;\n        }\n\n        $searchIn.each(searchInEl => {\n          let itemText = $(searchInEl).text().trim().toLowerCase();\n          if (sb.params.removeDiacritics) itemText = removeDiacritics(itemText);\n          compareWithText.push(itemText);\n        });\n        compareWithText = compareWithText.join(' ');\n        let wordsMatch = 0;\n\n        for (let i = 0; i < values.length; i += 1) {\n          if (compareWithText.indexOf(values[i]) >= 0) wordsMatch += 1;\n        }\n\n        if (wordsMatch !== values.length && !(sb.params.ignore && $itemEl.is(sb.params.ignore))) {\n          $itemEl.addClass('hidden-by-searchbar');\n        } else {\n          foundItems.push($itemEl[0]);\n        }\n      });\n\n      if (sb.params.hideDividers) {\n        $searchContainer.find(sb.params.searchGroupTitle).each(titleEl => {\n          const $titleEl = $(titleEl);\n          const $nextElements = $titleEl.nextAll(sb.params.searchItem);\n          let hide = true;\n\n          for (let i = 0; i < $nextElements.length; i += 1) {\n            const $nextEl = $nextElements.eq(i);\n            if ($nextEl.is(sb.params.searchGroupTitle)) break;\n\n            if (!$nextEl.hasClass('hidden-by-searchbar')) {\n              hide = false;\n            }\n          }\n\n          const ignore = sb.params.ignore && $titleEl.is(sb.params.ignore);\n          if (hide && !ignore) $titleEl.addClass('hidden-by-searchbar');else $titleEl.removeClass('hidden-by-searchbar');\n        });\n      }\n\n      if (sb.params.hideGroups) {\n        $searchContainer.find(sb.params.searchGroup).each(groupEl => {\n          const $groupEl = $(groupEl);\n          const ignore = sb.params.ignore && $groupEl.is(sb.params.ignore); // eslint-disable-next-line\n\n          const notHidden = $groupEl.find(sb.params.searchItem).filter(el => {\n            return !$(el).hasClass('hidden-by-searchbar');\n          });\n\n          if (notHidden.length === 0 && !ignore) {\n            $groupEl.addClass('hidden-by-searchbar');\n          } else {\n            $groupEl.removeClass('hidden-by-searchbar');\n          }\n        });\n      }\n    }\n\n    if (foundItems.length === 0) {\n      if ($notFoundEl) $notFoundEl.show();\n      if ($foundEl) $foundEl.hide();\n    } else {\n      if ($notFoundEl) $notFoundEl.hide();\n      if ($foundEl) $foundEl.show();\n    }\n\n    if (isVirtualList && sb.virtualList) {\n      sb.virtualList.filterItems(foundItems);\n    }\n\n    $el.trigger('searchbar:search', {\n      query,\n      previousQuery: sb.previousQuery,\n      foundItems\n    });\n    sb.emit('local::search searchbarSearch', sb, query, sb.previousQuery, foundItems);\n    return sb;\n  }\n\n  init() {\n    const sb = this;\n    if (sb.expandable && sb.$el) sb.$el.addClass('searchbar-expandable');\n    if (sb.inline && sb.$el) sb.$el.addClass('searchbar-inline');\n    sb.attachEvents();\n  }\n\n  destroy() {\n    const sb = this;\n    sb.emit('local::beforeDestroy searchbarBeforeDestroy', sb);\n    sb.$el.trigger('searchbar:beforedestroy');\n    sb.detachEvents();\n\n    if (sb.$el[0]) {\n      sb.$el[0].f7Searchbar = null;\n      delete sb.$el[0].f7Searchbar;\n    }\n\n    deleteProps(sb);\n  }\n\n}\n\nexport default Searchbar;","map":{"version":3,"names":["getDocument","$","extend","nextTick","deleteProps","FrameworkClass","getDevice","removeDiacritics","Searchbar","constructor","app","params","sb","defaults","el","undefined","inputEl","inputEvents","disableButton","disableButtonEl","backdropEl","searchContainer","searchItem","searchIn","searchGroup","searchGroupTitle","ignore","foundEl","notFoundEl","hideOnEnableEl","hideOnSearchEl","backdrop","customSearch","hideDividers","hideGroups","disableOnBackdropClick","expandable","inline","useModulesParams","$el","length","f7Searchbar","$pageEl","$navbarEl","parents","navbar","getPageByEl","$currentPageEl","find","f7Page","navbarEl","$foundEl","$notFoundEl","$hideOnEnableEl","$hideOnSearchEl","hasClass","theme","$backdropEl","siblings","insertBefore","eq","$searchContainer","$inputEl","$disableButtonEl","view","views","get","disableButtonHasMargin","pageEl","previousQuery","query","isVirtualList","virtualList","enabled","preventSubmit","e","preventDefault","onInputFocus","enable","addClass","onInputBlur","removeClass","disable","onInputChange","value","val","trim","search","onInputClear","previousValue","trigger","emit","disableOnClick","onPageBeforeOut","onPageBeforeIn","attachEvents","on","detachEvents","off","useModules","init","clear","target","focus","setDisableButtonMargin","transition","show","css","rtl","offsetWidth","_clientLeft","clientLeft","setFocus","document","device","backdropShow","$pageContentEl","$titleLargeEl","scrollTop","offsetHeight","setTimeout","needsFocus","activeElement","isIos","ios","type","scrollLeft","transitionEnd","titleLargeHeight","backdropHide","blur","toggle","internal","foundItems","vlQuery","f7VirtualList","resetFilter","hide","searchAll","items","searchByItem","i","push","values","toLowerCase","split","each","itemEl","$itemEl","compareWithText","$searchIn","searchInEl","itemText","text","join","wordsMatch","indexOf","is","titleEl","$titleEl","$nextElements","nextAll","$nextEl","groupEl","$groupEl","notHidden","filter","filterItems","destroy"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/components/searchbar/searchbar-class.js"],"sourcesContent":["import { getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7.js';\nimport { extend, nextTick, deleteProps } from '../../shared/utils.js';\nimport FrameworkClass from '../../shared/class.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport removeDiacritics from './remove-diacritics.js';\n\nclass Searchbar extends FrameworkClass {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const sb = this;\n    const defaults = {\n      el: undefined,\n      inputEl: undefined,\n      inputEvents: 'change input compositionend',\n      disableButton: true,\n      disableButtonEl: undefined,\n      backdropEl: undefined,\n      searchContainer: undefined,\n      // container to search, HTMLElement or CSS selector\n      searchItem: 'li',\n      // single item selector, CSS selector\n      searchIn: undefined,\n      // where to search in item, CSS selector\n      searchGroup: '.list-group',\n      searchGroupTitle: '.item-divider, .list-group-title',\n      ignore: '.searchbar-ignore',\n      foundEl: '.searchbar-found',\n      notFoundEl: '.searchbar-not-found',\n      hideOnEnableEl: '.searchbar-hide-on-enable',\n      hideOnSearchEl: '.searchbar-hide-on-search',\n      backdrop: undefined,\n      removeDiacritics: true,\n      customSearch: false,\n      hideDividers: true,\n      hideGroups: true,\n      disableOnBackdropClick: true,\n      expandable: false,\n      inline: false\n    }; // Extend defaults with modules params\n\n    sb.useModulesParams(defaults);\n    sb.params = extend(defaults, params);\n    const $el = $(sb.params.el);\n    if ($el.length === 0) return sb;\n    if ($el[0].f7Searchbar) return $el[0].f7Searchbar;\n    $el[0].f7Searchbar = sb;\n    let $pageEl;\n    const $navbarEl = $el.parents('.navbar');\n\n    if ($el.parents('.page').length > 0) {\n      $pageEl = $el.parents('.page');\n    } else if ($navbarEl.length > 0) {\n      $pageEl = $(app.navbar.getPageByEl($navbarEl[0]));\n\n      if (!$pageEl.length) {\n        const $currentPageEl = $el.parents('.view').find('.page-current');\n\n        if ($currentPageEl[0] && $currentPageEl[0].f7Page && $currentPageEl[0].f7Page.navbarEl === $navbarEl[0]) {\n          $pageEl = $currentPageEl;\n        }\n      }\n    }\n\n    let $foundEl;\n\n    if (params.foundEl) {\n      $foundEl = $(params.foundEl);\n    } else if (typeof sb.params.foundEl === 'string' && $pageEl) {\n      $foundEl = $pageEl.find(sb.params.foundEl);\n    }\n\n    let $notFoundEl;\n\n    if (params.notFoundEl) {\n      $notFoundEl = $(params.notFoundEl);\n    } else if (typeof sb.params.notFoundEl === 'string' && $pageEl) {\n      $notFoundEl = $pageEl.find(sb.params.notFoundEl);\n    }\n\n    let $hideOnEnableEl;\n\n    if (params.hideOnEnableEl) {\n      $hideOnEnableEl = $(params.hideOnEnableEl);\n    } else if (typeof sb.params.hideOnEnableEl === 'string' && $pageEl) {\n      $hideOnEnableEl = $pageEl.find(sb.params.hideOnEnableEl);\n    }\n\n    let $hideOnSearchEl;\n\n    if (params.hideOnSearchEl) {\n      $hideOnSearchEl = $(params.hideOnSearchEl);\n    } else if (typeof sb.params.hideOnSearchEl === 'string' && $pageEl) {\n      $hideOnSearchEl = $pageEl.find(sb.params.hideOnSearchEl);\n    }\n\n    const expandable = sb.params.expandable || $el.hasClass('searchbar-expandable');\n    const inline = sb.params.inline || $el.hasClass('searchbar-inline');\n\n    if (typeof sb.params.backdrop === 'undefined') {\n      if (!inline) sb.params.backdrop = app.theme !== 'aurora';else sb.params.backdrop = false;\n    }\n\n    let $backdropEl;\n\n    if (sb.params.backdrop) {\n      if (sb.params.backdropEl) {\n        $backdropEl = $(sb.params.backdropEl);\n      } else if ($pageEl && $pageEl.length > 0) {\n        $backdropEl = $pageEl.find('.searchbar-backdrop');\n      } else {\n        $backdropEl = $el.siblings('.searchbar-backdrop');\n      }\n\n      if ($backdropEl.length === 0) {\n        $backdropEl = $('<div class=\"searchbar-backdrop\"></div>');\n\n        if ($pageEl && $pageEl.length) {\n          if ($el.parents($pageEl).length > 0 && $navbarEl && $el.parents($navbarEl).length === 0) {\n            $backdropEl.insertBefore($el);\n          } else {\n            $backdropEl.insertBefore($pageEl.find('.page-content').eq(0));\n          }\n        } else {\n          $backdropEl.insertBefore($el);\n        }\n      }\n    }\n\n    let $searchContainer;\n\n    if (sb.params.searchContainer) {\n      $searchContainer = $(sb.params.searchContainer);\n    }\n\n    let $inputEl;\n\n    if (sb.params.inputEl) {\n      $inputEl = $(sb.params.inputEl);\n    } else {\n      $inputEl = $el.find('input[type=\"search\"]').eq(0);\n    }\n\n    let $disableButtonEl;\n\n    if (sb.params.disableButton) {\n      if (sb.params.disableButtonEl) {\n        $disableButtonEl = $(sb.params.disableButtonEl);\n      } else {\n        $disableButtonEl = $el.find('.searchbar-disable-button');\n      }\n    }\n\n    extend(sb, {\n      app,\n      view: app.views.get($el.parents('.view')),\n      $el,\n      el: $el[0],\n      $backdropEl,\n      backdropEl: $backdropEl && $backdropEl[0],\n      $searchContainer,\n      searchContainer: $searchContainer && $searchContainer[0],\n      $inputEl,\n      inputEl: $inputEl[0],\n      $disableButtonEl,\n      disableButtonEl: $disableButtonEl && $disableButtonEl[0],\n      disableButtonHasMargin: false,\n      $pageEl,\n      pageEl: $pageEl && $pageEl[0],\n      $navbarEl,\n      navbarEl: $navbarEl && $navbarEl[0],\n      $foundEl,\n      foundEl: $foundEl && $foundEl[0],\n      $notFoundEl,\n      notFoundEl: $notFoundEl && $notFoundEl[0],\n      $hideOnEnableEl,\n      hideOnEnableEl: $hideOnEnableEl && $hideOnEnableEl[0],\n      $hideOnSearchEl,\n      hideOnSearchEl: $hideOnSearchEl && $hideOnSearchEl[0],\n      previousQuery: '',\n      query: '',\n      isVirtualList: $searchContainer && $searchContainer.hasClass('virtual-list'),\n      virtualList: undefined,\n      enabled: false,\n      expandable,\n      inline\n    }); // Events\n\n    function preventSubmit(e) {\n      e.preventDefault();\n    }\n\n    function onInputFocus(e) {\n      sb.enable(e);\n      sb.$el.addClass('searchbar-focused');\n    }\n\n    function onInputBlur() {\n      sb.$el.removeClass('searchbar-focused');\n\n      if (app.theme === 'aurora' && (!$disableButtonEl || !$disableButtonEl.length || !sb.params.disableButton) && !sb.query) {\n        sb.disable();\n      }\n    }\n\n    function onInputChange() {\n      const value = sb.$inputEl.val().trim();\n\n      if (sb.$searchContainer && sb.$searchContainer.length > 0 && (sb.params.searchIn || sb.isVirtualList || sb.params.searchIn === sb.params.searchItem) || sb.params.customSearch) {\n        sb.search(value, true);\n      }\n    }\n\n    function onInputClear(e, previousValue) {\n      sb.$el.trigger('searchbar:clear', previousValue);\n      sb.emit('local::clear searchbarClear', sb, previousValue);\n    }\n\n    function disableOnClick(e) {\n      sb.disable(e);\n    }\n\n    function onPageBeforeOut() {\n      if (!sb || sb && !sb.$el) return;\n\n      if (sb.enabled) {\n        sb.$el.removeClass('searchbar-enabled');\n\n        if (sb.expandable) {\n          sb.$el.parents('.navbar').removeClass('with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition');\n        }\n      }\n    }\n\n    function onPageBeforeIn() {\n      if (!sb || sb && !sb.$el) return;\n\n      if (sb.enabled) {\n        sb.$el.addClass('searchbar-enabled');\n\n        if (sb.expandable) {\n          sb.$el.parents('.navbar').addClass('with-searchbar-expandable-enabled-no-transition');\n        }\n      }\n    }\n\n    sb.attachEvents = function attachEvents() {\n      $el.on('submit', preventSubmit);\n\n      if (sb.params.disableButton) {\n        sb.$disableButtonEl.on('click', disableOnClick);\n      }\n\n      if (sb.params.disableOnBackdropClick && sb.$backdropEl) {\n        sb.$backdropEl.on('click', disableOnClick);\n      }\n\n      if (sb.expandable && app.theme === 'ios' && sb.view && $navbarEl.length && sb.$pageEl) {\n        sb.$pageEl.on('page:beforeout', onPageBeforeOut);\n        sb.$pageEl.on('page:beforein', onPageBeforeIn);\n      }\n\n      sb.$inputEl.on('focus', onInputFocus);\n      sb.$inputEl.on('blur', onInputBlur);\n      sb.$inputEl.on(sb.params.inputEvents, onInputChange);\n      sb.$inputEl.on('input:clear', onInputClear);\n    };\n\n    sb.detachEvents = function detachEvents() {\n      $el.off('submit', preventSubmit);\n\n      if (sb.params.disableButton) {\n        sb.$disableButtonEl.off('click', disableOnClick);\n      }\n\n      if (sb.params.disableOnBackdropClick && sb.$backdropEl) {\n        sb.$backdropEl.off('click', disableOnClick);\n      }\n\n      if (sb.expandable && app.theme === 'ios' && sb.view && $navbarEl.length && sb.$pageEl) {\n        sb.$pageEl.off('page:beforeout', onPageBeforeOut);\n        sb.$pageEl.off('page:beforein', onPageBeforeIn);\n      }\n\n      sb.$inputEl.off('focus', onInputFocus);\n      sb.$inputEl.off('blur', onInputBlur);\n      sb.$inputEl.off(sb.params.inputEvents, onInputChange);\n      sb.$inputEl.off('input:clear', onInputClear);\n    }; // Install Modules\n\n\n    sb.useModules(); // Init\n\n    sb.init();\n    return sb;\n  }\n\n  clear(e) {\n    const sb = this;\n\n    if (!sb.query && e && $(e.target).hasClass('searchbar-clear')) {\n      sb.disable();\n      return sb;\n    }\n\n    const previousQuery = sb.value;\n    sb.$inputEl.val('').trigger('change').focus();\n    sb.$el.trigger('searchbar:clear', previousQuery);\n    sb.emit('local::clear searchbarClear', sb, previousQuery);\n    return sb;\n  }\n\n  setDisableButtonMargin() {\n    const sb = this;\n    if (sb.expandable) return;\n    const app = sb.app;\n    sb.$disableButtonEl.transition(0).show();\n    sb.$disableButtonEl.css(`margin-${app.rtl ? 'left' : 'right'}`, `${-sb.disableButtonEl.offsetWidth}px`);\n    /* eslint no-underscore-dangle: [\"error\", { \"allow\": [\"_clientLeft\"] }] */\n\n    sb._clientLeft = sb.$disableButtonEl[0].clientLeft;\n    sb.$disableButtonEl.transition('');\n    sb.disableButtonHasMargin = true;\n  }\n\n  enable(setFocus) {\n    const sb = this;\n    if (sb.enabled) return sb;\n    const app = sb.app;\n    const document = getDocument();\n    const device = getDevice();\n    sb.enabled = true;\n\n    function enable() {\n      if (sb.$backdropEl && (sb.$searchContainer && sb.$searchContainer.length || sb.params.customSearch) && !sb.$el.hasClass('searchbar-enabled') && !sb.query) {\n        sb.backdropShow();\n      }\n\n      sb.$el.addClass('searchbar-enabled');\n\n      if (!sb.$disableButtonEl || sb.$disableButtonEl && sb.$disableButtonEl.length === 0) {\n        sb.$el.addClass('searchbar-enabled-no-disable-button');\n      }\n\n      if (!sb.expandable && sb.$disableButtonEl && sb.$disableButtonEl.length > 0 && app.theme !== 'md') {\n        if (!sb.disableButtonHasMargin) {\n          sb.setDisableButtonMargin();\n        }\n\n        sb.$disableButtonEl.css(`margin-${app.rtl ? 'left' : 'right'}`, '0px');\n      }\n\n      if (sb.expandable) {\n        const $navbarEl = sb.$el.parents('.navbar');\n\n        if ($navbarEl.hasClass('navbar-large') && sb.$pageEl) {\n          const $pageContentEl = sb.$pageEl.find('.page-content');\n          const $titleLargeEl = $navbarEl.find('.title-large');\n          $pageContentEl.addClass('with-searchbar-expandable-enabled');\n\n          if ($navbarEl.hasClass('navbar-large') && $navbarEl.hasClass('navbar-large-collapsed') && $titleLargeEl.length && $pageContentEl.length) {\n            $pageContentEl.transition(0);\n            $pageContentEl[0].scrollTop -= $titleLargeEl[0].offsetHeight;\n            setTimeout(() => {\n              $pageContentEl.transition('');\n            }, 200);\n          }\n        }\n\n        if (app.theme === 'md' && $navbarEl.length) {\n          $navbarEl.addClass('with-searchbar-expandable-enabled');\n        } else {\n          $navbarEl.addClass('with-searchbar-expandable-enabled');\n\n          if ($navbarEl.hasClass('navbar-large')) {\n            $navbarEl.addClass('navbar-large-collapsed');\n          }\n        }\n      }\n\n      if (sb.$hideOnEnableEl) sb.$hideOnEnableEl.addClass('hidden-by-searchbar');\n      sb.$el.trigger('searchbar:enable');\n      sb.emit('local::enable searchbarEnable', sb);\n    }\n\n    let needsFocus = false;\n\n    if (setFocus === true) {\n      if (document.activeElement !== sb.inputEl) {\n        needsFocus = true;\n      }\n    }\n\n    const isIos = device.ios && app.theme === 'ios';\n\n    if (isIos) {\n      if (sb.expandable) {\n        if (needsFocus) sb.$inputEl.focus();\n        enable();\n      } else {\n        if (needsFocus) sb.$inputEl.focus();\n\n        if (setFocus && (setFocus.type === 'focus' || setFocus === true)) {\n          nextTick(() => {\n            enable();\n          }, 400);\n        } else {\n          enable();\n        }\n      }\n    } else {\n      if (needsFocus) sb.$inputEl.focus();\n\n      if (app.theme === 'md' && sb.expandable) {\n        sb.$el.parents('.page, .view, .navbar-inner, .navbar').scrollLeft(app.rtl ? 100 : 0);\n      }\n\n      enable();\n    }\n\n    return sb;\n  }\n\n  disable() {\n    const sb = this;\n    if (!sb.enabled) return sb;\n    const app = sb.app;\n    sb.$inputEl.val('').trigger('change');\n    sb.$el.removeClass('searchbar-enabled searchbar-focused searchbar-enabled-no-disable-button');\n\n    if (sb.expandable) {\n      const $navbarEl = sb.$el.parents('.navbar');\n      const $pageContentEl = sb.$pageEl && sb.$pageEl.find('.page-content');\n\n      if ($navbarEl.hasClass('navbar-large') && $pageContentEl.length) {\n        const $titleLargeEl = $navbarEl.find('.title-large');\n        sb.$el.transitionEnd(() => {\n          $pageContentEl.removeClass('with-searchbar-expandable-closing');\n        });\n\n        if ($navbarEl.hasClass('navbar-large') && $navbarEl.hasClass('navbar-large-collapsed') && $titleLargeEl.length) {\n          const scrollTop = $pageContentEl[0].scrollTop;\n          const titleLargeHeight = $titleLargeEl[0].offsetHeight;\n\n          if (scrollTop > titleLargeHeight) {\n            $pageContentEl.transition(0);\n            $pageContentEl[0].scrollTop = scrollTop + titleLargeHeight;\n            setTimeout(() => {\n              $pageContentEl.transition('');\n            }, 200);\n          }\n        }\n\n        $pageContentEl.removeClass('with-searchbar-expandable-enabled').addClass('with-searchbar-expandable-closing');\n      }\n\n      if (app.theme === 'md' && $navbarEl.length) {\n        $navbarEl.removeClass('with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition').addClass('with-searchbar-expandable-closing');\n        sb.$el.transitionEnd(() => {\n          $navbarEl.removeClass('with-searchbar-expandable-closing');\n        });\n      } else {\n        $navbarEl.removeClass('with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition').addClass('with-searchbar-expandable-closing');\n        sb.$el.transitionEnd(() => {\n          $navbarEl.removeClass('with-searchbar-expandable-closing');\n        });\n\n        if (sb.$pageEl) {\n          sb.$pageEl.find('.page-content').trigger('scroll');\n        }\n      }\n    }\n\n    if (!sb.expandable && sb.$disableButtonEl && sb.$disableButtonEl.length > 0 && app.theme !== 'md') {\n      sb.$disableButtonEl.css(`margin-${app.rtl ? 'left' : 'right'}`, `${-sb.disableButtonEl.offsetWidth}px`);\n    }\n\n    if (sb.$backdropEl && (sb.$searchContainer && sb.$searchContainer.length || sb.params.customSearch)) {\n      sb.backdropHide();\n    }\n\n    sb.enabled = false;\n    sb.$inputEl.blur();\n    if (sb.$hideOnEnableEl) sb.$hideOnEnableEl.removeClass('hidden-by-searchbar');\n    sb.$el.trigger('searchbar:disable');\n    sb.emit('local::disable searchbarDisable', sb);\n    return sb;\n  }\n\n  toggle() {\n    const sb = this;\n    if (sb.enabled) sb.disable();else sb.enable(true);\n    return sb;\n  }\n\n  backdropShow() {\n    const sb = this;\n\n    if (sb.$backdropEl) {\n      sb.$backdropEl.addClass('searchbar-backdrop-in');\n    }\n\n    return sb;\n  }\n\n  backdropHide() {\n    const sb = this;\n\n    if (sb.$backdropEl) {\n      sb.$backdropEl.removeClass('searchbar-backdrop-in');\n    }\n\n    return sb;\n  }\n\n  search(query, internal) {\n    const sb = this;\n    sb.previousQuery = sb.query || '';\n    if (query === sb.previousQuery) return sb;\n\n    if (!internal) {\n      if (!sb.enabled) {\n        sb.enable();\n      }\n\n      sb.$inputEl.val(query);\n      sb.$inputEl.trigger('input');\n    }\n\n    sb.query = query;\n    sb.value = query;\n    const {\n      $searchContainer,\n      $el,\n      $foundEl,\n      $notFoundEl,\n      $hideOnSearchEl,\n      isVirtualList\n    } = sb; // Hide on search element\n\n    if (query.length > 0 && $hideOnSearchEl) {\n      $hideOnSearchEl.addClass('hidden-by-searchbar');\n    } else if ($hideOnSearchEl) {\n      $hideOnSearchEl.removeClass('hidden-by-searchbar');\n    } // Add active/inactive classes on overlay\n\n\n    if ($searchContainer && $searchContainer.length && $el.hasClass('searchbar-enabled') || sb.params.customSearch && $el.hasClass('searchbar-enabled')) {\n      if (query.length === 0) {\n        sb.backdropShow();\n      } else {\n        sb.backdropHide();\n      }\n    }\n\n    if (sb.params.customSearch) {\n      $el.trigger('searchbar:search', {\n        query,\n        previousQuery: sb.previousQuery\n      });\n      sb.emit('local::search searchbarSearch', sb, query, sb.previousQuery);\n      return sb;\n    }\n\n    let foundItems = [];\n    let vlQuery;\n\n    if (isVirtualList) {\n      sb.virtualList = $searchContainer[0].f7VirtualList;\n\n      if (query.trim() === '') {\n        sb.virtualList.resetFilter();\n        if ($notFoundEl) $notFoundEl.hide();\n        if ($foundEl) $foundEl.show();\n        $el.trigger('searchbar:search', {\n          query,\n          previousQuery: sb.previousQuery\n        });\n        sb.emit('local::search searchbarSearch', sb, query, sb.previousQuery);\n        return sb;\n      }\n\n      vlQuery = sb.params.removeDiacritics ? removeDiacritics(query) : query;\n\n      if (sb.virtualList.params.searchAll) {\n        foundItems = sb.virtualList.params.searchAll(vlQuery, sb.virtualList.items) || [];\n      } else if (sb.virtualList.params.searchByItem) {\n        for (let i = 0; i < sb.virtualList.items.length; i += 1) {\n          if (sb.virtualList.params.searchByItem(vlQuery, sb.virtualList.items[i], i)) {\n            foundItems.push(i);\n          }\n        }\n      }\n    } else {\n      let values;\n      if (sb.params.removeDiacritics) values = removeDiacritics(query.trim().toLowerCase()).split(' ');else {\n        values = query.trim().toLowerCase().split(' ');\n      }\n      $searchContainer.find(sb.params.searchItem).removeClass('hidden-by-searchbar').each(itemEl => {\n        const $itemEl = $(itemEl);\n        let compareWithText = [];\n        let $searchIn = sb.params.searchIn ? $itemEl.find(sb.params.searchIn) : $itemEl;\n\n        if (sb.params.searchIn === sb.params.searchItem) {\n          $searchIn = $itemEl;\n        }\n\n        $searchIn.each(searchInEl => {\n          let itemText = $(searchInEl).text().trim().toLowerCase();\n          if (sb.params.removeDiacritics) itemText = removeDiacritics(itemText);\n          compareWithText.push(itemText);\n        });\n        compareWithText = compareWithText.join(' ');\n        let wordsMatch = 0;\n\n        for (let i = 0; i < values.length; i += 1) {\n          if (compareWithText.indexOf(values[i]) >= 0) wordsMatch += 1;\n        }\n\n        if (wordsMatch !== values.length && !(sb.params.ignore && $itemEl.is(sb.params.ignore))) {\n          $itemEl.addClass('hidden-by-searchbar');\n        } else {\n          foundItems.push($itemEl[0]);\n        }\n      });\n\n      if (sb.params.hideDividers) {\n        $searchContainer.find(sb.params.searchGroupTitle).each(titleEl => {\n          const $titleEl = $(titleEl);\n          const $nextElements = $titleEl.nextAll(sb.params.searchItem);\n          let hide = true;\n\n          for (let i = 0; i < $nextElements.length; i += 1) {\n            const $nextEl = $nextElements.eq(i);\n            if ($nextEl.is(sb.params.searchGroupTitle)) break;\n\n            if (!$nextEl.hasClass('hidden-by-searchbar')) {\n              hide = false;\n            }\n          }\n\n          const ignore = sb.params.ignore && $titleEl.is(sb.params.ignore);\n          if (hide && !ignore) $titleEl.addClass('hidden-by-searchbar');else $titleEl.removeClass('hidden-by-searchbar');\n        });\n      }\n\n      if (sb.params.hideGroups) {\n        $searchContainer.find(sb.params.searchGroup).each(groupEl => {\n          const $groupEl = $(groupEl);\n          const ignore = sb.params.ignore && $groupEl.is(sb.params.ignore); // eslint-disable-next-line\n\n          const notHidden = $groupEl.find(sb.params.searchItem).filter(el => {\n            return !$(el).hasClass('hidden-by-searchbar');\n          });\n\n          if (notHidden.length === 0 && !ignore) {\n            $groupEl.addClass('hidden-by-searchbar');\n          } else {\n            $groupEl.removeClass('hidden-by-searchbar');\n          }\n        });\n      }\n    }\n\n    if (foundItems.length === 0) {\n      if ($notFoundEl) $notFoundEl.show();\n      if ($foundEl) $foundEl.hide();\n    } else {\n      if ($notFoundEl) $notFoundEl.hide();\n      if ($foundEl) $foundEl.show();\n    }\n\n    if (isVirtualList && sb.virtualList) {\n      sb.virtualList.filterItems(foundItems);\n    }\n\n    $el.trigger('searchbar:search', {\n      query,\n      previousQuery: sb.previousQuery,\n      foundItems\n    });\n    sb.emit('local::search searchbarSearch', sb, query, sb.previousQuery, foundItems);\n    return sb;\n  }\n\n  init() {\n    const sb = this;\n    if (sb.expandable && sb.$el) sb.$el.addClass('searchbar-expandable');\n    if (sb.inline && sb.$el) sb.$el.addClass('searchbar-inline');\n    sb.attachEvents();\n  }\n\n  destroy() {\n    const sb = this;\n    sb.emit('local::beforeDestroy searchbarBeforeDestroy', sb);\n    sb.$el.trigger('searchbar:beforedestroy');\n    sb.detachEvents();\n\n    if (sb.$el[0]) {\n      sb.$el[0].f7Searchbar = null;\n      delete sb.$el[0].f7Searchbar;\n    }\n\n    deleteProps(sb);\n  }\n\n}\n\nexport default Searchbar;"],"mappings":"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"},"metadata":{},"sourceType":"module"}