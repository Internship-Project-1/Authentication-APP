{"ast":null,"code":"import { extend, colorRgbToHex, colorRgbToHsl, colorHslToHsb, colorHslToRgb, colorHsbToHsl, colorHexToRgb, nextTick, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\nimport $ from '../../shared/dom7.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport moduleAlphaSlider from './modules/alpha-slider.js';\nimport moduleCurrentColor from './modules/current-color.js';\nimport moduleHex from './modules/hex.js';\nimport moduleHsbSliders from './modules/hsb-sliders.js';\nimport moduleHueSlider from './modules/hue-slider.js';\nimport moduleBrightnessSlider from './modules/brightness-slider.js';\nimport modulePalette from './modules/palette.js';\nimport moduleInitialCurrentColors from './modules/initial-current-colors.js';\nimport moduleRgbBars from './modules/rgb-bars.js';\nimport moduleRgbSliders from './modules/rgb-sliders.js';\nimport moduleSbSpectrum from './modules/sb-spectrum.js';\nimport moduleHsSpectrum from './modules/hs-spectrum.js';\nimport moduleWheel from './modules/wheel.js';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx.js';\n\nclass ColorPicker extends Framework7Class {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const self = this;\n    self.params = extend({}, app.params.colorPicker, params);\n    let $containerEl;\n\n    if (self.params.containerEl) {\n      $containerEl = $(self.params.containerEl);\n      if ($containerEl.length === 0) return self;\n    }\n\n    let $inputEl;\n\n    if (self.params.inputEl) {\n      $inputEl = $(self.params.inputEl);\n    }\n\n    let $targetEl;\n\n    if (self.params.targetEl) {\n      $targetEl = $(self.params.targetEl);\n    }\n\n    extend(self, {\n      app,\n      $containerEl,\n      containerEl: $containerEl && $containerEl[0],\n      inline: $containerEl && $containerEl.length > 0,\n      $inputEl,\n      inputEl: $inputEl && $inputEl[0],\n      $targetEl,\n      targetEl: $targetEl && $targetEl[0],\n      initialized: false,\n      opened: false,\n      url: self.params.url,\n      modules: {\n        'alpha-slider': moduleAlphaSlider,\n        'current-color': moduleCurrentColor,\n        hex: moduleHex,\n        // eslint-disable-line\n        'hsb-sliders': moduleHsbSliders,\n        'hue-slider': moduleHueSlider,\n        'brightness-slider': moduleBrightnessSlider,\n        palette: modulePalette,\n        // eslint-disable-line\n        'initial-current-colors': moduleInitialCurrentColors,\n        'rgb-bars': moduleRgbBars,\n        'rgb-sliders': moduleRgbSliders,\n        'sb-spectrum': moduleSbSpectrum,\n        'hs-spectrum': moduleHsSpectrum,\n        wheel: moduleWheel // eslint-disable-line\n\n      }\n    });\n\n    function onInputClick() {\n      self.open();\n    }\n\n    function onInputFocus(e) {\n      e.preventDefault();\n    }\n\n    function onTargetClick() {\n      self.open();\n    }\n\n    function onHtmlClick(e) {\n      if (self.destroyed || !self.params) return;\n      if (self.params.openIn === 'page') return;\n      const $clickTargetEl = $(e.target);\n      if (!self.opened || self.closing) return;\n      if ($clickTargetEl.closest('[class*=\"backdrop\"]').length) return;\n      if ($clickTargetEl.closest('.color-picker-popup, .color-picker-popover').length) return;\n\n      if ($inputEl && $inputEl.length > 0) {\n        if ($clickTargetEl[0] !== $inputEl[0] && $clickTargetEl.closest('.sheet-modal').length === 0) {\n          self.close();\n        }\n      } else if ($(e.target).closest('.sheet-modal').length === 0) {\n        self.close();\n      }\n    } // Events\n\n\n    extend(self, {\n      attachInputEvents() {\n        self.$inputEl.on('click', onInputClick);\n\n        if (self.params.inputReadOnly) {\n          self.$inputEl.on('focus mousedown', onInputFocus);\n\n          if (self.$inputEl[0]) {\n            self.$inputEl[0].f7ValidateReadonly = true;\n          }\n        }\n      },\n\n      detachInputEvents() {\n        self.$inputEl.off('click', onInputClick);\n\n        if (self.params.inputReadOnly) {\n          self.$inputEl.off('focus mousedown', onInputFocus);\n\n          if (self.$inputEl[0]) {\n            delete self.$inputEl[0].f7ValidateReadonly;\n          }\n        }\n      },\n\n      attachTargetEvents() {\n        self.$targetEl.on('click', onTargetClick);\n      },\n\n      detachTargetEvents() {\n        self.$targetEl.off('click', onTargetClick);\n      },\n\n      attachHtmlEvents() {\n        app.on('click', onHtmlClick);\n      },\n\n      detachHtmlEvents() {\n        app.off('click', onHtmlClick);\n      }\n\n    });\n    self.init();\n    return self;\n  }\n\n  get view() {\n    const {\n      $inputEl,\n      $targetEl,\n      app,\n      params\n    } = this;\n    let view;\n\n    if (params.view) {\n      view = params.view;\n    } else {\n      if ($inputEl) {\n        view = $inputEl.parents('.view').length && $inputEl.parents('.view')[0].f7View;\n      }\n\n      if (!view && $targetEl) {\n        view = $targetEl.parents('.view').length && $targetEl.parents('.view')[0].f7View;\n      }\n    }\n\n    if (!view) view = app.views.main;\n    return view;\n  }\n\n  attachEvents() {\n    const self = this;\n    self.centerModules = self.centerModules.bind(self);\n\n    if (self.params.centerModules) {\n      self.app.on('resize', self.centerModules);\n    }\n  }\n\n  detachEvents() {\n    const self = this;\n\n    if (self.params.centerModules) {\n      self.app.off('resize', self.centerModules);\n    }\n  }\n\n  centerModules() {\n    const self = this;\n    if (!self.opened || !self.$el || self.inline) return;\n    const $pageContentEl = self.$el.find('.page-content');\n    if (!$pageContentEl.length) return;\n    const {\n      scrollHeight,\n      offsetHeight\n    } = $pageContentEl[0];\n\n    if (scrollHeight <= offsetHeight) {\n      $pageContentEl.addClass('justify-content-center');\n    } else {\n      $pageContentEl.removeClass('justify-content-center');\n    }\n  }\n\n  initInput() {\n    const self = this;\n    if (!self.$inputEl) return;\n    if (self.params.inputReadOnly) self.$inputEl.prop('readOnly', true);\n  }\n\n  getModalType() {\n    const self = this;\n    const {\n      app,\n      modal,\n      params\n    } = self;\n    const {\n      openIn,\n      openInPhone\n    } = params;\n    const device = getDevice();\n    if (modal && modal.type) return modal.type;\n    if (openIn !== 'auto') return openIn;\n    if (self.inline) return null;\n\n    if (device.ios) {\n      return device.ipad ? 'popover' : openInPhone;\n    }\n\n    if (app.width >= 768 || device.desktop && app.theme === 'aurora') {\n      return 'popover';\n    }\n\n    return openInPhone;\n  }\n\n  formatValue() {\n    const self = this;\n    const {\n      value\n    } = self;\n\n    if (self.params.formatValue) {\n      return self.params.formatValue.call(self, value);\n    }\n\n    return value.hex;\n  } // eslint-disable-next-line\n\n\n  normalizeHsValues(arr) {\n    return [Math.floor(arr[0] * 10) / 10, Math.floor(arr[1] * 1000) / 1000, Math.floor(arr[2] * 1000) / 1000];\n  }\n\n  setValue(value, updateModules) {\n    if (value === void 0) {\n      value = {};\n    }\n\n    if (updateModules === void 0) {\n      updateModules = true;\n    }\n\n    const self = this;\n    if (typeof value === 'undefined') return;\n    let {\n      hex,\n      rgb,\n      hsl,\n      hsb,\n      alpha = 1,\n      hue,\n      rgba,\n      hsla\n    } = self.value || {};\n    const needChangeEvent = self.value || !self.value && !self.params.value;\n    let valueChanged;\n    Object.keys(value).forEach(k => {\n      if (!self.value || typeof self.value[k] === 'undefined') {\n        valueChanged = true;\n        return;\n      }\n\n      const v = value[k];\n\n      if (Array.isArray(v)) {\n        v.forEach((subV, subIndex) => {\n          if (subV !== self.value[k][subIndex]) {\n            valueChanged = true;\n          }\n        });\n      } else if (v !== self.value[k]) {\n        valueChanged = true;\n      }\n    });\n    if (!valueChanged) return;\n\n    if (value.rgb || value.rgba) {\n      const [r, g, b, a = alpha] = value.rgb || value.rgba;\n      rgb = [r, g, b];\n      hex = colorRgbToHex(...rgb);\n      hsl = colorRgbToHsl(...rgb);\n      hsb = colorHslToHsb(...hsl);\n      hsl = self.normalizeHsValues(hsl);\n      hsb = self.normalizeHsValues(hsb);\n      hue = hsb[0];\n      alpha = a;\n      rgba = [rgb[0], rgb[1], rgb[2], a];\n      hsla = [hsl[0], hsl[1], hsl[2], a];\n    }\n\n    if (value.hsl || value.hsla) {\n      const [h, s, l, a = alpha] = value.hsl || value.hsla;\n      hsl = [h, s, l];\n      rgb = colorHslToRgb(...hsl);\n      hex = colorRgbToHex(...rgb);\n      hsb = colorHslToHsb(...hsl);\n      hsl = self.normalizeHsValues(hsl);\n      hsb = self.normalizeHsValues(hsb);\n      hue = hsb[0];\n      alpha = a;\n      rgba = [rgb[0], rgb[1], rgb[2], a];\n      hsla = [hsl[0], hsl[1], hsl[2], a];\n    }\n\n    if (value.hsb) {\n      const [h, s, b, a = alpha] = value.hsb;\n      hsb = [h, s, b];\n      hsl = colorHsbToHsl(...hsb);\n      rgb = colorHslToRgb(...hsl);\n      hex = colorRgbToHex(...rgb);\n      hsl = self.normalizeHsValues(hsl);\n      hsb = self.normalizeHsValues(hsb);\n      hue = hsb[0];\n      alpha = a;\n      rgba = [rgb[0], rgb[1], rgb[2], a];\n      hsla = [hsl[0], hsl[1], hsl[2], a];\n    }\n\n    if (value.hex) {\n      rgb = colorHexToRgb(value.hex);\n      hex = colorRgbToHex(...rgb);\n      hsl = colorRgbToHsl(...rgb);\n      hsb = colorHslToHsb(...hsl);\n      hsl = self.normalizeHsValues(hsl);\n      hsb = self.normalizeHsValues(hsb);\n      hue = hsb[0];\n      rgba = [rgb[0], rgb[1], rgb[2], alpha];\n      hsla = [hsl[0], hsl[1], hsl[2], alpha];\n    }\n\n    if (typeof value.alpha !== 'undefined') {\n      alpha = value.alpha;\n\n      if (typeof rgb !== 'undefined') {\n        rgba = [rgb[0], rgb[1], rgb[2], alpha];\n      }\n\n      if (typeof hsl !== 'undefined') {\n        hsla = [hsl[0], hsl[1], hsl[2], alpha];\n      }\n    }\n\n    if (typeof value.hue !== 'undefined') {\n      const [h, s, l] = hsl; // eslint-disable-line\n\n      hsl = [value.hue, s, l];\n      hsb = colorHslToHsb(...hsl);\n      rgb = colorHslToRgb(...hsl);\n      hex = colorRgbToHex(...rgb);\n      hsl = self.normalizeHsValues(hsl);\n      hsb = self.normalizeHsValues(hsb);\n      hue = hsb[0];\n      rgba = [rgb[0], rgb[1], rgb[2], alpha];\n      hsla = [hsl[0], hsl[1], hsl[2], alpha];\n    }\n\n    self.value = {\n      hex,\n      alpha,\n      hue,\n      rgb,\n      hsl,\n      hsb,\n      rgba,\n      hsla\n    };\n    if (!self.initialValue) self.initialValue = extend({}, self.value);\n    self.updateValue(needChangeEvent);\n\n    if (self.opened && updateModules) {\n      self.updateModules();\n    }\n  }\n\n  getValue() {\n    const self = this;\n    return self.value;\n  }\n\n  updateValue(fireEvents) {\n    if (fireEvents === void 0) {\n      fireEvents = true;\n    }\n\n    const self = this;\n    const {\n      $inputEl,\n      value,\n      $targetEl\n    } = self;\n\n    if ($targetEl && self.params.targetElSetBackgroundColor) {\n      const {\n        rgba\n      } = value;\n      $targetEl.css('background-color', `rgba(${rgba.join(', ')})`);\n    }\n\n    if (fireEvents) {\n      self.emit('local::change colorPickerChange', self, value);\n    }\n\n    if ($inputEl && $inputEl.length) {\n      const inputValue = self.formatValue(value);\n\n      if ($inputEl && $inputEl.length) {\n        $inputEl.val(inputValue);\n\n        if (fireEvents) {\n          $inputEl.trigger('change');\n        }\n      }\n    }\n  }\n\n  updateModules() {\n    const self = this;\n    const {\n      modules\n    } = self;\n    self.params.modules.forEach(m => {\n      if (typeof m === 'string' && modules[m] && modules[m].update) {\n        modules[m].update(self);\n      } else if (m && m.update) {\n        m.update(self);\n      }\n    });\n  }\n\n  update() {\n    const self = this;\n    self.updateModules();\n  }\n\n  renderPicker() {\n    const self = this;\n    const {\n      params,\n      modules\n    } = self;\n    let html = '';\n    params.modules.forEach(m => {\n      if (typeof m === 'string' && modules[m] && modules[m].render) {\n        html += modules[m].render(self);\n      } else if (m && m.render) {\n        html += m.render(self);\n      }\n    });\n    return html;\n  }\n\n  renderNavbar() {\n    const self = this;\n\n    if (self.params.renderNavbar) {\n      return self.params.renderNavbar.call(self, self);\n    }\n\n    const {\n      openIn,\n      navbarTitleText,\n      navbarBackLinkText,\n      navbarCloseText\n    } = self.params;\n    return $jsx(\"div\", {\n      class: \"navbar\"\n    }, $jsx(\"div\", {\n      class: \"navbar-bg\"\n    }), $jsx(\"div\", {\n      class: \"navbar-inner sliding\"\n    }, openIn === 'page' && $jsx(\"div\", {\n      class: \"left\"\n    }, $jsx(\"a\", {\n      class: \"link back\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-back\"\n    }), $jsx(\"span\", {\n      class: \"if-not-md\"\n    }, navbarBackLinkText))), $jsx(\"div\", {\n      class: \"title\"\n    }, navbarTitleText), openIn !== 'page' && $jsx(\"div\", {\n      class: \"right\"\n    }, $jsx(\"a\", {\n      class: \"link popup-close\",\n      \"data-popup\": \".color-picker-popup\"\n    }, navbarCloseText))));\n  }\n\n  renderToolbar() {\n    const self = this;\n\n    if (self.params.renderToolbar) {\n      return self.params.renderToolbar.call(self, self);\n    }\n\n    return $jsx(\"div\", {\n      class: \"toolbar toolbar-top no-shadow\"\n    }, $jsx(\"div\", {\n      class: \"toolbar-inner\"\n    }, $jsx(\"div\", {\n      class: \"left\"\n    }), $jsx(\"div\", {\n      class: \"right\"\n    }, $jsx(\"a\", {\n      class: \"link sheet-close popover-close\",\n      \"data-sheet\": \".color-picker-sheet-modal\",\n      \"data-popover\": \".color-picker-popover\"\n    }, self.params.toolbarCloseText))));\n  }\n\n  renderInline() {\n    const self = this;\n    const {\n      cssClass,\n      groupedModules\n    } = self.params;\n    return $jsx(\"div\", {\n      class: `color-picker color-picker-inline ${groupedModules ? 'color-picker-grouped-modules' : ''} ${cssClass || ''}`\n    }, self.renderPicker());\n  }\n\n  renderSheet() {\n    const self = this;\n    const {\n      cssClass,\n      toolbarSheet,\n      groupedModules\n    } = self.params;\n    return $jsx(\"div\", {\n      class: `sheet-modal color-picker color-picker-sheet-modal ${groupedModules ? 'color-picker-grouped-modules' : ''} ${cssClass || ''}`\n    }, toolbarSheet && self.renderToolbar(), $jsx(\"div\", {\n      class: \"sheet-modal-inner\"\n    }, $jsx(\"div\", {\n      class: \"page-content\"\n    }, self.renderPicker())));\n  }\n\n  renderPopover() {\n    const self = this;\n    const {\n      cssClass,\n      toolbarPopover,\n      groupedModules\n    } = self.params;\n    return $jsx(\"div\", {\n      class: `popover color-picker-popover ${cssClass || ''}`\n    }, $jsx(\"div\", {\n      class: \"popover-inner\"\n    }, $jsx(\"div\", {\n      class: `color-picker ${groupedModules ? 'color-picker-grouped-modules' : ''}`\n    }, toolbarPopover && self.renderToolbar(), $jsx(\"div\", {\n      class: \"page-content\"\n    }, self.renderPicker()))));\n  }\n\n  renderPopup() {\n    const self = this;\n    const {\n      cssClass,\n      navbarPopup,\n      groupedModules\n    } = self.params;\n    return $jsx(\"div\", {\n      class: `popup color-picker-popup ${cssClass || ''}`\n    }, $jsx(\"div\", {\n      class: \"page\"\n    }, navbarPopup && self.renderNavbar(), $jsx(\"div\", {\n      class: `color-picker ${groupedModules ? 'color-picker-grouped-modules' : ''}`\n    }, $jsx(\"div\", {\n      class: \"page-content\"\n    }, self.renderPicker()))));\n  }\n\n  renderPage() {\n    const self = this;\n    const {\n      cssClass,\n      groupedModules\n    } = self.params;\n    return $jsx(\"div\", {\n      class: `page color-picker-page ${cssClass || ''}`,\n      \"data-name\": \"color-picker-page\"\n    }, self.renderNavbar(), $jsx(\"div\", {\n      class: `color-picker ${groupedModules ? 'color-picker-grouped-modules' : ''}`\n    }, $jsx(\"div\", {\n      class: \"page-content\"\n    }, self.renderPicker())));\n  } // eslint-disable-next-line\n\n\n  render() {\n    const self = this;\n    const {\n      params\n    } = self;\n    if (params.render) return params.render.call(self);\n    if (self.inline) return self.renderInline();\n\n    if (params.openIn === 'page') {\n      return self.renderPage();\n    }\n\n    const modalType = self.getModalType();\n    if (modalType === 'popover') return self.renderPopover();\n    if (modalType === 'sheet') return self.renderSheet();\n    if (modalType === 'popup') return self.renderPopup();\n  }\n\n  onOpen() {\n    const self = this;\n    const {\n      initialized,\n      $el,\n      app,\n      $inputEl,\n      inline,\n      value,\n      params,\n      modules\n    } = self;\n    self.closing = false;\n    self.opened = true;\n    self.opening = true; // Init main events\n\n    self.attachEvents();\n    params.modules.forEach(m => {\n      if (typeof m === 'string' && modules[m] && modules[m].init) {\n        modules[m].init(self);\n      } else if (m && m.init) {\n        m.init(self);\n      }\n    });\n    const updateValue = !value && params.value; // Set value\n\n    if (!initialized) {\n      if (value) self.setValue(value);else if (params.value) {\n        self.setValue(params.value, false);\n      } else if (!params.value) {\n        self.setValue({\n          hex: '#ff0000'\n        }, false);\n      }\n    } else if (value) {\n      self.initialValue = extend({}, value);\n      self.setValue(value, false);\n    } // Update input value\n\n\n    if (updateValue) self.updateValue();\n    self.updateModules(); // Center modules\n\n    if (params.centerModules) {\n      self.centerModules();\n    } // Extra focus\n\n\n    if (!inline && $inputEl && $inputEl.length && app.theme === 'md') {\n      $inputEl.trigger('focus');\n    }\n\n    self.initialized = true; // Trigger events\n\n    if ($el) {\n      $el.trigger('colorpicker:open');\n    }\n\n    if ($inputEl) {\n      $inputEl.trigger('colorpicker:open');\n    }\n\n    self.emit('local::open colorPickerOpen', self);\n  }\n\n  onOpened() {\n    const self = this;\n    self.opening = false;\n\n    if (self.$el) {\n      self.$el.trigger('colorpicker:opened');\n    }\n\n    if (self.$inputEl) {\n      self.$inputEl.trigger('colorpicker:opened');\n    }\n\n    self.emit('local::opened colorPickerOpened', self);\n  }\n\n  onClose() {\n    const self = this;\n    const {\n      app,\n      params,\n      modules\n    } = self;\n    self.opening = false;\n    self.closing = true; // Detach events\n\n    self.detachEvents();\n\n    if (self.$inputEl) {\n      if (app.theme === 'md') {\n        self.$inputEl.trigger('blur');\n      } else {\n        const validate = self.$inputEl.attr('validate');\n        const required = self.$inputEl.attr('required');\n\n        if (validate && required) {\n          app.input.validate(self.$inputEl);\n        }\n      }\n    }\n\n    params.modules.forEach(m => {\n      if (typeof m === 'string' && modules[m] && modules[m].destroy) {\n        modules[m].destroy(self);\n      } else if (m && m.destroy) {\n        m.destroy(self);\n      }\n    });\n\n    if (self.$el) {\n      self.$el.trigger('colorpicker:close');\n    }\n\n    if (self.$inputEl) {\n      self.$inputEl.trigger('colorpicker:close');\n    }\n\n    self.emit('local::close colorPickerClose', self);\n  }\n\n  onClosed() {\n    const self = this;\n    self.opened = false;\n    self.closing = false;\n\n    if (!self.inline) {\n      nextTick(() => {\n        if (self.modal && self.modal.el && self.modal.destroy) {\n          if (!self.params.routableModals) {\n            self.modal.destroy();\n          }\n        }\n\n        delete self.modal;\n      });\n    }\n\n    if (self.$el) {\n      self.$el.trigger('colorpicker:closed');\n    }\n\n    if (self.$inputEl) {\n      self.$inputEl.trigger('colorpicker:closed');\n    }\n\n    self.emit('local::closed colorPickerClosed', self);\n  }\n\n  open() {\n    const self = this;\n    const {\n      app,\n      opened,\n      inline,\n      $inputEl,\n      $targetEl,\n      params\n    } = self;\n    if (opened) return;\n\n    if (inline) {\n      self.$el = $(self.render());\n      self.$el[0].f7ColorPicker = self;\n      self.$containerEl.append(self.$el);\n      self.onOpen();\n      self.onOpened();\n      return;\n    }\n\n    const colorPickerContent = self.render();\n\n    if (params.openIn === 'page') {\n      self.view.router.navigate({\n        url: self.url,\n        route: {\n          content: colorPickerContent,\n          path: self.url,\n          on: {\n            pageBeforeIn(e, page) {\n              self.$el = page.$el.find('.color-picker');\n              self.$el[0].f7ColorPicker = self;\n              self.onOpen();\n            },\n\n            pageAfterIn() {\n              self.onOpened();\n            },\n\n            pageBeforeOut() {\n              self.onClose();\n            },\n\n            pageAfterOut() {\n              self.onClosed();\n\n              if (self.$el && self.$el[0]) {\n                self.$el[0].f7ColorPicker = null;\n                delete self.$el[0].f7ColorPicker;\n              }\n            }\n\n          }\n        }\n      });\n    } else {\n      const modalType = self.getModalType();\n      let backdrop = params.backdrop;\n\n      if (backdrop === null || typeof backdrop === 'undefined') {\n        if (modalType === 'popover' && app.params.popover.backdrop !== false) backdrop = true;\n        if (modalType === 'popup') backdrop = true;\n      }\n\n      const modalParams = {\n        targetEl: $targetEl || $inputEl,\n        scrollToEl: params.scrollToInput ? $targetEl || $inputEl : undefined,\n        content: colorPickerContent,\n        backdrop,\n        closeByBackdropClick: params.closeByBackdropClick,\n        on: {\n          open() {\n            const modal = this;\n            self.modal = modal;\n            self.$el = modalType === 'popover' || modalType === 'popup' ? modal.$el.find('.color-picker') : modal.$el;\n            self.$el[0].f7ColorPicker = self;\n            self.onOpen();\n          },\n\n          opened() {\n            self.onOpened();\n          },\n\n          close() {\n            self.onClose();\n          },\n\n          closed() {\n            self.onClosed();\n\n            if (self.$el && self.$el[0]) {\n              self.$el[0].f7ColorPicker = null;\n              delete self.$el[0].f7ColorPicker;\n            }\n          }\n\n        }\n      };\n\n      if (modalType === 'popup') {\n        modalParams.push = params.popupPush;\n        modalParams.swipeToClose = params.popupSwipeToClose;\n      }\n\n      if (modalType === 'sheet') {\n        modalParams.push = params.sheetPush;\n        modalParams.swipeToClose = params.sheetSwipeToClose;\n      }\n\n      if (params.routableModals && self.view) {\n        self.view.router.navigate({\n          url: self.url,\n          route: {\n            path: self.url,\n            [modalType]: modalParams\n          }\n        });\n      } else {\n        self.modal = app[modalType].create(modalParams);\n        self.modal.open();\n      }\n    }\n  }\n\n  close() {\n    const self = this;\n    const {\n      opened,\n      inline\n    } = self;\n    if (!opened) return;\n\n    if (inline) {\n      self.onClose();\n      self.onClosed();\n      return;\n    }\n\n    if (self.params.routableModals && self.view || self.params.openIn === 'page') {\n      self.view.router.back();\n    } else {\n      self.modal.close();\n    }\n  }\n\n  init() {\n    const self = this;\n    self.initInput();\n\n    if (self.inline) {\n      self.open();\n      self.emit('local::init colorPickerInit', self);\n      return;\n    }\n\n    if (!self.initialized && self.params.value) {\n      self.setValue(self.params.value);\n    } // Attach input Events\n\n\n    if (self.$inputEl) {\n      self.attachInputEvents();\n    }\n\n    if (self.$targetEl) {\n      self.attachTargetEvents();\n    }\n\n    if (self.params.closeByOutsideClick) {\n      self.attachHtmlEvents();\n    }\n\n    self.emit('local::init colorPickerInit', self);\n  }\n\n  destroy() {\n    const self = this;\n    if (self.destroyed) return;\n    const {\n      $el\n    } = self;\n    self.emit('local::beforeDestroy colorPickerBeforeDestroy', self);\n    if ($el) $el.trigger('colorpicker:beforedestroy');\n    self.close(); // Detach Events\n\n    self.detachEvents();\n\n    if (self.$inputEl) {\n      self.detachInputEvents();\n    }\n\n    if (self.$targetEl) {\n      self.detachTargetEvents();\n    }\n\n    if (self.params.closeByOutsideClick) {\n      self.detachHtmlEvents();\n    }\n\n    if ($el && $el.length) delete self.$el[0].f7ColorPicker;\n    deleteProps(self);\n    self.destroyed = true;\n  }\n\n}\n\nexport default ColorPicker;","map":{"version":3,"names":["extend","colorRgbToHex","colorRgbToHsl","colorHslToHsb","colorHslToRgb","colorHsbToHsl","colorHexToRgb","nextTick","deleteProps","Framework7Class","$","getDevice","moduleAlphaSlider","moduleCurrentColor","moduleHex","moduleHsbSliders","moduleHueSlider","moduleBrightnessSlider","modulePalette","moduleInitialCurrentColors","moduleRgbBars","moduleRgbSliders","moduleSbSpectrum","moduleHsSpectrum","moduleWheel","$jsx","ColorPicker","constructor","app","params","self","colorPicker","$containerEl","containerEl","length","$inputEl","inputEl","$targetEl","targetEl","inline","initialized","opened","url","modules","hex","palette","wheel","onInputClick","open","onInputFocus","e","preventDefault","onTargetClick","onHtmlClick","destroyed","openIn","$clickTargetEl","target","closing","closest","close","attachInputEvents","on","inputReadOnly","f7ValidateReadonly","detachInputEvents","off","attachTargetEvents","detachTargetEvents","attachHtmlEvents","detachHtmlEvents","init","view","parents","f7View","views","main","attachEvents","centerModules","bind","detachEvents","$el","$pageContentEl","find","scrollHeight","offsetHeight","addClass","removeClass","initInput","prop","getModalType","modal","openInPhone","device","type","ios","ipad","width","desktop","theme","formatValue","value","call","normalizeHsValues","arr","Math","floor","setValue","updateModules","rgb","hsl","hsb","alpha","hue","rgba","hsla","needChangeEvent","valueChanged","Object","keys","forEach","k","v","Array","isArray","subV","subIndex","r","g","b","a","h","s","l","initialValue","updateValue","getValue","fireEvents","targetElSetBackgroundColor","css","join","emit","inputValue","val","trigger","m","update","renderPicker","html","render","renderNavbar","navbarTitleText","navbarBackLinkText","navbarCloseText","class","renderToolbar","toolbarCloseText","renderInline","cssClass","groupedModules","renderSheet","toolbarSheet","renderPopover","toolbarPopover","renderPopup","navbarPopup","renderPage","modalType","onOpen","opening","onOpened","onClose","validate","attr","required","input","destroy","onClosed","el","routableModals","f7ColorPicker","append","colorPickerContent","router","navigate","route","content","path","pageBeforeIn","page","pageAfterIn","pageBeforeOut","pageAfterOut","backdrop","popover","modalParams","scrollToEl","scrollToInput","undefined","closeByBackdropClick","closed","push","popupPush","swipeToClose","popupSwipeToClose","sheetPush","sheetSwipeToClose","create","back","closeByOutsideClick"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/components/color-picker/color-picker-class.js"],"sourcesContent":["import { extend, colorRgbToHex, colorRgbToHsl, colorHslToHsb, colorHslToRgb, colorHsbToHsl, colorHexToRgb, nextTick, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\nimport $ from '../../shared/dom7.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport moduleAlphaSlider from './modules/alpha-slider.js';\nimport moduleCurrentColor from './modules/current-color.js';\nimport moduleHex from './modules/hex.js';\nimport moduleHsbSliders from './modules/hsb-sliders.js';\nimport moduleHueSlider from './modules/hue-slider.js';\nimport moduleBrightnessSlider from './modules/brightness-slider.js';\nimport modulePalette from './modules/palette.js';\nimport moduleInitialCurrentColors from './modules/initial-current-colors.js';\nimport moduleRgbBars from './modules/rgb-bars.js';\nimport moduleRgbSliders from './modules/rgb-sliders.js';\nimport moduleSbSpectrum from './modules/sb-spectrum.js';\nimport moduleHsSpectrum from './modules/hs-spectrum.js';\nimport moduleWheel from './modules/wheel.js';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx.js';\n\nclass ColorPicker extends Framework7Class {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const self = this;\n    self.params = extend({}, app.params.colorPicker, params);\n    let $containerEl;\n\n    if (self.params.containerEl) {\n      $containerEl = $(self.params.containerEl);\n      if ($containerEl.length === 0) return self;\n    }\n\n    let $inputEl;\n\n    if (self.params.inputEl) {\n      $inputEl = $(self.params.inputEl);\n    }\n\n    let $targetEl;\n\n    if (self.params.targetEl) {\n      $targetEl = $(self.params.targetEl);\n    }\n\n    extend(self, {\n      app,\n      $containerEl,\n      containerEl: $containerEl && $containerEl[0],\n      inline: $containerEl && $containerEl.length > 0,\n      $inputEl,\n      inputEl: $inputEl && $inputEl[0],\n      $targetEl,\n      targetEl: $targetEl && $targetEl[0],\n      initialized: false,\n      opened: false,\n      url: self.params.url,\n      modules: {\n        'alpha-slider': moduleAlphaSlider,\n        'current-color': moduleCurrentColor,\n        hex: moduleHex,\n        // eslint-disable-line\n        'hsb-sliders': moduleHsbSliders,\n        'hue-slider': moduleHueSlider,\n        'brightness-slider': moduleBrightnessSlider,\n        palette: modulePalette,\n        // eslint-disable-line\n        'initial-current-colors': moduleInitialCurrentColors,\n        'rgb-bars': moduleRgbBars,\n        'rgb-sliders': moduleRgbSliders,\n        'sb-spectrum': moduleSbSpectrum,\n        'hs-spectrum': moduleHsSpectrum,\n        wheel: moduleWheel // eslint-disable-line\n\n      }\n    });\n\n    function onInputClick() {\n      self.open();\n    }\n\n    function onInputFocus(e) {\n      e.preventDefault();\n    }\n\n    function onTargetClick() {\n      self.open();\n    }\n\n    function onHtmlClick(e) {\n      if (self.destroyed || !self.params) return;\n      if (self.params.openIn === 'page') return;\n      const $clickTargetEl = $(e.target);\n      if (!self.opened || self.closing) return;\n      if ($clickTargetEl.closest('[class*=\"backdrop\"]').length) return;\n      if ($clickTargetEl.closest('.color-picker-popup, .color-picker-popover').length) return;\n\n      if ($inputEl && $inputEl.length > 0) {\n        if ($clickTargetEl[0] !== $inputEl[0] && $clickTargetEl.closest('.sheet-modal').length === 0) {\n          self.close();\n        }\n      } else if ($(e.target).closest('.sheet-modal').length === 0) {\n        self.close();\n      }\n    } // Events\n\n\n    extend(self, {\n      attachInputEvents() {\n        self.$inputEl.on('click', onInputClick);\n\n        if (self.params.inputReadOnly) {\n          self.$inputEl.on('focus mousedown', onInputFocus);\n\n          if (self.$inputEl[0]) {\n            self.$inputEl[0].f7ValidateReadonly = true;\n          }\n        }\n      },\n\n      detachInputEvents() {\n        self.$inputEl.off('click', onInputClick);\n\n        if (self.params.inputReadOnly) {\n          self.$inputEl.off('focus mousedown', onInputFocus);\n\n          if (self.$inputEl[0]) {\n            delete self.$inputEl[0].f7ValidateReadonly;\n          }\n        }\n      },\n\n      attachTargetEvents() {\n        self.$targetEl.on('click', onTargetClick);\n      },\n\n      detachTargetEvents() {\n        self.$targetEl.off('click', onTargetClick);\n      },\n\n      attachHtmlEvents() {\n        app.on('click', onHtmlClick);\n      },\n\n      detachHtmlEvents() {\n        app.off('click', onHtmlClick);\n      }\n\n    });\n    self.init();\n    return self;\n  }\n\n  get view() {\n    const {\n      $inputEl,\n      $targetEl,\n      app,\n      params\n    } = this;\n    let view;\n\n    if (params.view) {\n      view = params.view;\n    } else {\n      if ($inputEl) {\n        view = $inputEl.parents('.view').length && $inputEl.parents('.view')[0].f7View;\n      }\n\n      if (!view && $targetEl) {\n        view = $targetEl.parents('.view').length && $targetEl.parents('.view')[0].f7View;\n      }\n    }\n\n    if (!view) view = app.views.main;\n    return view;\n  }\n\n  attachEvents() {\n    const self = this;\n    self.centerModules = self.centerModules.bind(self);\n\n    if (self.params.centerModules) {\n      self.app.on('resize', self.centerModules);\n    }\n  }\n\n  detachEvents() {\n    const self = this;\n\n    if (self.params.centerModules) {\n      self.app.off('resize', self.centerModules);\n    }\n  }\n\n  centerModules() {\n    const self = this;\n    if (!self.opened || !self.$el || self.inline) return;\n    const $pageContentEl = self.$el.find('.page-content');\n    if (!$pageContentEl.length) return;\n    const {\n      scrollHeight,\n      offsetHeight\n    } = $pageContentEl[0];\n\n    if (scrollHeight <= offsetHeight) {\n      $pageContentEl.addClass('justify-content-center');\n    } else {\n      $pageContentEl.removeClass('justify-content-center');\n    }\n  }\n\n  initInput() {\n    const self = this;\n    if (!self.$inputEl) return;\n    if (self.params.inputReadOnly) self.$inputEl.prop('readOnly', true);\n  }\n\n  getModalType() {\n    const self = this;\n    const {\n      app,\n      modal,\n      params\n    } = self;\n    const {\n      openIn,\n      openInPhone\n    } = params;\n    const device = getDevice();\n    if (modal && modal.type) return modal.type;\n    if (openIn !== 'auto') return openIn;\n    if (self.inline) return null;\n\n    if (device.ios) {\n      return device.ipad ? 'popover' : openInPhone;\n    }\n\n    if (app.width >= 768 || device.desktop && app.theme === 'aurora') {\n      return 'popover';\n    }\n\n    return openInPhone;\n  }\n\n  formatValue() {\n    const self = this;\n    const {\n      value\n    } = self;\n\n    if (self.params.formatValue) {\n      return self.params.formatValue.call(self, value);\n    }\n\n    return value.hex;\n  } // eslint-disable-next-line\n\n\n  normalizeHsValues(arr) {\n    return [Math.floor(arr[0] * 10) / 10, Math.floor(arr[1] * 1000) / 1000, Math.floor(arr[2] * 1000) / 1000];\n  }\n\n  setValue(value, updateModules) {\n    if (value === void 0) {\n      value = {};\n    }\n\n    if (updateModules === void 0) {\n      updateModules = true;\n    }\n\n    const self = this;\n    if (typeof value === 'undefined') return;\n    let {\n      hex,\n      rgb,\n      hsl,\n      hsb,\n      alpha = 1,\n      hue,\n      rgba,\n      hsla\n    } = self.value || {};\n    const needChangeEvent = self.value || !self.value && !self.params.value;\n    let valueChanged;\n    Object.keys(value).forEach(k => {\n      if (!self.value || typeof self.value[k] === 'undefined') {\n        valueChanged = true;\n        return;\n      }\n\n      const v = value[k];\n\n      if (Array.isArray(v)) {\n        v.forEach((subV, subIndex) => {\n          if (subV !== self.value[k][subIndex]) {\n            valueChanged = true;\n          }\n        });\n      } else if (v !== self.value[k]) {\n        valueChanged = true;\n      }\n    });\n    if (!valueChanged) return;\n\n    if (value.rgb || value.rgba) {\n      const [r, g, b, a = alpha] = value.rgb || value.rgba;\n      rgb = [r, g, b];\n      hex = colorRgbToHex(...rgb);\n      hsl = colorRgbToHsl(...rgb);\n      hsb = colorHslToHsb(...hsl);\n      hsl = self.normalizeHsValues(hsl);\n      hsb = self.normalizeHsValues(hsb);\n      hue = hsb[0];\n      alpha = a;\n      rgba = [rgb[0], rgb[1], rgb[2], a];\n      hsla = [hsl[0], hsl[1], hsl[2], a];\n    }\n\n    if (value.hsl || value.hsla) {\n      const [h, s, l, a = alpha] = value.hsl || value.hsla;\n      hsl = [h, s, l];\n      rgb = colorHslToRgb(...hsl);\n      hex = colorRgbToHex(...rgb);\n      hsb = colorHslToHsb(...hsl);\n      hsl = self.normalizeHsValues(hsl);\n      hsb = self.normalizeHsValues(hsb);\n      hue = hsb[0];\n      alpha = a;\n      rgba = [rgb[0], rgb[1], rgb[2], a];\n      hsla = [hsl[0], hsl[1], hsl[2], a];\n    }\n\n    if (value.hsb) {\n      const [h, s, b, a = alpha] = value.hsb;\n      hsb = [h, s, b];\n      hsl = colorHsbToHsl(...hsb);\n      rgb = colorHslToRgb(...hsl);\n      hex = colorRgbToHex(...rgb);\n      hsl = self.normalizeHsValues(hsl);\n      hsb = self.normalizeHsValues(hsb);\n      hue = hsb[0];\n      alpha = a;\n      rgba = [rgb[0], rgb[1], rgb[2], a];\n      hsla = [hsl[0], hsl[1], hsl[2], a];\n    }\n\n    if (value.hex) {\n      rgb = colorHexToRgb(value.hex);\n      hex = colorRgbToHex(...rgb);\n      hsl = colorRgbToHsl(...rgb);\n      hsb = colorHslToHsb(...hsl);\n      hsl = self.normalizeHsValues(hsl);\n      hsb = self.normalizeHsValues(hsb);\n      hue = hsb[0];\n      rgba = [rgb[0], rgb[1], rgb[2], alpha];\n      hsla = [hsl[0], hsl[1], hsl[2], alpha];\n    }\n\n    if (typeof value.alpha !== 'undefined') {\n      alpha = value.alpha;\n\n      if (typeof rgb !== 'undefined') {\n        rgba = [rgb[0], rgb[1], rgb[2], alpha];\n      }\n\n      if (typeof hsl !== 'undefined') {\n        hsla = [hsl[0], hsl[1], hsl[2], alpha];\n      }\n    }\n\n    if (typeof value.hue !== 'undefined') {\n      const [h, s, l] = hsl; // eslint-disable-line\n\n      hsl = [value.hue, s, l];\n      hsb = colorHslToHsb(...hsl);\n      rgb = colorHslToRgb(...hsl);\n      hex = colorRgbToHex(...rgb);\n      hsl = self.normalizeHsValues(hsl);\n      hsb = self.normalizeHsValues(hsb);\n      hue = hsb[0];\n      rgba = [rgb[0], rgb[1], rgb[2], alpha];\n      hsla = [hsl[0], hsl[1], hsl[2], alpha];\n    }\n\n    self.value = {\n      hex,\n      alpha,\n      hue,\n      rgb,\n      hsl,\n      hsb,\n      rgba,\n      hsla\n    };\n    if (!self.initialValue) self.initialValue = extend({}, self.value);\n    self.updateValue(needChangeEvent);\n\n    if (self.opened && updateModules) {\n      self.updateModules();\n    }\n  }\n\n  getValue() {\n    const self = this;\n    return self.value;\n  }\n\n  updateValue(fireEvents) {\n    if (fireEvents === void 0) {\n      fireEvents = true;\n    }\n\n    const self = this;\n    const {\n      $inputEl,\n      value,\n      $targetEl\n    } = self;\n\n    if ($targetEl && self.params.targetElSetBackgroundColor) {\n      const {\n        rgba\n      } = value;\n      $targetEl.css('background-color', `rgba(${rgba.join(', ')})`);\n    }\n\n    if (fireEvents) {\n      self.emit('local::change colorPickerChange', self, value);\n    }\n\n    if ($inputEl && $inputEl.length) {\n      const inputValue = self.formatValue(value);\n\n      if ($inputEl && $inputEl.length) {\n        $inputEl.val(inputValue);\n\n        if (fireEvents) {\n          $inputEl.trigger('change');\n        }\n      }\n    }\n  }\n\n  updateModules() {\n    const self = this;\n    const {\n      modules\n    } = self;\n    self.params.modules.forEach(m => {\n      if (typeof m === 'string' && modules[m] && modules[m].update) {\n        modules[m].update(self);\n      } else if (m && m.update) {\n        m.update(self);\n      }\n    });\n  }\n\n  update() {\n    const self = this;\n    self.updateModules();\n  }\n\n  renderPicker() {\n    const self = this;\n    const {\n      params,\n      modules\n    } = self;\n    let html = '';\n    params.modules.forEach(m => {\n      if (typeof m === 'string' && modules[m] && modules[m].render) {\n        html += modules[m].render(self);\n      } else if (m && m.render) {\n        html += m.render(self);\n      }\n    });\n    return html;\n  }\n\n  renderNavbar() {\n    const self = this;\n\n    if (self.params.renderNavbar) {\n      return self.params.renderNavbar.call(self, self);\n    }\n\n    const {\n      openIn,\n      navbarTitleText,\n      navbarBackLinkText,\n      navbarCloseText\n    } = self.params;\n    return $jsx(\"div\", {\n      class: \"navbar\"\n    }, $jsx(\"div\", {\n      class: \"navbar-bg\"\n    }), $jsx(\"div\", {\n      class: \"navbar-inner sliding\"\n    }, openIn === 'page' && $jsx(\"div\", {\n      class: \"left\"\n    }, $jsx(\"a\", {\n      class: \"link back\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-back\"\n    }), $jsx(\"span\", {\n      class: \"if-not-md\"\n    }, navbarBackLinkText))), $jsx(\"div\", {\n      class: \"title\"\n    }, navbarTitleText), openIn !== 'page' && $jsx(\"div\", {\n      class: \"right\"\n    }, $jsx(\"a\", {\n      class: \"link popup-close\",\n      \"data-popup\": \".color-picker-popup\"\n    }, navbarCloseText))));\n  }\n\n  renderToolbar() {\n    const self = this;\n\n    if (self.params.renderToolbar) {\n      return self.params.renderToolbar.call(self, self);\n    }\n\n    return $jsx(\"div\", {\n      class: \"toolbar toolbar-top no-shadow\"\n    }, $jsx(\"div\", {\n      class: \"toolbar-inner\"\n    }, $jsx(\"div\", {\n      class: \"left\"\n    }), $jsx(\"div\", {\n      class: \"right\"\n    }, $jsx(\"a\", {\n      class: \"link sheet-close popover-close\",\n      \"data-sheet\": \".color-picker-sheet-modal\",\n      \"data-popover\": \".color-picker-popover\"\n    }, self.params.toolbarCloseText))));\n  }\n\n  renderInline() {\n    const self = this;\n    const {\n      cssClass,\n      groupedModules\n    } = self.params;\n    return $jsx(\"div\", {\n      class: `color-picker color-picker-inline ${groupedModules ? 'color-picker-grouped-modules' : ''} ${cssClass || ''}`\n    }, self.renderPicker());\n  }\n\n  renderSheet() {\n    const self = this;\n    const {\n      cssClass,\n      toolbarSheet,\n      groupedModules\n    } = self.params;\n    return $jsx(\"div\", {\n      class: `sheet-modal color-picker color-picker-sheet-modal ${groupedModules ? 'color-picker-grouped-modules' : ''} ${cssClass || ''}`\n    }, toolbarSheet && self.renderToolbar(), $jsx(\"div\", {\n      class: \"sheet-modal-inner\"\n    }, $jsx(\"div\", {\n      class: \"page-content\"\n    }, self.renderPicker())));\n  }\n\n  renderPopover() {\n    const self = this;\n    const {\n      cssClass,\n      toolbarPopover,\n      groupedModules\n    } = self.params;\n    return $jsx(\"div\", {\n      class: `popover color-picker-popover ${cssClass || ''}`\n    }, $jsx(\"div\", {\n      class: \"popover-inner\"\n    }, $jsx(\"div\", {\n      class: `color-picker ${groupedModules ? 'color-picker-grouped-modules' : ''}`\n    }, toolbarPopover && self.renderToolbar(), $jsx(\"div\", {\n      class: \"page-content\"\n    }, self.renderPicker()))));\n  }\n\n  renderPopup() {\n    const self = this;\n    const {\n      cssClass,\n      navbarPopup,\n      groupedModules\n    } = self.params;\n    return $jsx(\"div\", {\n      class: `popup color-picker-popup ${cssClass || ''}`\n    }, $jsx(\"div\", {\n      class: \"page\"\n    }, navbarPopup && self.renderNavbar(), $jsx(\"div\", {\n      class: `color-picker ${groupedModules ? 'color-picker-grouped-modules' : ''}`\n    }, $jsx(\"div\", {\n      class: \"page-content\"\n    }, self.renderPicker()))));\n  }\n\n  renderPage() {\n    const self = this;\n    const {\n      cssClass,\n      groupedModules\n    } = self.params;\n    return $jsx(\"div\", {\n      class: `page color-picker-page ${cssClass || ''}`,\n      \"data-name\": \"color-picker-page\"\n    }, self.renderNavbar(), $jsx(\"div\", {\n      class: `color-picker ${groupedModules ? 'color-picker-grouped-modules' : ''}`\n    }, $jsx(\"div\", {\n      class: \"page-content\"\n    }, self.renderPicker())));\n  } // eslint-disable-next-line\n\n\n  render() {\n    const self = this;\n    const {\n      params\n    } = self;\n    if (params.render) return params.render.call(self);\n    if (self.inline) return self.renderInline();\n\n    if (params.openIn === 'page') {\n      return self.renderPage();\n    }\n\n    const modalType = self.getModalType();\n    if (modalType === 'popover') return self.renderPopover();\n    if (modalType === 'sheet') return self.renderSheet();\n    if (modalType === 'popup') return self.renderPopup();\n  }\n\n  onOpen() {\n    const self = this;\n    const {\n      initialized,\n      $el,\n      app,\n      $inputEl,\n      inline,\n      value,\n      params,\n      modules\n    } = self;\n    self.closing = false;\n    self.opened = true;\n    self.opening = true; // Init main events\n\n    self.attachEvents();\n    params.modules.forEach(m => {\n      if (typeof m === 'string' && modules[m] && modules[m].init) {\n        modules[m].init(self);\n      } else if (m && m.init) {\n        m.init(self);\n      }\n    });\n    const updateValue = !value && params.value; // Set value\n\n    if (!initialized) {\n      if (value) self.setValue(value);else if (params.value) {\n        self.setValue(params.value, false);\n      } else if (!params.value) {\n        self.setValue({\n          hex: '#ff0000'\n        }, false);\n      }\n    } else if (value) {\n      self.initialValue = extend({}, value);\n      self.setValue(value, false);\n    } // Update input value\n\n\n    if (updateValue) self.updateValue();\n    self.updateModules(); // Center modules\n\n    if (params.centerModules) {\n      self.centerModules();\n    } // Extra focus\n\n\n    if (!inline && $inputEl && $inputEl.length && app.theme === 'md') {\n      $inputEl.trigger('focus');\n    }\n\n    self.initialized = true; // Trigger events\n\n    if ($el) {\n      $el.trigger('colorpicker:open');\n    }\n\n    if ($inputEl) {\n      $inputEl.trigger('colorpicker:open');\n    }\n\n    self.emit('local::open colorPickerOpen', self);\n  }\n\n  onOpened() {\n    const self = this;\n    self.opening = false;\n\n    if (self.$el) {\n      self.$el.trigger('colorpicker:opened');\n    }\n\n    if (self.$inputEl) {\n      self.$inputEl.trigger('colorpicker:opened');\n    }\n\n    self.emit('local::opened colorPickerOpened', self);\n  }\n\n  onClose() {\n    const self = this;\n    const {\n      app,\n      params,\n      modules\n    } = self;\n    self.opening = false;\n    self.closing = true; // Detach events\n\n    self.detachEvents();\n\n    if (self.$inputEl) {\n      if (app.theme === 'md') {\n        self.$inputEl.trigger('blur');\n      } else {\n        const validate = self.$inputEl.attr('validate');\n        const required = self.$inputEl.attr('required');\n\n        if (validate && required) {\n          app.input.validate(self.$inputEl);\n        }\n      }\n    }\n\n    params.modules.forEach(m => {\n      if (typeof m === 'string' && modules[m] && modules[m].destroy) {\n        modules[m].destroy(self);\n      } else if (m && m.destroy) {\n        m.destroy(self);\n      }\n    });\n\n    if (self.$el) {\n      self.$el.trigger('colorpicker:close');\n    }\n\n    if (self.$inputEl) {\n      self.$inputEl.trigger('colorpicker:close');\n    }\n\n    self.emit('local::close colorPickerClose', self);\n  }\n\n  onClosed() {\n    const self = this;\n    self.opened = false;\n    self.closing = false;\n\n    if (!self.inline) {\n      nextTick(() => {\n        if (self.modal && self.modal.el && self.modal.destroy) {\n          if (!self.params.routableModals) {\n            self.modal.destroy();\n          }\n        }\n\n        delete self.modal;\n      });\n    }\n\n    if (self.$el) {\n      self.$el.trigger('colorpicker:closed');\n    }\n\n    if (self.$inputEl) {\n      self.$inputEl.trigger('colorpicker:closed');\n    }\n\n    self.emit('local::closed colorPickerClosed', self);\n  }\n\n  open() {\n    const self = this;\n    const {\n      app,\n      opened,\n      inline,\n      $inputEl,\n      $targetEl,\n      params\n    } = self;\n    if (opened) return;\n\n    if (inline) {\n      self.$el = $(self.render());\n      self.$el[0].f7ColorPicker = self;\n      self.$containerEl.append(self.$el);\n      self.onOpen();\n      self.onOpened();\n      return;\n    }\n\n    const colorPickerContent = self.render();\n\n    if (params.openIn === 'page') {\n      self.view.router.navigate({\n        url: self.url,\n        route: {\n          content: colorPickerContent,\n          path: self.url,\n          on: {\n            pageBeforeIn(e, page) {\n              self.$el = page.$el.find('.color-picker');\n              self.$el[0].f7ColorPicker = self;\n              self.onOpen();\n            },\n\n            pageAfterIn() {\n              self.onOpened();\n            },\n\n            pageBeforeOut() {\n              self.onClose();\n            },\n\n            pageAfterOut() {\n              self.onClosed();\n\n              if (self.$el && self.$el[0]) {\n                self.$el[0].f7ColorPicker = null;\n                delete self.$el[0].f7ColorPicker;\n              }\n            }\n\n          }\n        }\n      });\n    } else {\n      const modalType = self.getModalType();\n      let backdrop = params.backdrop;\n\n      if (backdrop === null || typeof backdrop === 'undefined') {\n        if (modalType === 'popover' && app.params.popover.backdrop !== false) backdrop = true;\n        if (modalType === 'popup') backdrop = true;\n      }\n\n      const modalParams = {\n        targetEl: $targetEl || $inputEl,\n        scrollToEl: params.scrollToInput ? $targetEl || $inputEl : undefined,\n        content: colorPickerContent,\n        backdrop,\n        closeByBackdropClick: params.closeByBackdropClick,\n        on: {\n          open() {\n            const modal = this;\n            self.modal = modal;\n            self.$el = modalType === 'popover' || modalType === 'popup' ? modal.$el.find('.color-picker') : modal.$el;\n            self.$el[0].f7ColorPicker = self;\n            self.onOpen();\n          },\n\n          opened() {\n            self.onOpened();\n          },\n\n          close() {\n            self.onClose();\n          },\n\n          closed() {\n            self.onClosed();\n\n            if (self.$el && self.$el[0]) {\n              self.$el[0].f7ColorPicker = null;\n              delete self.$el[0].f7ColorPicker;\n            }\n          }\n\n        }\n      };\n\n      if (modalType === 'popup') {\n        modalParams.push = params.popupPush;\n        modalParams.swipeToClose = params.popupSwipeToClose;\n      }\n\n      if (modalType === 'sheet') {\n        modalParams.push = params.sheetPush;\n        modalParams.swipeToClose = params.sheetSwipeToClose;\n      }\n\n      if (params.routableModals && self.view) {\n        self.view.router.navigate({\n          url: self.url,\n          route: {\n            path: self.url,\n            [modalType]: modalParams\n          }\n        });\n      } else {\n        self.modal = app[modalType].create(modalParams);\n        self.modal.open();\n      }\n    }\n  }\n\n  close() {\n    const self = this;\n    const {\n      opened,\n      inline\n    } = self;\n    if (!opened) return;\n\n    if (inline) {\n      self.onClose();\n      self.onClosed();\n      return;\n    }\n\n    if (self.params.routableModals && self.view || self.params.openIn === 'page') {\n      self.view.router.back();\n    } else {\n      self.modal.close();\n    }\n  }\n\n  init() {\n    const self = this;\n    self.initInput();\n\n    if (self.inline) {\n      self.open();\n      self.emit('local::init colorPickerInit', self);\n      return;\n    }\n\n    if (!self.initialized && self.params.value) {\n      self.setValue(self.params.value);\n    } // Attach input Events\n\n\n    if (self.$inputEl) {\n      self.attachInputEvents();\n    }\n\n    if (self.$targetEl) {\n      self.attachTargetEvents();\n    }\n\n    if (self.params.closeByOutsideClick) {\n      self.attachHtmlEvents();\n    }\n\n    self.emit('local::init colorPickerInit', self);\n  }\n\n  destroy() {\n    const self = this;\n    if (self.destroyed) return;\n    const {\n      $el\n    } = self;\n    self.emit('local::beforeDestroy colorPickerBeforeDestroy', self);\n    if ($el) $el.trigger('colorpicker:beforedestroy');\n    self.close(); // Detach Events\n\n    self.detachEvents();\n\n    if (self.$inputEl) {\n      self.detachInputEvents();\n    }\n\n    if (self.$targetEl) {\n      self.detachTargetEvents();\n    }\n\n    if (self.params.closeByOutsideClick) {\n      self.detachHtmlEvents();\n    }\n\n    if ($el && $el.length) delete self.$el[0].f7ColorPicker;\n    deleteProps(self);\n    self.destroyed = true;\n  }\n\n}\n\nexport default ColorPicker;"],"mappings":"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"},"metadata":{},"sourceType":"module"}