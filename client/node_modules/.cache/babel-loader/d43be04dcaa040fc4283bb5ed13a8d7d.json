{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { forwardRef, useRef, useImperativeHandle } from 'react';\nimport { useIsomorphicLayoutEffect } from '../shared/use-isomorphic-layout-effect.js';\nimport { classNames, getExtraAttrs, noUndefinedProps } from '../shared/utils.js';\nimport { colorClasses } from '../shared/mixins.js';\nimport { f7ready, f7 } from '../shared/f7.js';\nimport { watchProp } from '../shared/watch-prop.js';\nconst Messages = /*#__PURE__*/forwardRef((props, ref) => {\n  const f7Messages = useRef(null);\n  const mounted = useRef(false);\n  const {\n    className,\n    id,\n    style,\n    children,\n    autoLayout = false,\n    messages = [],\n    newMessagesFirst = false,\n    scrollMessages = true,\n    scrollMessagesOnEdge = true,\n    firstMessageRule,\n    lastMessageRule,\n    tailMessageRule,\n    sameNameMessageRule,\n    sameHeaderMessageRule,\n    sameFooterMessageRule,\n    sameAvatarMessageRule,\n    customClassMessageRule,\n    renderMessage,\n    typing = false,\n    init = true\n  } = props;\n  const extraAttrs = getExtraAttrs(props);\n  const elRef = useRef(null);\n  const childrenBeforeUpdated = useRef(null);\n  const reactChildrenBefore = useRef(children ? React.Children.count(children) : 0);\n  useImperativeHandle(ref, () => ({\n    el: elRef.current,\n    f7Messages: () => f7Messages.current\n  }));\n\n  const onMount = () => {\n    if (!init) return;\n    f7ready(() => {\n      f7Messages.current = f7.messages.create(noUndefinedProps({\n        el: elRef.current,\n        autoLayout,\n        messages,\n        newMessagesFirst,\n        scrollMessages,\n        scrollMessagesOnEdge,\n        firstMessageRule,\n        lastMessageRule,\n        tailMessageRule,\n        sameNameMessageRule,\n        sameHeaderMessageRule,\n        sameFooterMessageRule,\n        sameAvatarMessageRule,\n        customClassMessageRule,\n        renderMessage\n      }));\n\n      if (typing) {\n        f7Messages.current.showTyping();\n      }\n    });\n  };\n\n  const onDestroy = () => {\n    if (f7Messages.current && f7Messages.current.destroy) f7Messages.current.destroy();\n    f7Messages.current = null;\n  };\n\n  useIsomorphicLayoutEffect(() => {\n    onMount();\n    return onDestroy;\n  }, []);\n  const currentChildrenLength = children ? React.Children.count(children) : 0;\n\n  if (f7Messages.current && scrollMessages) {\n    const beforeChildrenLength = reactChildrenBefore.current || 0;\n\n    if (currentChildrenLength !== beforeChildrenLength) {\n      f7Messages.current.setScrollData();\n    }\n  }\n\n  reactChildrenBefore.current = currentChildrenLength;\n  useIsomorphicLayoutEffect(() => {\n    const wasMounted = mounted.current;\n    mounted.current = true;\n    if (!init || !elRef.current) return;\n    const childElements = elRef.current.children;\n    if (!childElements) return;\n    const childrenAfterUpdated = childElements.length;\n\n    if (!wasMounted) {\n      for (let i = 0; i < childElements.length; i += 1) {\n        childElements[i].classList.add('message-appeared');\n      }\n\n      return;\n    }\n\n    for (let i = 0; i < childElements.length; i += 1) {\n      if (!childElements[i].classList.contains('message-appeared')) {\n        childElements[i].classList.add('message-appear-from-bottom');\n      }\n    }\n\n    if (f7Messages.current) {\n      if (f7Messages.current.layout && autoLayout) {\n        f7Messages.current.layout();\n      }\n\n      if (childrenBeforeUpdated.current !== childrenAfterUpdated && f7Messages.current.scroll && f7Messages.current.scrollData && scrollMessages) {\n        f7Messages.current.scrollWithEdgeCheck(true);\n      }\n    }\n\n    childrenBeforeUpdated.current = childrenAfterUpdated;\n  });\n  watchProp(typing, newValue => {\n    if (!f7Messages.current) return;\n    if (newValue) f7Messages.current.showTyping();else f7Messages.current.hideTyping();\n  });\n  const classes = classNames(className, 'messages', colorClasses(props));\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    id: id,\n    style: style,\n    className: classes,\n    ref: elRef\n  }, extraAttrs), children);\n});\nMessages.displayName = 'f7-messages';\nexport default Messages;","map":{"version":3,"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","React","forwardRef","useRef","useImperativeHandle","useIsomorphicLayoutEffect","classNames","getExtraAttrs","noUndefinedProps","colorClasses","f7ready","f7","watchProp","Messages","props","ref","f7Messages","mounted","className","id","style","children","autoLayout","messages","newMessagesFirst","scrollMessages","scrollMessagesOnEdge","firstMessageRule","lastMessageRule","tailMessageRule","sameNameMessageRule","sameHeaderMessageRule","sameFooterMessageRule","sameAvatarMessageRule","customClassMessageRule","renderMessage","typing","init","extraAttrs","elRef","childrenBeforeUpdated","reactChildrenBefore","Children","count","el","current","onMount","create","showTyping","onDestroy","destroy","currentChildrenLength","beforeChildrenLength","setScrollData","wasMounted","childElements","childrenAfterUpdated","classList","add","contains","layout","scroll","scrollData","scrollWithEdgeCheck","newValue","hideTyping","classes","createElement","displayName"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7-react/components/messages.js"],"sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { forwardRef, useRef, useImperativeHandle } from 'react';\nimport { useIsomorphicLayoutEffect } from '../shared/use-isomorphic-layout-effect.js';\nimport { classNames, getExtraAttrs, noUndefinedProps } from '../shared/utils.js';\nimport { colorClasses } from '../shared/mixins.js';\nimport { f7ready, f7 } from '../shared/f7.js';\nimport { watchProp } from '../shared/watch-prop.js';\n\n\nconst Messages = /*#__PURE__*/forwardRef((props, ref) => {\n  const f7Messages = useRef(null);\n  const mounted = useRef(false);\n  const {\n    className,\n    id,\n    style,\n    children,\n    autoLayout = false,\n    messages = [],\n    newMessagesFirst = false,\n    scrollMessages = true,\n    scrollMessagesOnEdge = true,\n    firstMessageRule,\n    lastMessageRule,\n    tailMessageRule,\n    sameNameMessageRule,\n    sameHeaderMessageRule,\n    sameFooterMessageRule,\n    sameAvatarMessageRule,\n    customClassMessageRule,\n    renderMessage,\n    typing = false,\n    init = true\n  } = props;\n  const extraAttrs = getExtraAttrs(props);\n  const elRef = useRef(null);\n  const childrenBeforeUpdated = useRef(null);\n  const reactChildrenBefore = useRef(children ? React.Children.count(children) : 0);\n  useImperativeHandle(ref, () => ({\n    el: elRef.current,\n    f7Messages: () => f7Messages.current\n  }));\n\n  const onMount = () => {\n    if (!init) return;\n    f7ready(() => {\n      f7Messages.current = f7.messages.create(noUndefinedProps({\n        el: elRef.current,\n        autoLayout,\n        messages,\n        newMessagesFirst,\n        scrollMessages,\n        scrollMessagesOnEdge,\n        firstMessageRule,\n        lastMessageRule,\n        tailMessageRule,\n        sameNameMessageRule,\n        sameHeaderMessageRule,\n        sameFooterMessageRule,\n        sameAvatarMessageRule,\n        customClassMessageRule,\n        renderMessage\n      }));\n\n      if (typing) {\n        f7Messages.current.showTyping();\n      }\n    });\n  };\n\n  const onDestroy = () => {\n    if (f7Messages.current && f7Messages.current.destroy) f7Messages.current.destroy();\n    f7Messages.current = null;\n  };\n\n  useIsomorphicLayoutEffect(() => {\n    onMount();\n    return onDestroy;\n  }, []);\n  const currentChildrenLength = children ? React.Children.count(children) : 0;\n\n  if (f7Messages.current && scrollMessages) {\n    const beforeChildrenLength = reactChildrenBefore.current || 0;\n\n    if (currentChildrenLength !== beforeChildrenLength) {\n      f7Messages.current.setScrollData();\n    }\n  }\n\n  reactChildrenBefore.current = currentChildrenLength;\n  useIsomorphicLayoutEffect(() => {\n    const wasMounted = mounted.current;\n    mounted.current = true;\n    if (!init || !elRef.current) return;\n    const childElements = elRef.current.children;\n    if (!childElements) return;\n    const childrenAfterUpdated = childElements.length;\n\n    if (!wasMounted) {\n      for (let i = 0; i < childElements.length; i += 1) {\n        childElements[i].classList.add('message-appeared');\n      }\n\n      return;\n    }\n\n    for (let i = 0; i < childElements.length; i += 1) {\n      if (!childElements[i].classList.contains('message-appeared')) {\n        childElements[i].classList.add('message-appear-from-bottom');\n      }\n    }\n\n    if (f7Messages.current) {\n      if (f7Messages.current.layout && autoLayout) {\n        f7Messages.current.layout();\n      }\n\n      if (childrenBeforeUpdated.current !== childrenAfterUpdated && f7Messages.current.scroll && f7Messages.current.scrollData && scrollMessages) {\n        f7Messages.current.scrollWithEdgeCheck(true);\n      }\n    }\n\n    childrenBeforeUpdated.current = childrenAfterUpdated;\n  });\n  watchProp(typing, newValue => {\n    if (!f7Messages.current) return;\n    if (newValue) f7Messages.current.showTyping();else f7Messages.current.hideTyping();\n  });\n  const classes = classNames(className, 'messages', colorClasses(props));\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    id: id,\n    style: style,\n    className: classes,\n    ref: elRef\n  }, extraAttrs), children);\n});\nMessages.displayName = 'f7-messages';\nexport default Messages;"],"mappings":"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"},"metadata":{},"sourceType":"module"}