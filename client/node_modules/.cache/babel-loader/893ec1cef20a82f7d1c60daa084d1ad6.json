{"ast":null,"code":"import { extend, nextTick, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\nimport $ from '../../shared/dom7.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport { getSupport } from '../../shared/get-support.js';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx.js';\n\nclass Calendar extends Framework7Class {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const calendar = this;\n    calendar.params = extend({}, app.params.calendar, params);\n    let $containerEl;\n\n    if (calendar.params.containerEl) {\n      $containerEl = $(calendar.params.containerEl);\n      if ($containerEl.length === 0) return calendar;\n    }\n\n    let $inputEl;\n\n    if (calendar.params.inputEl) {\n      $inputEl = $(calendar.params.inputEl);\n    }\n\n    const isHorizontal = calendar.params.direction === 'horizontal';\n    let inverter = 1;\n\n    if (isHorizontal) {\n      inverter = app.rtl ? -1 : 1;\n    }\n\n    extend(calendar, {\n      app,\n      $containerEl,\n      containerEl: $containerEl && $containerEl[0],\n      inline: $containerEl && $containerEl.length > 0,\n      $inputEl,\n      inputEl: $inputEl && $inputEl[0],\n      initialized: false,\n      opened: false,\n      url: calendar.params.url,\n      isHorizontal,\n      inverter,\n      animating: false,\n      allowTouchMove: true,\n      hasTimePicker: calendar.params.timePicker && !calendar.params.rangePicker && !calendar.params.multiple\n    });\n\n    calendar.dayFormatter = date => {\n      const formatter = new Intl.DateTimeFormat(calendar.params.locale, {\n        day: 'numeric'\n      });\n      return formatter.format(date).replace(/æ—¥/, '');\n    };\n\n    calendar.monthFormatter = date => {\n      const formatter = new Intl.DateTimeFormat(calendar.params.locale, {\n        month: 'long'\n      });\n      return formatter.format(date);\n    };\n\n    calendar.yearFormatter = date => {\n      const formatter = new Intl.DateTimeFormat(calendar.params.locale, {\n        year: 'numeric'\n      });\n      return formatter.format(date);\n    };\n\n    calendar.timeSelectorFormatter = date => {\n      const formatter = new Intl.DateTimeFormat(calendar.params.locale, calendar.params.timePickerFormat);\n      return formatter.format(date);\n    };\n\n    const timeFormatCheckDate = calendar.timeSelectorFormatter(new Date()).toLowerCase();\n    calendar.is12HoursFormat = timeFormatCheckDate.indexOf('pm') >= 0 || timeFormatCheckDate.indexOf('am') >= 0; // Auto names\n\n    let {\n      monthNames,\n      monthNamesShort,\n      dayNames,\n      dayNamesShort\n    } = calendar.params;\n    const {\n      monthNamesIntl,\n      monthNamesShortIntl,\n      dayNamesIntl,\n      dayNamesShortIntl\n    } = calendar.getIntlNames();\n    if (monthNames === 'auto') monthNames = monthNamesIntl;\n    if (monthNamesShort === 'auto') monthNamesShort = monthNamesShortIntl;\n    if (dayNames === 'auto') dayNames = dayNamesIntl;\n    if (dayNamesShort === 'auto') dayNamesShort = dayNamesShortIntl;\n    extend(calendar, {\n      monthNames,\n      monthNamesShort,\n      dayNames,\n      dayNamesShort\n    });\n\n    function onInputClick() {\n      calendar.open();\n    }\n\n    function onInputFocus(e) {\n      e.preventDefault();\n    }\n\n    function onInputClear() {\n      calendar.setValue([]);\n\n      if (calendar.opened) {\n        calendar.update();\n      }\n    }\n\n    function onHtmlClick(e) {\n      const $targetEl = $(e.target);\n      if (calendar.destroyed || !calendar.params) return;\n      if (calendar.isPopover()) return;\n      if (!calendar.opened || calendar.closing) return;\n      if ($targetEl.closest('[class*=\"backdrop\"]').length) return;\n      if (calendar.monthPickerPopover || calendar.yearPickerPopover || calendar.timePickerPopover) return;\n\n      if ($inputEl && $inputEl.length > 0) {\n        if ($targetEl[0] !== $inputEl[0] && $targetEl.closest('.sheet-modal, .calendar-modal').length === 0) {\n          calendar.close();\n        }\n      } else if ($(e.target).closest('.sheet-modal, .calendar-modal').length === 0) {\n        calendar.close();\n      }\n    } // Events\n\n\n    extend(calendar, {\n      attachInputEvents() {\n        calendar.$inputEl.on('click', onInputClick);\n        calendar.$inputEl.on('input:clear', onInputClear);\n\n        if (calendar.params.inputReadOnly) {\n          calendar.$inputEl.on('focus mousedown', onInputFocus);\n\n          if (calendar.$inputEl[0]) {\n            calendar.$inputEl[0].f7ValidateReadonly = true;\n          }\n        }\n      },\n\n      detachInputEvents() {\n        calendar.$inputEl.off('click', onInputClick);\n        calendar.$inputEl.off('input:clear', onInputClear);\n\n        if (calendar.params.inputReadOnly) {\n          calendar.$inputEl.off('focus mousedown', onInputFocus);\n\n          if (calendar.$inputEl[0]) {\n            delete calendar.$inputEl[0].f7ValidateReadonly;\n          }\n        }\n      },\n\n      attachHtmlEvents() {\n        app.on('click', onHtmlClick);\n      },\n\n      detachHtmlEvents() {\n        app.off('click', onHtmlClick);\n      }\n\n    });\n\n    calendar.attachCalendarEvents = function attachCalendarEvents() {\n      let allowItemClick = true;\n      let isTouched;\n      let isMoved;\n      let touchStartX;\n      let touchStartY;\n      let touchCurrentX;\n      let touchCurrentY;\n      let touchStartTime;\n      let touchEndTime;\n      let currentTranslate;\n      let wrapperWidth;\n      let wrapperHeight;\n      let percentage;\n      let touchesDiff;\n      let isScrolling;\n      const {\n        $el,\n        $wrapperEl\n      } = calendar;\n\n      function handleTouchStart(e) {\n        if (isMoved || isTouched) return;\n        isTouched = true;\n        touchStartX = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n        touchCurrentX = touchStartX;\n        touchStartY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n        touchCurrentY = touchStartY;\n        touchStartTime = new Date().getTime();\n        percentage = 0;\n        allowItemClick = true;\n        isScrolling = undefined;\n        currentTranslate = calendar.monthsTranslate;\n      }\n\n      function handleTouchMove(e) {\n        if (!isTouched) return;\n        const {\n          isHorizontal: isH\n        } = calendar;\n        touchCurrentX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n        touchCurrentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n        if (typeof isScrolling === 'undefined') {\n          isScrolling = !!(isScrolling || Math.abs(touchCurrentY - touchStartY) > Math.abs(touchCurrentX - touchStartX));\n        }\n\n        if (isH && isScrolling || !calendar.allowTouchMove) {\n          isTouched = false;\n          return;\n        }\n\n        e.preventDefault();\n\n        if (calendar.animating) {\n          isTouched = false;\n          return;\n        }\n\n        allowItemClick = false;\n\n        if (!isMoved) {\n          // First move\n          isMoved = true;\n          wrapperWidth = $wrapperEl[0].offsetWidth;\n          wrapperHeight = $wrapperEl[0].offsetHeight;\n          $wrapperEl.transition(0);\n        }\n\n        touchesDiff = isH ? touchCurrentX - touchStartX : touchCurrentY - touchStartY;\n        percentage = touchesDiff / (isH ? wrapperWidth : wrapperHeight);\n        currentTranslate = (calendar.monthsTranslate * calendar.inverter + percentage) * 100; // Transform wrapper\n\n        $wrapperEl.transform(`translate3d(${isH ? currentTranslate : 0}%, ${isH ? 0 : currentTranslate}%, 0)`);\n      }\n\n      function handleTouchEnd() {\n        if (!isTouched || !isMoved) {\n          isTouched = false;\n          isMoved = false;\n          return;\n        }\n\n        isTouched = false;\n        isMoved = false;\n        touchEndTime = new Date().getTime();\n\n        if (touchEndTime - touchStartTime < 300) {\n          if (Math.abs(touchesDiff) < 10) {\n            calendar.resetMonth();\n          } else if (touchesDiff >= 10) {\n            if (app.rtl) calendar.nextMonth();else calendar.prevMonth();\n          } else if (app.rtl) calendar.prevMonth();else calendar.nextMonth();\n        } else if (percentage <= -0.5) {\n          if (app.rtl) calendar.prevMonth();else calendar.nextMonth();\n        } else if (percentage >= 0.5) {\n          if (app.rtl) calendar.nextMonth();else calendar.prevMonth();\n        } else {\n          calendar.resetMonth();\n        } // Allow click\n\n\n        setTimeout(() => {\n          allowItemClick = true;\n        }, 100);\n      }\n\n      function handleDayClick(e) {\n        if (!allowItemClick) return;\n        let $dayEl = $(e.target).parents('.calendar-day');\n\n        if ($dayEl.length === 0 && $(e.target).hasClass('calendar-day')) {\n          $dayEl = $(e.target);\n        }\n\n        if ($dayEl.length === 0) return;\n        if ($dayEl.hasClass('calendar-day-disabled')) return;\n\n        if (!calendar.params.rangePicker) {\n          if ($dayEl.hasClass('calendar-day-next')) calendar.nextMonth();\n          if ($dayEl.hasClass('calendar-day-prev')) calendar.prevMonth();\n        }\n\n        const dateYear = parseInt($dayEl.attr('data-year'), 10);\n        const dateMonth = parseInt($dayEl.attr('data-month'), 10);\n        const dateDay = parseInt($dayEl.attr('data-day'), 10);\n        calendar.emit('local::dayClick calendarDayClick', calendar, $dayEl[0], dateYear, dateMonth, dateDay);\n\n        if (!$dayEl.hasClass('calendar-day-selected') || calendar.params.multiple || calendar.params.rangePicker) {\n          const valueToAdd = new Date(dateYear, dateMonth, dateDay, 0, 0, 0);\n\n          if (calendar.hasTimePicker) {\n            if (calendar.value && calendar.value[0]) {\n              valueToAdd.setHours(calendar.value[0].getHours(), calendar.value[0].getMinutes());\n            } else {\n              valueToAdd.setHours(new Date().getHours(), new Date().getMinutes());\n            }\n          }\n\n          calendar.addValue(valueToAdd);\n        }\n\n        if (calendar.params.closeOnSelect) {\n          if (calendar.params.rangePicker && calendar.value.length === 2 || !calendar.params.rangePicker) {\n            calendar.close();\n          }\n        }\n      }\n\n      function onNextMonthClick() {\n        calendar.nextMonth();\n      }\n\n      function onPrevMonthClick() {\n        calendar.prevMonth();\n      }\n\n      function onNextYearClick() {\n        calendar.nextYear();\n      }\n\n      function onPrevYearClick() {\n        calendar.prevYear();\n      }\n\n      function onMonthSelectorClick() {\n        calendar.openMonthPicker();\n      }\n\n      function onYearSelectorClick() {\n        calendar.openYearPicker();\n      }\n\n      function onTimeSelectorClick() {\n        calendar.openTimePicker();\n      }\n\n      const passiveListener = app.touchEvents.start === 'touchstart' && getSupport().passiveListener ? {\n        passive: true,\n        capture: false\n      } : false; // Selectors clicks\n\n      $el.find('.calendar-prev-month-button').on('click', onPrevMonthClick);\n      $el.find('.calendar-next-month-button').on('click', onNextMonthClick);\n      $el.find('.calendar-prev-year-button').on('click', onPrevYearClick);\n      $el.find('.calendar-next-year-button').on('click', onNextYearClick);\n\n      if (calendar.params.monthPicker) {\n        $el.find('.current-month-value').on('click', onMonthSelectorClick);\n      }\n\n      if (calendar.params.yearPicker) {\n        $el.find('.current-year-value').on('click', onYearSelectorClick);\n      }\n\n      if (calendar.hasTimePicker) {\n        $el.find('.calendar-time-selector a').on('click', onTimeSelectorClick);\n      } // Day clicks\n\n\n      $wrapperEl.on('click', handleDayClick); // Touch events\n\n      if (calendar.params.touchMove) {\n        $wrapperEl.on(app.touchEvents.start, handleTouchStart, passiveListener);\n        app.on('touchmove:active', handleTouchMove);\n        app.on('touchend:passive', handleTouchEnd);\n      }\n\n      calendar.detachCalendarEvents = function detachCalendarEvents() {\n        $el.find('.calendar-prev-month-button').off('click', onPrevMonthClick);\n        $el.find('.calendar-next-month-button').off('click', onNextMonthClick);\n        $el.find('.calendar-prev-year-button').off('click', onPrevYearClick);\n        $el.find('.calendar-next-year-button').off('click', onNextYearClick);\n\n        if (calendar.params.monthPicker) {\n          $el.find('.current-month-value').off('click', onMonthSelectorClick);\n        }\n\n        if (calendar.params.yearPicker) {\n          $el.find('.current-year-value').off('click', onYearSelectorClick);\n        }\n\n        if (calendar.hasTimePicker) {\n          $el.find('.calendar-time-selector a').off('click', onTimeSelectorClick);\n        }\n\n        $wrapperEl.off('click', handleDayClick);\n\n        if (calendar.params.touchMove) {\n          $wrapperEl.off(app.touchEvents.start, handleTouchStart, passiveListener);\n          app.off('touchmove:active', handleTouchMove);\n          app.off('touchend:passive', handleTouchEnd);\n        }\n      };\n    };\n\n    calendar.init();\n    return calendar;\n  }\n\n  get view() {\n    const {\n      $inputEl,\n      app,\n      params\n    } = this;\n    let view;\n\n    if (params.view) {\n      view = params.view;\n    } else if ($inputEl) {\n      view = $inputEl.parents('.view').length && $inputEl.parents('.view')[0].f7View;\n    }\n\n    if (!view) view = app.views.main;\n    return view;\n  }\n\n  getIntlNames() {\n    const calendar = this;\n    const locale = calendar.params.locale;\n    const monthNamesIntl = [];\n    const monthNamesShortIntl = [];\n    const dayNamesIntl = [];\n    const dayNamesShortIntl = [];\n    const formatterMonthNames = new Intl.DateTimeFormat(locale, {\n      month: 'long'\n    });\n    const formatterMonthNamesShort = new Intl.DateTimeFormat(locale, {\n      month: 'short'\n    });\n    const formatterDayNames = new Intl.DateTimeFormat(locale, {\n      weekday: 'long'\n    });\n    const formatterDayNamesShort = new Intl.DateTimeFormat(locale, {\n      weekday: 'short'\n    });\n    let year;\n    let yearStarted;\n    let yearEnded;\n\n    for (let i = 0; i < 24; i += 1) {\n      const date = new Date().setMonth(i, 1);\n      const currentYear = calendar.yearFormatter(date);\n\n      if (year && currentYear !== year) {\n        if (yearStarted) yearEnded = true;\n        yearStarted = true;\n        year = currentYear;\n      }\n\n      if (!year) {\n        year = currentYear;\n      }\n\n      if (yearStarted && year === currentYear && !yearEnded) {\n        monthNamesIntl.push(formatterMonthNames.format(date));\n        monthNamesShortIntl.push(formatterMonthNamesShort.format(date));\n      }\n    }\n\n    const weekDay = new Date().getDay();\n\n    for (let i = 0; i < 7; i += 1) {\n      const date = new Date().getTime() + (i - weekDay) * 24 * 60 * 60 * 1000;\n      dayNamesIntl.push(formatterDayNames.format(date));\n      dayNamesShortIntl.push(formatterDayNamesShort.format(date));\n    }\n\n    return {\n      monthNamesIntl,\n      monthNamesShortIntl,\n      dayNamesIntl,\n      dayNamesShortIntl\n    };\n  }\n\n  normalizeDate(date) {\n    const calendar = this;\n    const d = new Date(date);\n\n    if (calendar.hasTimePicker) {\n      return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes());\n    }\n\n    return new Date(d.getFullYear(), d.getMonth(), d.getDate());\n  }\n\n  normalizeValues(values) {\n    const calendar = this;\n    let newValues = [];\n\n    if (values && Array.isArray(values)) {\n      newValues = values.map(val => calendar.normalizeDate(val));\n    }\n\n    return newValues;\n  }\n\n  initInput() {\n    const calendar = this;\n    if (!calendar.$inputEl) return;\n    if (calendar.params.inputReadOnly) calendar.$inputEl.prop('readOnly', true);\n  }\n\n  isPopover() {\n    const calendar = this;\n    const {\n      app,\n      modal,\n      params\n    } = calendar;\n    const device = getDevice();\n    if (params.openIn === 'sheet') return false;\n    if (modal && modal.type !== 'popover') return false;\n\n    if (!calendar.inline && calendar.inputEl) {\n      if (params.openIn === 'popover') return true;\n\n      if (device.ios) {\n        return !!device.ipad;\n      }\n\n      if (app.width >= 768) {\n        return true;\n      }\n\n      if (device.desktop && app.theme === 'aurora') {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  formatDate(d) {\n    const calendar = this;\n    const date = new Date(d);\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const month1 = month + 1;\n    const day = date.getDate();\n    const weekDay = date.getDay();\n    const {\n      monthNames,\n      monthNamesShort,\n      dayNames,\n      dayNamesShort\n    } = calendar;\n    const {\n      dateFormat,\n      locale\n    } = calendar.params;\n\n    function twoDigits(number) {\n      return number < 10 ? `0${number}` : number;\n    }\n\n    if (typeof dateFormat === 'string') {\n      const tokens = {\n        yyyy: year,\n        yy: String(year).substring(2),\n        mm: twoDigits(month1),\n        m: month1,\n        MM: monthNames[month],\n        M: monthNamesShort[month],\n        dd: twoDigits(day),\n        d: day,\n        DD: dayNames[weekDay],\n        D: dayNamesShort[weekDay]\n      };\n\n      if (calendar.params.timePicker) {\n        const hours = date.getHours();\n        const minutes = date.getMinutes();\n        const seconds = date.getSeconds();\n        let hours12 = hours;\n        if (hours > 12) hours12 = hours - 12;\n        if (hours === 0) hours12 = 12;\n        const a = hours >= 12 && hours !== 0 ? 'pm' : 'am';\n        Object.assign(tokens, {\n          HH: twoDigits(hours),\n          H: hours,\n          hh: twoDigits(hours12),\n          h: hours12,\n          ss: twoDigits(seconds),\n          s: seconds,\n          ':mm': twoDigits(minutes),\n          ':m': minutes,\n          a,\n          A: a.toUpperCase()\n        });\n      }\n\n      const regexp = new RegExp(Object.keys(tokens).map(t => `(${t})`).join('|'), 'g');\n      return dateFormat.replace(regexp, token => {\n        if (token in tokens) return tokens[token];\n        return token;\n      });\n    }\n\n    if (typeof dateFormat === 'function') {\n      return dateFormat(date);\n    } // Intl Object\n\n\n    const formatter = new Intl.DateTimeFormat(locale, dateFormat);\n    return formatter.format(date);\n  }\n\n  formatValue() {\n    const calendar = this;\n    const {\n      value\n    } = calendar;\n\n    if (calendar.params.formatValue) {\n      return calendar.params.formatValue.call(calendar, value);\n    }\n\n    return value.map(v => calendar.formatDate(v)).join(calendar.params.rangePicker ? ' - ' : ', ');\n  }\n\n  addValue(newValue) {\n    const calendar = this;\n    const {\n      multiple,\n      rangePicker,\n      rangePickerMinDays,\n      rangePickerMaxDays\n    } = calendar.params;\n\n    if (multiple) {\n      if (!calendar.value) calendar.value = [];\n      let inValuesIndex;\n\n      for (let i = 0; i < calendar.value.length; i += 1) {\n        if (new Date(newValue).getTime() === new Date(calendar.value[i]).getTime()) {\n          inValuesIndex = i;\n        }\n      }\n\n      if (typeof inValuesIndex === 'undefined') {\n        calendar.value.push(newValue);\n      } else {\n        calendar.value.splice(inValuesIndex, 1);\n      }\n\n      calendar.updateValue();\n    } else if (rangePicker) {\n      if (!calendar.value) calendar.value = [];\n\n      if (calendar.value.length === 2 || calendar.value.length === 0) {\n        calendar.value = [];\n      }\n\n      if (calendar.value.length === 0 || Math.abs(calendar.value[0].getTime() - newValue.getTime()) >= (rangePickerMinDays - 1) * 60 * 60 * 24 * 1000 && (rangePickerMaxDays === 0 || Math.abs(calendar.value[0].getTime() - newValue.getTime()) <= (rangePickerMaxDays - 1) * 60 * 60 * 24 * 1000)) calendar.value.push(newValue);else calendar.value = [];\n      calendar.value.sort((a, b) => a - b);\n      calendar.updateValue();\n    } else {\n      calendar.value = [newValue];\n      calendar.updateValue();\n    }\n  }\n\n  setValue(values) {\n    const calendar = this;\n    const currentValue = calendar.value;\n\n    if (Array.isArray(currentValue) && Array.isArray(values) && currentValue.length === values.length) {\n      let equal = true;\n      currentValue.forEach((v, index) => {\n        if (v !== values[index]) equal = false;\n      });\n      if (equal) return;\n    }\n\n    calendar.value = values;\n    calendar.updateValue();\n  }\n\n  getValue() {\n    const calendar = this;\n    return calendar.value;\n  }\n\n  updateValue(onlyHeader) {\n    const calendar = this;\n    const {\n      $el,\n      $wrapperEl,\n      $inputEl,\n      value,\n      params\n    } = calendar;\n    let i;\n\n    if ($el && $el.length > 0) {\n      $wrapperEl.find('.calendar-day-selected').removeClass('calendar-day-selected calendar-day-selected-range calendar-day-selected-left calendar-day-selected-right');\n      let valueDate;\n\n      if (params.rangePicker && value.length === 2) {\n        const leftDate = new Date(value[0]).getTime();\n        const rightDate = new Date(value[1]).getTime();\n\n        for (i = leftDate; i <= rightDate; i += 24 * 60 * 60 * 1000) {\n          valueDate = new Date(i);\n          let addClass = 'calendar-day-selected';\n\n          if (leftDate !== rightDate) {\n            if (i !== leftDate && i !== rightDate) {\n              addClass += ' calendar-day-selected-range';\n            }\n\n            if (i === leftDate) {\n              addClass += ' calendar-day-selected-left';\n            }\n\n            if (i === rightDate) {\n              addClass += ' calendar-day-selected-right';\n            }\n          }\n\n          $wrapperEl.find(`.calendar-day[data-date=\"${valueDate.getFullYear()}-${valueDate.getMonth()}-${valueDate.getDate()}\"]`).addClass(addClass);\n        }\n\n        valueDate = new Date(leftDate);\n        $wrapperEl.find(`.calendar-day[data-date=\"${valueDate.getFullYear()}-${valueDate.getMonth()}-${valueDate.getDate()}\"]`).removeClass('calendar-day-selected-range').addClass('calendar-day-selected calendar-day-selected-left');\n        valueDate = new Date(rightDate);\n        $wrapperEl.find(`.calendar-day[data-date=\"${valueDate.getFullYear()}-${valueDate.getMonth()}-${valueDate.getDate()}\"]`).removeClass('calendar-day-selected-range').addClass('calendar-day-selected calendar-day-selected-right');\n      } else {\n        for (i = 0; i < calendar.value.length; i += 1) {\n          valueDate = new Date(value[i]);\n          $wrapperEl.find(`.calendar-day[data-date=\"${valueDate.getFullYear()}-${valueDate.getMonth()}-${valueDate.getDate()}\"]`).addClass('calendar-day-selected');\n        }\n      }\n    }\n\n    if (!onlyHeader) {\n      calendar.emit('local::change calendarChange', calendar, value);\n    }\n\n    if ($el && $el.length > 0 && calendar.hasTimePicker) {\n      $el.find('.calendar-time-selector a').text(value && value.length ? calendar.timeSelectorFormatter(value[0]) : calendar.params.timePickerPlaceholder);\n    }\n\n    if ($inputEl && $inputEl.length || params.header) {\n      const inputValue = calendar.formatValue(value);\n\n      if (params.header && $el && $el.length) {\n        $el.find('.calendar-selected-date').text(inputValue);\n      }\n\n      if ($inputEl && $inputEl.length && !onlyHeader) {\n        $inputEl.val(inputValue);\n        $inputEl.trigger('change');\n      }\n    }\n  }\n\n  updateCurrentMonthYear(dir) {\n    const calendar = this;\n    const {\n      $months,\n      $el,\n      monthNames\n    } = calendar;\n    let currentLocaleMonth;\n    let currentLocaleYear;\n\n    if (typeof dir === 'undefined') {\n      calendar.currentMonth = parseInt($months.eq(1).attr('data-month'), 10);\n      calendar.currentYear = parseInt($months.eq(1).attr('data-year'), 10);\n      currentLocaleMonth = $months.eq(1).attr('data-locale-month');\n      currentLocaleYear = $months.eq(1).attr('data-locale-year');\n    } else {\n      calendar.currentMonth = parseInt($months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-month'), 10);\n      calendar.currentYear = parseInt($months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-year'), 10);\n      currentLocaleMonth = $months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-locale-month');\n      currentLocaleYear = $months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-locale-year');\n    }\n\n    $el.find('.current-month-value').text(monthNames[currentLocaleMonth]);\n    $el.find('.current-year-value').text(currentLocaleYear);\n  }\n\n  update() {\n    const calendar = this;\n    const {\n      currentYear,\n      currentMonth,\n      $wrapperEl\n    } = calendar;\n    const currentDate = new Date(currentYear, currentMonth);\n    const prevMonthHtml = calendar.renderMonth(currentDate, 'prev');\n    const currentMonthHtml = calendar.renderMonth(currentDate);\n    const nextMonthHtml = calendar.renderMonth(currentDate, 'next');\n    $wrapperEl.transition(0).html(`${prevMonthHtml}${currentMonthHtml}${nextMonthHtml}`).transform('translate3d(0,0,0)');\n    calendar.$months = $wrapperEl.find('.calendar-month');\n    calendar.monthsTranslate = 0;\n    calendar.setMonthsTranslate();\n    calendar.$months.each(monthEl => {\n      calendar.emit('local::monthAdd calendarMonthAdd', monthEl);\n    });\n  }\n\n  onMonthChangeStart(dir) {\n    const calendar = this;\n    const {\n      $months,\n      currentYear,\n      currentMonth\n    } = calendar;\n    calendar.updateCurrentMonthYear(dir);\n    $months.removeClass('calendar-month-current calendar-month-prev calendar-month-next');\n    const currentIndex = dir === 'next' ? $months.length - 1 : 0;\n    $months.eq(currentIndex).addClass('calendar-month-current');\n    $months.eq(dir === 'next' ? currentIndex - 1 : currentIndex + 1).addClass(dir === 'next' ? 'calendar-month-prev' : 'calendar-month-next');\n    calendar.emit('local::monthYearChangeStart calendarMonthYearChangeStart', calendar, currentYear, currentMonth);\n  }\n\n  onMonthChangeEnd(dir, rebuildBoth) {\n    const calendar = this;\n    const {\n      currentYear,\n      currentMonth,\n      $wrapperEl,\n      monthsTranslate\n    } = calendar;\n    calendar.animating = false;\n    let nextMonthHtml;\n    let prevMonthHtml;\n    let currentMonthHtml;\n    $wrapperEl.find('.calendar-month:not(.calendar-month-prev):not(.calendar-month-current):not(.calendar-month-next)').remove();\n\n    if (typeof dir === 'undefined') {\n      dir = 'next'; // eslint-disable-line\n\n      rebuildBoth = true; // eslint-disable-line\n    }\n\n    if (!rebuildBoth) {\n      currentMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), dir);\n    } else {\n      $wrapperEl.find('.calendar-month-next, .calendar-month-prev').remove();\n      prevMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), 'prev');\n      nextMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), 'next');\n    }\n\n    if (dir === 'next' || rebuildBoth) {\n      $wrapperEl.append(currentMonthHtml || nextMonthHtml);\n    }\n\n    if (dir === 'prev' || rebuildBoth) {\n      $wrapperEl.prepend(currentMonthHtml || prevMonthHtml);\n    }\n\n    const $months = $wrapperEl.find('.calendar-month');\n    calendar.$months = $months;\n    calendar.setMonthsTranslate(monthsTranslate);\n    calendar.emit('local::monthAdd calendarMonthAdd', calendar, dir === 'next' ? $months.eq($months.length - 1)[0] : $months.eq(0)[0]);\n    calendar.emit('local::monthYearChangeEnd calendarMonthYearChangeEnd', calendar, currentYear, currentMonth);\n  }\n\n  setMonthsTranslate(translate) {\n    const calendar = this;\n    const {\n      $months,\n      isHorizontal: isH,\n      inverter\n    } = calendar; // eslint-disable-next-line\n\n    translate = translate || calendar.monthsTranslate || 0;\n\n    if (typeof calendar.monthsTranslate === 'undefined') {\n      calendar.monthsTranslate = translate;\n    }\n\n    $months.removeClass('calendar-month-current calendar-month-prev calendar-month-next');\n    const prevMonthTranslate = -(translate + 1) * 100 * inverter;\n    const currentMonthTranslate = -translate * 100 * inverter;\n    const nextMonthTranslate = -(translate - 1) * 100 * inverter;\n    $months.eq(0).transform(`translate3d(${isH ? prevMonthTranslate : 0}%, ${isH ? 0 : prevMonthTranslate}%, 0)`).addClass('calendar-month-prev');\n    $months.eq(1).transform(`translate3d(${isH ? currentMonthTranslate : 0}%, ${isH ? 0 : currentMonthTranslate}%, 0)`).addClass('calendar-month-current');\n    $months.eq(2).transform(`translate3d(${isH ? nextMonthTranslate : 0}%, ${isH ? 0 : nextMonthTranslate}%, 0)`).addClass('calendar-month-next');\n  }\n\n  nextMonth(transition) {\n    const calendar = this;\n    const {\n      params,\n      $wrapperEl,\n      inverter,\n      isHorizontal: isH\n    } = calendar;\n\n    if (typeof transition === 'undefined' || typeof transition === 'object') {\n      transition = ''; // eslint-disable-line\n\n      if (!params.animate) transition = 0; // eslint-disable-line\n    }\n\n    const nextMonth = parseInt(calendar.$months.eq(calendar.$months.length - 1).attr('data-month'), 10);\n    const nextYear = parseInt(calendar.$months.eq(calendar.$months.length - 1).attr('data-year'), 10);\n    const nextDate = new Date(nextYear, nextMonth);\n    const nextDateTime = nextDate.getTime();\n    const transitionEndCallback = !calendar.animating;\n\n    if (params.maxDate) {\n      if (nextDateTime > new Date(params.maxDate).getTime()) {\n        calendar.resetMonth();\n        return;\n      }\n    }\n\n    calendar.monthsTranslate -= 1;\n\n    if (nextMonth === calendar.currentMonth) {\n      const nextMonthTranslate = -calendar.monthsTranslate * 100 * inverter;\n      const nextMonthHtml = $(calendar.renderMonth(nextDateTime, 'next')).transform(`translate3d(${isH ? nextMonthTranslate : 0}%, ${isH ? 0 : nextMonthTranslate}%, 0)`).addClass('calendar-month-next');\n      $wrapperEl.append(nextMonthHtml[0]);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      calendar.emit('local::monthAdd calendarMonthAdd', calendar.$months.eq(calendar.$months.length - 1)[0]);\n    }\n\n    calendar.animating = true;\n    calendar.onMonthChangeStart('next');\n    const translate = calendar.monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(`translate3d(${isH ? translate : 0}%, ${isH ? 0 : translate}%, 0)`);\n\n    if (transitionEndCallback) {\n      $wrapperEl.transitionEnd(() => {\n        calendar.onMonthChangeEnd('next');\n      });\n    }\n\n    if (!params.animate) {\n      calendar.onMonthChangeEnd('next');\n    }\n  }\n\n  prevMonth(transition) {\n    const calendar = this;\n    const {\n      params,\n      $wrapperEl,\n      inverter,\n      isHorizontal: isH\n    } = calendar;\n\n    if (typeof transition === 'undefined' || typeof transition === 'object') {\n      transition = ''; // eslint-disable-line\n\n      if (!params.animate) transition = 0; // eslint-disable-line\n    }\n\n    const prevMonth = parseInt(calendar.$months.eq(0).attr('data-month'), 10);\n    const prevYear = parseInt(calendar.$months.eq(0).attr('data-year'), 10);\n    const prevDate = new Date(prevYear, prevMonth + 1, -1);\n    const prevDateTime = prevDate.getTime();\n    const transitionEndCallback = !calendar.animating;\n\n    if (params.minDate) {\n      let minDate = new Date(params.minDate);\n      minDate = new Date(minDate.getFullYear(), minDate.getMonth(), 1);\n\n      if (prevDateTime < minDate.getTime()) {\n        calendar.resetMonth();\n        return;\n      }\n    }\n\n    calendar.monthsTranslate += 1;\n\n    if (prevMonth === calendar.currentMonth) {\n      const prevMonthTranslate = -calendar.monthsTranslate * 100 * inverter;\n      const prevMonthHtml = $(calendar.renderMonth(prevDateTime, 'prev')).transform(`translate3d(${isH ? prevMonthTranslate : 0}%, ${isH ? 0 : prevMonthTranslate}%, 0)`).addClass('calendar-month-prev');\n      $wrapperEl.prepend(prevMonthHtml[0]);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      calendar.emit('local::monthAdd calendarMonthAdd', calendar.$months.eq(0)[0]);\n    }\n\n    calendar.animating = true;\n    calendar.onMonthChangeStart('prev');\n    const translate = calendar.monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(`translate3d(${isH ? translate : 0}%, ${isH ? 0 : translate}%, 0)`);\n\n    if (transitionEndCallback) {\n      $wrapperEl.transitionEnd(() => {\n        calendar.onMonthChangeEnd('prev');\n      });\n    }\n\n    if (!params.animate) {\n      calendar.onMonthChangeEnd('prev');\n    }\n  }\n\n  resetMonth(transition) {\n    if (transition === void 0) {\n      transition = '';\n    }\n\n    const calendar = this;\n    const {\n      $wrapperEl,\n      inverter,\n      isHorizontal: isH,\n      monthsTranslate\n    } = calendar;\n    const translate = monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(`translate3d(${isH ? translate : 0}%, ${isH ? 0 : translate}%, 0)`);\n  } // eslint-disable-next-line\n\n\n  setYearMonth(year, month, transition) {\n    const calendar = this;\n    const {\n      params,\n      isHorizontal: isH,\n      $wrapperEl,\n      inverter\n    } = calendar; // eslint-disable-next-line\n\n    if (typeof year === 'undefined') year = calendar.currentYear; // eslint-disable-next-line\n\n    if (typeof month === 'undefined') month = calendar.currentMonth;\n\n    if (typeof transition === 'undefined' || typeof transition === 'object') {\n      // eslint-disable-next-line\n      transition = ''; // eslint-disable-next-line\n\n      if (!params.animate) transition = 0;\n    }\n\n    let targetDate;\n\n    if (year < calendar.currentYear) {\n      targetDate = new Date(year, month + 1, -1).getTime();\n    } else {\n      targetDate = new Date(year, month).getTime();\n    }\n\n    if (params.maxDate && targetDate > new Date(params.maxDate).getTime()) {\n      return false;\n    }\n\n    if (params.minDate) {\n      let minDate = new Date(params.minDate);\n      minDate = new Date(minDate.getFullYear(), minDate.getMonth(), 1);\n\n      if (targetDate < minDate.getTime()) {\n        return false;\n      }\n    }\n\n    const currentDate = new Date(calendar.currentYear, calendar.currentMonth).getTime();\n    const dir = targetDate > currentDate ? 'next' : 'prev';\n    const newMonthHTML = calendar.renderMonth(new Date(year, month));\n    calendar.monthsTranslate = calendar.monthsTranslate || 0;\n    const prevTranslate = calendar.monthsTranslate;\n    let monthTranslate;\n    const transitionEndCallback = !calendar.animating && transition !== 0;\n\n    if (targetDate > currentDate) {\n      // To next\n      calendar.monthsTranslate -= 1;\n      if (!calendar.animating) calendar.$months.eq(calendar.$months.length - 1).remove();\n      $wrapperEl.append(newMonthHTML);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      monthTranslate = -(prevTranslate - 1) * 100 * inverter;\n      calendar.$months.eq(calendar.$months.length - 1).transform(`translate3d(${isH ? monthTranslate : 0}%, ${isH ? 0 : monthTranslate}%, 0)`).addClass('calendar-month-next');\n    } else {\n      // To prev\n      calendar.monthsTranslate += 1;\n      if (!calendar.animating) calendar.$months.eq(0).remove();\n      $wrapperEl.prepend(newMonthHTML);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      monthTranslate = -(prevTranslate + 1) * 100 * inverter;\n      calendar.$months.eq(0).transform(`translate3d(${isH ? monthTranslate : 0}%, ${isH ? 0 : monthTranslate}%, 0)`).addClass('calendar-month-prev');\n    }\n\n    calendar.emit('local::monthAdd calendarMonthAdd', dir === 'next' ? calendar.$months.eq(calendar.$months.length - 1)[0] : calendar.$months.eq(0)[0]);\n    calendar.animating = true;\n    calendar.onMonthChangeStart(dir);\n    const wrapperTranslate = calendar.monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(`translate3d(${isH ? wrapperTranslate : 0}%, ${isH ? 0 : wrapperTranslate}%, 0)`);\n\n    if (transitionEndCallback) {\n      $wrapperEl.transitionEnd(() => {\n        calendar.onMonthChangeEnd(dir, true);\n      });\n    }\n\n    if (!params.animate || transition === 0) {\n      calendar.onMonthChangeEnd(dir, true);\n    }\n  }\n\n  nextYear() {\n    const calendar = this;\n    calendar.setYearMonth(calendar.currentYear + 1);\n  }\n\n  prevYear() {\n    const calendar = this;\n    calendar.setYearMonth(calendar.currentYear - 1);\n  } // eslint-disable-next-line\n\n\n  dateInRange(dayDate, range) {\n    let match = false;\n    let i;\n    if (!range) return false;\n\n    if (Array.isArray(range)) {\n      for (i = 0; i < range.length; i += 1) {\n        if (range[i].from || range[i].to) {\n          if (range[i].from && range[i].to) {\n            if (dayDate <= new Date(range[i].to).getTime() && dayDate >= new Date(range[i].from).getTime()) {\n              match = true;\n            }\n          } else if (range[i].from) {\n            if (dayDate >= new Date(range[i].from).getTime()) {\n              match = true;\n            }\n          } else if (range[i].to) {\n            if (dayDate <= new Date(range[i].to).getTime()) {\n              match = true;\n            }\n          }\n        } else if (range[i].date) {\n          if (dayDate === new Date(range[i].date).getTime()) {\n            match = true;\n          }\n        } else if (dayDate === new Date(range[i]).getTime()) {\n          match = true;\n        }\n      }\n    } else if (range.from || range.to) {\n      if (range.from && range.to) {\n        if (dayDate <= new Date(range.to).getTime() && dayDate >= new Date(range.from).getTime()) {\n          match = true;\n        }\n      } else if (range.from) {\n        if (dayDate >= new Date(range.from).getTime()) {\n          match = true;\n        }\n      } else if (range.to) {\n        if (dayDate <= new Date(range.to).getTime()) {\n          match = true;\n        }\n      }\n    } else if (range.date) {\n      match = dayDate === new Date(range.date).getTime();\n    } else if (typeof range === 'function') {\n      match = range(new Date(dayDate));\n    }\n\n    return match;\n  } // eslint-disable-next-line\n\n\n  daysInMonth(date) {\n    const d = new Date(date);\n    return new Date(d.getFullYear(), d.getMonth() + 1, 0).getDate();\n  }\n\n  renderMonths(date) {\n    const calendar = this;\n\n    if (calendar.params.renderMonths) {\n      return calendar.params.renderMonths.call(calendar, date);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-months-wrapper\"\n    }, calendar.renderMonth(date, 'prev'), calendar.renderMonth(date), calendar.renderMonth(date, 'next'));\n  }\n\n  renderMonth(d, offset) {\n    const calendar = this;\n    const {\n      params,\n      value\n    } = calendar;\n\n    if (params.renderMonth) {\n      return params.renderMonth.call(calendar, d, offset);\n    }\n\n    let date = new Date(d);\n    let year = date.getFullYear();\n    let month = date.getMonth();\n    let localeMonth = calendar.monthNames.indexOf(calendar.monthFormatter(date));\n    if (localeMonth < 0) localeMonth = month;\n    let localeYear = calendar.yearFormatter(date);\n\n    if (offset === 'next') {\n      if (month === 11) date = new Date(year + 1, 0);else date = new Date(year, month + 1, 1);\n    }\n\n    if (offset === 'prev') {\n      if (month === 0) date = new Date(year - 1, 11);else date = new Date(year, month - 1, 1);\n    }\n\n    if (offset === 'next' || offset === 'prev') {\n      month = date.getMonth();\n      year = date.getFullYear();\n      localeMonth = calendar.monthNames.indexOf(calendar.monthFormatter(date));\n      if (localeMonth < 0) localeMonth = month;\n      localeYear = calendar.yearFormatter(date);\n    }\n\n    const currentValues = [];\n    const today = new Date().setHours(0, 0, 0, 0);\n    const minDate = params.minDate ? new Date(params.minDate).getTime() : null;\n    const maxDate = params.maxDate ? new Date(params.maxDate).getTime() : null;\n    const rows = 6;\n    const cols = 7;\n    const daysInPrevMonth = calendar.daysInMonth(new Date(date.getFullYear(), date.getMonth()).getTime() - 10 * 24 * 60 * 60 * 1000);\n    const daysInMonth = calendar.daysInMonth(date);\n    const minDayNumber = params.firstDay === 6 ? 0 : 1;\n    let monthHtml = '';\n    let dayIndex = 0 + (params.firstDay - 1);\n    let disabled;\n    let hasEvents;\n    let firstDayOfMonthIndex = new Date(date.getFullYear(), date.getMonth()).getDay();\n    if (firstDayOfMonthIndex === 0) firstDayOfMonthIndex = 7;\n\n    if (value && value.length) {\n      for (let i = 0; i < value.length; i += 1) {\n        currentValues.push(new Date(value[i]).setHours(0, 0, 0, 0));\n      }\n    }\n\n    for (let row = 1; row <= rows; row += 1) {\n      let rowHtml = '';\n\n      for (let col = 1; col <= cols; col += 1) {\n        dayIndex += 1;\n        let dayDate;\n        let dayNumber = dayIndex - firstDayOfMonthIndex;\n        let addClass = '';\n\n        if (row === 1 && col === 1 && dayNumber > minDayNumber && params.firstDay !== 1) {\n          dayIndex -= 7;\n          dayNumber = dayIndex - firstDayOfMonthIndex;\n        }\n\n        const weekDayIndex = col - 1 + params.firstDay > 6 ? col - 1 - 7 + params.firstDay : col - 1 + params.firstDay;\n\n        if (dayNumber < 0) {\n          dayNumber = daysInPrevMonth + dayNumber + 1;\n          addClass += ' calendar-day-prev';\n          dayDate = new Date(month - 1 < 0 ? year - 1 : year, month - 1 < 0 ? 11 : month - 1, dayNumber).getTime();\n        } else {\n          dayNumber += 1;\n\n          if (dayNumber > daysInMonth) {\n            dayNumber -= daysInMonth;\n            addClass += ' calendar-day-next';\n            dayDate = new Date(month + 1 > 11 ? year + 1 : year, month + 1 > 11 ? 0 : month + 1, dayNumber).getTime();\n          } else {\n            dayDate = new Date(year, month, dayNumber).getTime();\n          }\n        } // Today\n\n\n        if (dayDate === today) addClass += ' calendar-day-today'; // Selected\n\n        if (params.rangePicker && currentValues.length === 2) {\n          if (dayDate >= currentValues[0] && dayDate <= currentValues[1]) {\n            addClass += ' calendar-day-selected';\n          }\n\n          if (currentValues[0] !== currentValues[1]) {\n            if (dayDate > currentValues[0] && dayDate < currentValues[1]) {\n              addClass += ' calendar-day-selected-range';\n            }\n\n            if (dayDate === currentValues[0]) {\n              addClass += ' calendar-day-selected-left';\n            }\n\n            if (dayDate === currentValues[1]) {\n              addClass += ' calendar-day-selected-right';\n            }\n          }\n        } else if (currentValues.indexOf(dayDate) >= 0) addClass += ' calendar-day-selected'; // Weekend\n\n\n        if (params.weekendDays.indexOf(weekDayIndex) >= 0) {\n          addClass += ' calendar-day-weekend';\n        } // Events\n\n\n        let eventsHtml = '';\n        hasEvents = false;\n\n        if (params.events) {\n          if (calendar.dateInRange(dayDate, params.events)) {\n            hasEvents = true;\n          }\n        }\n\n        if (hasEvents) {\n          addClass += ' calendar-day-has-events'; // prettier-ignore\n\n          eventsHtml = `\n            <span class=\"calendar-day-events\">\n              <span class=\"calendar-day-event\"></span>\n            </span>\n          `;\n\n          if (Array.isArray(params.events)) {\n            const eventDots = [];\n            params.events.forEach(ev => {\n              const color = ev.color || '';\n\n              if (eventDots.indexOf(color) < 0 && calendar.dateInRange(dayDate, ev)) {\n                eventDots.push(color);\n              }\n            }); // prettier-ignore\n\n            eventsHtml = `\n              <span class=\"calendar-day-events\">\n                ${eventDots.map(color => `\n                  <span class=\"calendar-day-event\" style=\"${color ? `background-color: ${color}` : ''}\"></span>\n                `.trim()).join('')}\n              </span>\n            `;\n          }\n        } // Custom Ranges\n\n\n        if (params.rangesClasses) {\n          for (let k = 0; k < params.rangesClasses.length; k += 1) {\n            if (calendar.dateInRange(dayDate, params.rangesClasses[k].range)) {\n              addClass += ` ${params.rangesClasses[k].cssClass}`;\n            }\n          }\n        } // Disabled\n\n\n        disabled = false;\n\n        if (minDate && dayDate < minDate || maxDate && dayDate > maxDate) {\n          disabled = true;\n        }\n\n        if (params.disabled) {\n          if (calendar.dateInRange(dayDate, params.disabled)) {\n            disabled = true;\n          }\n        }\n\n        if (disabled) {\n          addClass += ' calendar-day-disabled';\n        }\n\n        dayDate = new Date(dayDate);\n        const dayYear = dayDate.getFullYear();\n        const dayMonth = dayDate.getMonth();\n        const dayNumberDisplay = calendar.dayFormatter(dayDate); // prettier-ignore\n\n        rowHtml += `\n          <div data-year=\"${dayYear}\" data-month=\"${dayMonth}\" data-day=\"${dayNumber}\" class=\"calendar-day${addClass}\" data-date=\"${dayYear}-${dayMonth}-${dayNumber}\">\n            <span class=\"calendar-day-number\">${dayNumberDisplay}${eventsHtml}</span>\n          </div>`.trim();\n      }\n\n      monthHtml += `<div class=\"calendar-row\">${rowHtml}</div>`;\n    }\n\n    monthHtml = `<div class=\"calendar-month\" data-year=\"${year}\" data-month=\"${month}\" data-locale-year=\"${localeYear}\" data-locale-month=\"${localeMonth}\">${monthHtml}</div>`;\n    return monthHtml;\n  }\n\n  renderWeekHeader() {\n    const calendar = this;\n\n    if (calendar.params.renderWeekHeader) {\n      return calendar.params.renderWeekHeader.call(calendar);\n    }\n\n    const {\n      params\n    } = calendar;\n    let weekDaysHtml = '';\n\n    for (let i = 0; i < 7; i += 1) {\n      const dayIndex = i + params.firstDay > 6 ? i - 7 + params.firstDay : i + params.firstDay;\n      const dayName = calendar.dayNamesShort[dayIndex];\n      weekDaysHtml += `<div class=\"calendar-week-day\">${dayName}</div>`;\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-week-header\"\n    }, weekDaysHtml);\n  }\n\n  renderMonthSelector() {\n    const calendar = this;\n\n    if (calendar.params.renderMonthSelector) {\n      return calendar.params.renderMonthSelector.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-month-selector\"\n    }, $jsx(\"a\", {\n      class: \"link icon-only calendar-prev-month-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-prev\"\n    })), calendar.params.monthPicker ? $jsx(\"a\", {\n      class: \"current-month-value link\"\n    }) : $jsx(\"span\", {\n      class: \"current-month-value\"\n    }), $jsx(\"a\", {\n      class: \"link icon-only calendar-next-month-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-next\"\n    })));\n  }\n\n  renderYearSelector() {\n    const calendar = this;\n\n    if (calendar.params.renderYearSelector) {\n      return calendar.params.renderYearSelector.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-year-selector\"\n    }, $jsx(\"a\", {\n      class: \"link icon-only calendar-prev-year-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-prev\"\n    })), calendar.params.yearPicker ? $jsx(\"a\", {\n      class: \"current-year-value link\"\n    }) : $jsx(\"span\", {\n      class: \"current-year-value\"\n    }), $jsx(\"a\", {\n      class: \"link icon-only calendar-next-year-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-next\"\n    })));\n  } // eslint-disable-next-line\n\n\n  renderTimeSelector() {\n    const calendar = this;\n    const value = calendar.value && calendar.value[0];\n    let timeString;\n    if (value) timeString = calendar.timeSelectorFormatter(value);\n    return $jsx(\"div\", {\n      class: \"calendar-time-selector\"\n    }, $jsx(\"span\", null, calendar.params.timePickerLabel), $jsx(\"a\", {\n      class: \"link\"\n    }, timeString || calendar.params.timePickerPlaceholder));\n  }\n\n  renderHeader() {\n    const calendar = this;\n\n    if (calendar.params.renderHeader) {\n      return calendar.params.renderHeader.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-header\"\n    }, $jsx(\"div\", {\n      class: \"calendar-selected-date\"\n    }, calendar.params.headerPlaceholder));\n  }\n\n  renderFooter() {\n    const calendar = this;\n    const app = calendar.app;\n\n    if (calendar.params.renderFooter) {\n      return calendar.params.renderFooter.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-footer\"\n    }, $jsx(\"a\", {\n      class: `${app.theme === 'md' ? 'button' : 'link'} calendar-close sheet-close popover-close`\n    }, calendar.params.toolbarCloseText));\n  }\n\n  renderToolbar() {\n    const calendar = this;\n\n    if (calendar.params.renderToolbar) {\n      return calendar.params.renderToolbar.call(calendar, calendar);\n    } // prettier-ignore\n\n\n    return $jsx(\"div\", {\n      class: \"toolbar toolbar-top no-shadow\"\n    }, $jsx(\"div\", {\n      class: \"toolbar-inner\"\n    }, calendar.params.monthSelector ? calendar.renderMonthSelector() : '', calendar.params.yearSelector ? calendar.renderYearSelector() : ''));\n  } // eslint-disable-next-line\n\n\n  renderInline() {\n    const calendar = this;\n    const {\n      cssClass,\n      toolbar,\n      header,\n      footer,\n      rangePicker,\n      weekHeader\n    } = calendar.params;\n    const {\n      value,\n      hasTimePicker\n    } = calendar;\n    const date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: `calendar calendar-inline ${rangePicker ? 'calendar-range' : ''} ${cssClass || ''}`\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n  }\n\n  renderCustomModal() {\n    const calendar = this;\n    const {\n      cssClass,\n      toolbar,\n      header,\n      footer,\n      rangePicker,\n      weekHeader\n    } = calendar.params;\n    const {\n      value,\n      hasTimePicker\n    } = calendar;\n    const date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: `calendar calendar-modal ${rangePicker ? 'calendar-range' : ''} ${cssClass || ''}`\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n  }\n\n  renderSheet() {\n    const calendar = this;\n    const {\n      cssClass,\n      toolbar,\n      header,\n      footer,\n      rangePicker,\n      weekHeader\n    } = calendar.params;\n    const {\n      value,\n      hasTimePicker\n    } = calendar;\n    const date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: `sheet-modal calendar calendar-sheet ${rangePicker ? 'calendar-range' : ''} ${cssClass || ''}`\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"sheet-modal-inner calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n  }\n\n  renderPopover() {\n    const calendar = this;\n    const {\n      cssClass,\n      toolbar,\n      header,\n      footer,\n      rangePicker,\n      weekHeader\n    } = calendar.params;\n    const {\n      value,\n      hasTimePicker\n    } = calendar;\n    const date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: \"popover calendar-popover\"\n    }, $jsx(\"div\", {\n      class: \"popover-inner\"\n    }, $jsx(\"div\", {\n      class: `calendar ${rangePicker ? 'calendar-range' : ''} ${cssClass || ''}`\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter())));\n  }\n\n  render() {\n    const calendar = this;\n    const {\n      params\n    } = calendar;\n    if (params.render) return params.render.call(calendar);\n\n    if (!calendar.inline) {\n      let modalType = params.openIn;\n      if (modalType === 'auto') modalType = calendar.isPopover() ? 'popover' : 'sheet';\n      if (modalType === 'popover') return calendar.renderPopover();\n      if (modalType === 'sheet') return calendar.renderSheet();\n      return calendar.renderCustomModal();\n    }\n\n    return calendar.renderInline();\n  }\n\n  openMonthPicker() {\n    const calendar = this;\n    const {\n      $el,\n      app\n    } = calendar;\n    if (!$el || !$el.length) return;\n    $el.append('<div class=\"popover calendar-popover calendar-month-picker-popover\"><div class=\"popover-inner\"><div class=\"calendar-month-picker\"></div></div></div>');\n    calendar.monthPickerPopover = app.popover.create({\n      el: $el.find('.calendar-month-picker-popover'),\n      targetEl: $el.find('.calendar-month-selector'),\n      backdrop: true,\n      backdropUnique: true,\n      on: {\n        close() {\n          calendar.closeMonthPicker();\n        },\n\n        closed() {\n          if (calendar.monthPickerPopover.$el) calendar.monthPickerPopover.$el.remove();\n          calendar.monthPickerPopover.destroy();\n\n          if (calendar.monthPickerInstance) {\n            calendar.monthPickerInstance.close();\n            calendar.monthPickerInstance.destroy();\n          }\n\n          delete calendar.monthPickerInstance;\n          delete calendar.monthPickerPopover;\n        }\n\n      }\n    });\n    calendar.monthPickerPopover.open();\n    const localeMonth = parseInt(calendar.$el.find('.calendar-month-current').attr('data-locale-month'), 10);\n    const values = [];\n    const displayValues = [];\n    calendar.monthNames.forEach((m, index) => {\n      values.push(index);\n      displayValues.push(m);\n    });\n    calendar.monthPickerInstance = app.picker.create({\n      containerEl: calendar.monthPickerPopover.$el.find('.calendar-month-picker'),\n      value: [localeMonth],\n      toolbar: false,\n      rotateEffect: false,\n      toolbarCloseText: calendar.params.toolbarCloseText,\n      cols: [{\n        values,\n        displayValues\n      }]\n    });\n  }\n\n  closeMonthPicker() {\n    const calendar = this;\n    if (calendar.monthPickerPopover && calendar.monthPickerPopover.opened) calendar.monthPickerPopover.close();\n    const index = calendar.monthPickerInstance.value[0];\n    const localeMonthIndex = parseInt(calendar.$el.find('.calendar-month-current').attr('data-locale-month'), 10);\n    const monthIndex = calendar.currentMonth;\n    const diff = localeMonthIndex - monthIndex;\n    const diffIndex = index - diff;\n    calendar.setYearMonth(calendar.currentYear, diffIndex, 0);\n  }\n\n  openYearPicker() {\n    const calendar = this;\n    const {\n      $el,\n      app\n    } = calendar;\n    if (!$el || !$el.length) return;\n    $el.append('<div class=\"popover calendar-popover calendar-year-picker-popover\"><div class=\"popover-inner\"><div class=\"calendar-year-picker\"></div></div></div>');\n    calendar.yearPickerPopover = app.popover.create({\n      el: $el.find('.calendar-year-picker-popover'),\n      targetEl: $el.find('.calendar-year-selector'),\n      backdrop: true,\n      backdropUnique: true,\n      on: {\n        close() {\n          calendar.closeYearPicker();\n        },\n\n        closed() {\n          if (calendar.yearPickerPopover.$el) calendar.yearPickerPopover.$el.remove();\n          calendar.yearPickerPopover.destroy();\n\n          if (calendar.yearPickerInstance) {\n            calendar.yearPickerInstance.close();\n            calendar.yearPickerInstance.destroy();\n          }\n\n          delete calendar.yearPickerInstance;\n          delete calendar.yearPickerPopover;\n        }\n\n      }\n    });\n    calendar.yearPickerPopover.open();\n    const currentYear = calendar.currentYear;\n    let yearMin = calendar.params.yearPickerMin || new Date().getFullYear() - 100;\n\n    if (calendar.params.minDate) {\n      yearMin = Math.max(yearMin, new Date(calendar.params.minDate).getFullYear());\n    }\n\n    let yearMax = calendar.params.yearPickerMax || new Date().getFullYear() + 100;\n\n    if (calendar.params.maxDate) {\n      yearMax = Math.min(yearMax, new Date(calendar.params.maxDate).getFullYear());\n    }\n\n    const years = [];\n\n    for (let i = yearMin; i <= yearMax; i += 1) {\n      years.push(i);\n    }\n\n    calendar.yearPickerInstance = app.picker.create({\n      containerEl: calendar.yearPickerPopover.$el.find('.calendar-year-picker'),\n      value: [currentYear],\n      toolbar: false,\n      rotateEffect: false,\n      toolbarCloseText: calendar.params.toolbarCloseText,\n      cols: [{\n        values: years\n      }]\n    });\n  }\n\n  closeYearPicker() {\n    const calendar = this;\n    if (calendar.yearPickerPopover && calendar.yearPickerPopover.opened) calendar.yearPickerPopover.close();\n    calendar.setYearMonth(calendar.yearPickerInstance.value[0], undefined, 0);\n  }\n\n  openTimePicker() {\n    const calendar = this;\n    const {\n      $el,\n      app,\n      is12HoursFormat\n    } = calendar;\n    if (!$el || !$el.length) return;\n    $el.append('<div class=\"popover calendar-popover calendar-time-picker-popover\"><div class=\"popover-inner\"><div class=\"calendar-time-picker\"></div></div></div>');\n    const hoursArr = [];\n    const minutesArr = [];\n    const hoursMin = is12HoursFormat ? 1 : 0;\n    const hoursMax = is12HoursFormat ? 12 : 23;\n\n    for (let i = hoursMin; i <= hoursMax; i += 1) {\n      hoursArr.push(i);\n    }\n\n    for (let i = 0; i <= 59; i += 1) {\n      minutesArr.push(i);\n    }\n\n    let value;\n\n    if (calendar.value && calendar.value.length) {\n      value = [calendar.value[0].getHours(), calendar.value[0].getMinutes()];\n    } else {\n      value = [new Date().getHours(), new Date().getMinutes()];\n    }\n\n    if (is12HoursFormat) {\n      value.push(value[0] < 12 ? 'AM' : 'PM');\n      if (value[0] > 12) value[0] -= 12;\n      if (value[0] === 0) value[0] = 12;\n    }\n\n    calendar.timePickerPopover = app.popover.create({\n      el: $el.find('.calendar-time-picker-popover'),\n      targetEl: $el.find('.calendar-time-selector .link'),\n      backdrop: true,\n      backdropUnique: true,\n      on: {\n        close() {\n          calendar.closeTimePicker();\n        },\n\n        closed() {\n          if (calendar.timePickerPopover.$el) calendar.timePickerPopover.$el.remove();\n          calendar.timePickerPopover.destroy();\n\n          if (calendar.timePickerInstance) {\n            calendar.timePickerInstance.close();\n            calendar.timePickerInstance.destroy();\n          }\n\n          delete calendar.timePickerInstance;\n          delete calendar.timePickerPopover;\n        }\n\n      }\n    });\n    calendar.timePickerPopover.open();\n    calendar.timePickerInstance = app.picker.create({\n      containerEl: calendar.timePickerPopover.$el.find('.calendar-time-picker'),\n      value,\n      toolbar: false,\n      rotateEffect: false,\n      toolbarCloseText: calendar.params.toolbarCloseText,\n      cols: [{\n        values: hoursArr\n      }, {\n        divider: true,\n        content: ':'\n      }, {\n        values: minutesArr,\n        displayValues: minutesArr.map(m => m < 10 ? `0${m}` : m)\n      }, ...(is12HoursFormat ? [{\n        values: ['AM', 'PM']\n      }] : [])]\n    });\n  }\n\n  closeTimePicker() {\n    const calendar = this;\n    const {\n      is12HoursFormat\n    } = calendar;\n\n    if (calendar.timePickerInstance) {\n      const timePickerValue = calendar.timePickerInstance.value;\n      let hours = parseInt(timePickerValue[0], 10);\n      const minutes = parseInt(timePickerValue[1], 10);\n      const period = calendar.timePickerInstance.value[2];\n\n      if (is12HoursFormat) {\n        if (period === 'AM' && hours === 12) {\n          hours = 0;\n        } else if (period === 'PM' && hours !== 12) {\n          hours += 12;\n        }\n      }\n\n      let value = calendar.value && calendar.value.length && calendar.value[0];\n\n      if (!value) {\n        value = new Date();\n        value.setHours(hours, minutes, 0, 0);\n      } else {\n        value = new Date(value);\n        value.setHours(hours, minutes);\n      }\n\n      calendar.setValue([value]);\n      if (calendar.timePickerPopover && calendar.timePickerPopover.opened) calendar.timePickerPopover.close();\n    }\n  }\n\n  onOpen() {\n    const calendar = this;\n    const {\n      initialized,\n      $el,\n      app,\n      $inputEl,\n      inline,\n      value,\n      params\n    } = calendar;\n    calendar.closing = false;\n    calendar.opened = true;\n    calendar.opening = true; // Init main events\n\n    calendar.attachCalendarEvents();\n    const updateValue = !value && params.value; // Set value\n\n    if (!initialized) {\n      if (value) calendar.setValue(value, 0);else if (params.value) {\n        calendar.setValue(calendar.normalizeValues(params.value), 0);\n      }\n    } else if (value) {\n      calendar.setValue(value, 0);\n    } // Update current month and year\n\n\n    calendar.updateCurrentMonthYear(); // Set initial translate\n\n    calendar.monthsTranslate = 0;\n    calendar.setMonthsTranslate(); // Update input value\n\n    if (updateValue) calendar.updateValue();else if (params.header && value) {\n      calendar.updateValue(true);\n    } // Extra focus\n\n    if (!inline && $inputEl && $inputEl.length && app.theme === 'md') {\n      $inputEl.trigger('focus');\n    }\n\n    calendar.initialized = true;\n    calendar.$months.each(monthEl => {\n      calendar.emit('local::monthAdd calendarMonthAdd', monthEl);\n    }); // Trigger events\n\n    if ($el) {\n      $el.trigger('calendar:open');\n    }\n\n    if ($inputEl) {\n      $inputEl.trigger('calendar:open');\n    }\n\n    calendar.emit('local::open calendarOpen', calendar);\n  }\n\n  onOpened() {\n    const calendar = this;\n    calendar.opening = false;\n\n    if (calendar.$el) {\n      calendar.$el.trigger('calendar:opened');\n    }\n\n    if (calendar.$inputEl) {\n      calendar.$inputEl.trigger('calendar:opened');\n    }\n\n    calendar.emit('local::opened calendarOpened', calendar);\n  }\n\n  onClose() {\n    const calendar = this;\n    const app = calendar.app;\n    calendar.opening = false;\n    calendar.closing = true;\n\n    if (calendar.$inputEl) {\n      if (app.theme === 'md') {\n        calendar.$inputEl.trigger('blur');\n      } else {\n        const validate = calendar.$inputEl.attr('validate');\n        const required = calendar.$inputEl.attr('required');\n\n        if (validate && required) {\n          app.input.validate(calendar.$inputEl);\n        }\n      }\n    }\n\n    if (calendar.detachCalendarEvents) {\n      calendar.detachCalendarEvents();\n    }\n\n    if (calendar.$el) {\n      calendar.$el.trigger('calendar:close');\n    }\n\n    if (calendar.$inputEl) {\n      calendar.$inputEl.trigger('calendar:close');\n    }\n\n    calendar.emit('local::close calendarClose', calendar);\n  }\n\n  onClosed() {\n    const calendar = this;\n    calendar.opened = false;\n    calendar.closing = false;\n\n    if (!calendar.inline) {\n      nextTick(() => {\n        if (calendar.modal && calendar.modal.el && calendar.modal.destroy) {\n          if (!calendar.params.routableModals) {\n            calendar.modal.destroy();\n          }\n        }\n\n        delete calendar.modal;\n      });\n    }\n\n    if (calendar.timePickerInstance) {\n      if (calendar.timePickerInstance.destroy) calendar.timePickerInstance.destroy();\n      delete calendar.timePickerInstance;\n    }\n\n    if (calendar.$el) {\n      calendar.$el.trigger('calendar:closed');\n    }\n\n    if (calendar.$inputEl) {\n      calendar.$inputEl.trigger('calendar:closed');\n    }\n\n    calendar.emit('local::closed calendarClosed', calendar);\n  }\n\n  open() {\n    const calendar = this;\n    const {\n      app,\n      opened,\n      inline,\n      $inputEl,\n      params\n    } = calendar;\n    if (opened) return;\n\n    if (inline) {\n      calendar.$el = $(calendar.render());\n      calendar.$el[0].f7Calendar = calendar;\n      calendar.$wrapperEl = calendar.$el.find('.calendar-months-wrapper');\n      calendar.$months = calendar.$wrapperEl.find('.calendar-month');\n      calendar.$containerEl.append(calendar.$el);\n      calendar.onOpen();\n      calendar.onOpened();\n      return;\n    }\n\n    let modalType = params.openIn;\n\n    if (modalType === 'auto') {\n      modalType = calendar.isPopover() ? 'popover' : 'sheet';\n    }\n\n    const modalContent = calendar.render();\n    const modalParams = {\n      targetEl: $inputEl,\n      scrollToEl: params.scrollToInput ? $inputEl : undefined,\n      content: modalContent,\n      backdrop: params.backdrop === true || modalType === 'popover' && app.params.popover.backdrop !== false && params.backdrop !== false,\n      closeByBackdropClick: params.closeByBackdropClick,\n      on: {\n        open() {\n          const modal = this;\n          calendar.modal = modal;\n          calendar.$el = modalType === 'popover' ? modal.$el.find('.calendar') : modal.$el;\n          calendar.$wrapperEl = calendar.$el.find('.calendar-months-wrapper');\n          calendar.$months = calendar.$wrapperEl.find('.calendar-month');\n          calendar.$el[0].f7Calendar = calendar;\n\n          if (modalType === 'customModal') {\n            $(calendar.$el).find('.calendar-close').once('click', () => {\n              calendar.close();\n            });\n          }\n\n          calendar.onOpen();\n        },\n\n        opened() {\n          calendar.onOpened();\n        },\n\n        close() {\n          calendar.onClose();\n        },\n\n        closed() {\n          calendar.onClosed();\n        }\n\n      }\n    };\n\n    if (modalType === 'sheet') {\n      modalParams.push = params.sheetPush;\n      modalParams.swipeToClose = params.sheetSwipeToClose;\n    }\n\n    if (params.routableModals && calendar.view) {\n      calendar.view.router.navigate({\n        url: calendar.url,\n        route: {\n          path: calendar.url,\n          [modalType]: modalParams\n        }\n      });\n    } else {\n      calendar.modal = app[modalType].create(modalParams);\n      calendar.modal.open();\n    }\n  }\n\n  close() {\n    const calendar = this;\n    const {\n      opened,\n      inline\n    } = calendar;\n    if (!opened) return;\n\n    if (inline) {\n      calendar.onClose();\n      calendar.onClosed();\n      return;\n    }\n\n    if (calendar.params.routableModals && calendar.view) {\n      calendar.view.router.back();\n    } else {\n      calendar.modal.close();\n    }\n  }\n\n  init() {\n    const calendar = this;\n    calendar.initInput();\n\n    if (calendar.inline) {\n      calendar.open();\n      calendar.emit('local::init calendarInit', calendar);\n      return;\n    }\n\n    if (!calendar.initialized && calendar.params.value) {\n      calendar.setValue(calendar.normalizeValues(calendar.params.value));\n    } // Attach input Events\n\n\n    if (calendar.$inputEl) {\n      calendar.attachInputEvents();\n    }\n\n    if (calendar.params.closeByOutsideClick) {\n      calendar.attachHtmlEvents();\n    }\n\n    calendar.emit('local::init calendarInit', calendar);\n  }\n\n  destroy() {\n    const calendar = this;\n    if (calendar.destroyed) return;\n    const {\n      $el\n    } = calendar;\n    calendar.emit('local::beforeDestroy calendarBeforeDestroy', calendar);\n    if ($el) $el.trigger('calendar:beforedestroy');\n    calendar.close(); // Detach Events\n\n    if (calendar.$inputEl) {\n      calendar.detachInputEvents();\n    }\n\n    if (calendar.params.closeByOutsideClick) {\n      calendar.detachHtmlEvents();\n    }\n\n    if (calendar.timePickerInstance) {\n      if (calendar.timePickerInstance.destroy) calendar.timePickerInstance.destroy();\n      delete calendar.timePickerInstance;\n    }\n\n    if ($el && $el.length) delete calendar.$el[0].f7Calendar;\n    deleteProps(calendar);\n    calendar.destroyed = true;\n  }\n\n}\n\nexport default Calendar;","map":{"version":3,"names":["extend","nextTick","deleteProps","Framework7Class","$","getDevice","getSupport","$jsx","Calendar","constructor","app","params","calendar","$containerEl","containerEl","length","$inputEl","inputEl","isHorizontal","direction","inverter","rtl","inline","initialized","opened","url","animating","allowTouchMove","hasTimePicker","timePicker","rangePicker","multiple","dayFormatter","date","formatter","Intl","DateTimeFormat","locale","day","format","replace","monthFormatter","month","yearFormatter","year","timeSelectorFormatter","timePickerFormat","timeFormatCheckDate","Date","toLowerCase","is12HoursFormat","indexOf","monthNames","monthNamesShort","dayNames","dayNamesShort","monthNamesIntl","monthNamesShortIntl","dayNamesIntl","dayNamesShortIntl","getIntlNames","onInputClick","open","onInputFocus","e","preventDefault","onInputClear","setValue","update","onHtmlClick","$targetEl","target","destroyed","isPopover","closing","closest","monthPickerPopover","yearPickerPopover","timePickerPopover","close","attachInputEvents","on","inputReadOnly","f7ValidateReadonly","detachInputEvents","off","attachHtmlEvents","detachHtmlEvents","attachCalendarEvents","allowItemClick","isTouched","isMoved","touchStartX","touchStartY","touchCurrentX","touchCurrentY","touchStartTime","touchEndTime","currentTranslate","wrapperWidth","wrapperHeight","percentage","touchesDiff","isScrolling","$el","$wrapperEl","handleTouchStart","type","targetTouches","pageX","pageY","getTime","undefined","monthsTranslate","handleTouchMove","isH","Math","abs","offsetWidth","offsetHeight","transition","transform","handleTouchEnd","resetMonth","nextMonth","prevMonth","setTimeout","handleDayClick","$dayEl","parents","hasClass","dateYear","parseInt","attr","dateMonth","dateDay","emit","valueToAdd","value","setHours","getHours","getMinutes","addValue","closeOnSelect","onNextMonthClick","onPrevMonthClick","onNextYearClick","nextYear","onPrevYearClick","prevYear","onMonthSelectorClick","openMonthPicker","onYearSelectorClick","openYearPicker","onTimeSelectorClick","openTimePicker","passiveListener","touchEvents","start","passive","capture","find","monthPicker","yearPicker","touchMove","detachCalendarEvents","init","view","f7View","views","main","formatterMonthNames","formatterMonthNamesShort","formatterDayNames","weekday","formatterDayNamesShort","yearStarted","yearEnded","i","setMonth","currentYear","push","weekDay","getDay","normalizeDate","d","getFullYear","getMonth","getDate","normalizeValues","values","newValues","Array","isArray","map","val","initInput","prop","modal","device","openIn","ios","ipad","width","desktop","theme","formatDate","month1","dateFormat","twoDigits","number","tokens","yyyy","yy","String","substring","mm","m","MM","M","dd","DD","D","hours","minutes","seconds","getSeconds","hours12","a","Object","assign","HH","H","hh","h","ss","s","A","toUpperCase","regexp","RegExp","keys","t","join","token","formatValue","call","v","newValue","rangePickerMinDays","rangePickerMaxDays","inValuesIndex","splice","updateValue","sort","b","currentValue","equal","forEach","index","getValue","onlyHeader","removeClass","valueDate","leftDate","rightDate","addClass","text","timePickerPlaceholder","header","inputValue","trigger","updateCurrentMonthYear","dir","$months","currentLocaleMonth","currentLocaleYear","currentMonth","eq","currentDate","prevMonthHtml","renderMonth","currentMonthHtml","nextMonthHtml","html","setMonthsTranslate","each","monthEl","onMonthChangeStart","currentIndex","onMonthChangeEnd","rebuildBoth","remove","append","prepend","translate","prevMonthTranslate","currentMonthTranslate","nextMonthTranslate","animate","nextDate","nextDateTime","transitionEndCallback","maxDate","transitionEnd","prevDate","prevDateTime","minDate","setYearMonth","targetDate","newMonthHTML","prevTranslate","monthTranslate","wrapperTranslate","dateInRange","dayDate","range","match","from","to","daysInMonth","renderMonths","class","offset","localeMonth","localeYear","currentValues","today","rows","cols","daysInPrevMonth","minDayNumber","firstDay","monthHtml","dayIndex","disabled","hasEvents","firstDayOfMonthIndex","row","rowHtml","col","dayNumber","weekDayIndex","weekendDays","eventsHtml","events","eventDots","ev","color","trim","rangesClasses","k","cssClass","dayYear","dayMonth","dayNumberDisplay","renderWeekHeader","weekDaysHtml","dayName","renderMonthSelector","renderYearSelector","renderTimeSelector","timeString","timePickerLabel","renderHeader","headerPlaceholder","renderFooter","toolbarCloseText","renderToolbar","monthSelector","yearSelector","renderInline","toolbar","footer","weekHeader","renderCustomModal","renderSheet","renderPopover","render","modalType","popover","create","el","targetEl","backdrop","backdropUnique","closeMonthPicker","closed","destroy","monthPickerInstance","displayValues","picker","rotateEffect","localeMonthIndex","monthIndex","diff","diffIndex","closeYearPicker","yearPickerInstance","yearMin","yearPickerMin","max","yearMax","yearPickerMax","min","years","hoursArr","minutesArr","hoursMin","hoursMax","closeTimePicker","timePickerInstance","divider","content","timePickerValue","period","onOpen","opening","onOpened","onClose","validate","required","input","onClosed","routableModals","f7Calendar","modalContent","modalParams","scrollToEl","scrollToInput","closeByBackdropClick","once","sheetPush","swipeToClose","sheetSwipeToClose","router","navigate","route","path","back","closeByOutsideClick"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/components/calendar/calendar-class.js"],"sourcesContent":["import { extend, nextTick, deleteProps } from '../../shared/utils.js';\nimport Framework7Class from '../../shared/class.js';\nimport $ from '../../shared/dom7.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport { getSupport } from '../../shared/get-support.js';\n/** @jsx $jsx */\n\nimport $jsx from '../../shared/$jsx.js';\n\nclass Calendar extends Framework7Class {\n  constructor(app, params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    super(params, [app]);\n    const calendar = this;\n    calendar.params = extend({}, app.params.calendar, params);\n    let $containerEl;\n\n    if (calendar.params.containerEl) {\n      $containerEl = $(calendar.params.containerEl);\n      if ($containerEl.length === 0) return calendar;\n    }\n\n    let $inputEl;\n\n    if (calendar.params.inputEl) {\n      $inputEl = $(calendar.params.inputEl);\n    }\n\n    const isHorizontal = calendar.params.direction === 'horizontal';\n    let inverter = 1;\n\n    if (isHorizontal) {\n      inverter = app.rtl ? -1 : 1;\n    }\n\n    extend(calendar, {\n      app,\n      $containerEl,\n      containerEl: $containerEl && $containerEl[0],\n      inline: $containerEl && $containerEl.length > 0,\n      $inputEl,\n      inputEl: $inputEl && $inputEl[0],\n      initialized: false,\n      opened: false,\n      url: calendar.params.url,\n      isHorizontal,\n      inverter,\n      animating: false,\n      allowTouchMove: true,\n      hasTimePicker: calendar.params.timePicker && !calendar.params.rangePicker && !calendar.params.multiple\n    });\n\n    calendar.dayFormatter = date => {\n      const formatter = new Intl.DateTimeFormat(calendar.params.locale, {\n        day: 'numeric'\n      });\n      return formatter.format(date).replace(/æ—¥/, '');\n    };\n\n    calendar.monthFormatter = date => {\n      const formatter = new Intl.DateTimeFormat(calendar.params.locale, {\n        month: 'long'\n      });\n      return formatter.format(date);\n    };\n\n    calendar.yearFormatter = date => {\n      const formatter = new Intl.DateTimeFormat(calendar.params.locale, {\n        year: 'numeric'\n      });\n      return formatter.format(date);\n    };\n\n    calendar.timeSelectorFormatter = date => {\n      const formatter = new Intl.DateTimeFormat(calendar.params.locale, calendar.params.timePickerFormat);\n      return formatter.format(date);\n    };\n\n    const timeFormatCheckDate = calendar.timeSelectorFormatter(new Date()).toLowerCase();\n    calendar.is12HoursFormat = timeFormatCheckDate.indexOf('pm') >= 0 || timeFormatCheckDate.indexOf('am') >= 0; // Auto names\n\n    let {\n      monthNames,\n      monthNamesShort,\n      dayNames,\n      dayNamesShort\n    } = calendar.params;\n    const {\n      monthNamesIntl,\n      monthNamesShortIntl,\n      dayNamesIntl,\n      dayNamesShortIntl\n    } = calendar.getIntlNames();\n    if (monthNames === 'auto') monthNames = monthNamesIntl;\n    if (monthNamesShort === 'auto') monthNamesShort = monthNamesShortIntl;\n    if (dayNames === 'auto') dayNames = dayNamesIntl;\n    if (dayNamesShort === 'auto') dayNamesShort = dayNamesShortIntl;\n    extend(calendar, {\n      monthNames,\n      monthNamesShort,\n      dayNames,\n      dayNamesShort\n    });\n\n    function onInputClick() {\n      calendar.open();\n    }\n\n    function onInputFocus(e) {\n      e.preventDefault();\n    }\n\n    function onInputClear() {\n      calendar.setValue([]);\n\n      if (calendar.opened) {\n        calendar.update();\n      }\n    }\n\n    function onHtmlClick(e) {\n      const $targetEl = $(e.target);\n      if (calendar.destroyed || !calendar.params) return;\n      if (calendar.isPopover()) return;\n      if (!calendar.opened || calendar.closing) return;\n      if ($targetEl.closest('[class*=\"backdrop\"]').length) return;\n      if (calendar.monthPickerPopover || calendar.yearPickerPopover || calendar.timePickerPopover) return;\n\n      if ($inputEl && $inputEl.length > 0) {\n        if ($targetEl[0] !== $inputEl[0] && $targetEl.closest('.sheet-modal, .calendar-modal').length === 0) {\n          calendar.close();\n        }\n      } else if ($(e.target).closest('.sheet-modal, .calendar-modal').length === 0) {\n        calendar.close();\n      }\n    } // Events\n\n\n    extend(calendar, {\n      attachInputEvents() {\n        calendar.$inputEl.on('click', onInputClick);\n        calendar.$inputEl.on('input:clear', onInputClear);\n\n        if (calendar.params.inputReadOnly) {\n          calendar.$inputEl.on('focus mousedown', onInputFocus);\n\n          if (calendar.$inputEl[0]) {\n            calendar.$inputEl[0].f7ValidateReadonly = true;\n          }\n        }\n      },\n\n      detachInputEvents() {\n        calendar.$inputEl.off('click', onInputClick);\n        calendar.$inputEl.off('input:clear', onInputClear);\n\n        if (calendar.params.inputReadOnly) {\n          calendar.$inputEl.off('focus mousedown', onInputFocus);\n\n          if (calendar.$inputEl[0]) {\n            delete calendar.$inputEl[0].f7ValidateReadonly;\n          }\n        }\n      },\n\n      attachHtmlEvents() {\n        app.on('click', onHtmlClick);\n      },\n\n      detachHtmlEvents() {\n        app.off('click', onHtmlClick);\n      }\n\n    });\n\n    calendar.attachCalendarEvents = function attachCalendarEvents() {\n      let allowItemClick = true;\n      let isTouched;\n      let isMoved;\n      let touchStartX;\n      let touchStartY;\n      let touchCurrentX;\n      let touchCurrentY;\n      let touchStartTime;\n      let touchEndTime;\n      let currentTranslate;\n      let wrapperWidth;\n      let wrapperHeight;\n      let percentage;\n      let touchesDiff;\n      let isScrolling;\n      const {\n        $el,\n        $wrapperEl\n      } = calendar;\n\n      function handleTouchStart(e) {\n        if (isMoved || isTouched) return;\n        isTouched = true;\n        touchStartX = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n        touchCurrentX = touchStartX;\n        touchStartY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n        touchCurrentY = touchStartY;\n        touchStartTime = new Date().getTime();\n        percentage = 0;\n        allowItemClick = true;\n        isScrolling = undefined;\n        currentTranslate = calendar.monthsTranslate;\n      }\n\n      function handleTouchMove(e) {\n        if (!isTouched) return;\n        const {\n          isHorizontal: isH\n        } = calendar;\n        touchCurrentX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n        touchCurrentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n        if (typeof isScrolling === 'undefined') {\n          isScrolling = !!(isScrolling || Math.abs(touchCurrentY - touchStartY) > Math.abs(touchCurrentX - touchStartX));\n        }\n\n        if (isH && isScrolling || !calendar.allowTouchMove) {\n          isTouched = false;\n          return;\n        }\n\n        e.preventDefault();\n\n        if (calendar.animating) {\n          isTouched = false;\n          return;\n        }\n\n        allowItemClick = false;\n\n        if (!isMoved) {\n          // First move\n          isMoved = true;\n          wrapperWidth = $wrapperEl[0].offsetWidth;\n          wrapperHeight = $wrapperEl[0].offsetHeight;\n          $wrapperEl.transition(0);\n        }\n\n        touchesDiff = isH ? touchCurrentX - touchStartX : touchCurrentY - touchStartY;\n        percentage = touchesDiff / (isH ? wrapperWidth : wrapperHeight);\n        currentTranslate = (calendar.monthsTranslate * calendar.inverter + percentage) * 100; // Transform wrapper\n\n        $wrapperEl.transform(`translate3d(${isH ? currentTranslate : 0}%, ${isH ? 0 : currentTranslate}%, 0)`);\n      }\n\n      function handleTouchEnd() {\n        if (!isTouched || !isMoved) {\n          isTouched = false;\n          isMoved = false;\n          return;\n        }\n\n        isTouched = false;\n        isMoved = false;\n        touchEndTime = new Date().getTime();\n\n        if (touchEndTime - touchStartTime < 300) {\n          if (Math.abs(touchesDiff) < 10) {\n            calendar.resetMonth();\n          } else if (touchesDiff >= 10) {\n            if (app.rtl) calendar.nextMonth();else calendar.prevMonth();\n          } else if (app.rtl) calendar.prevMonth();else calendar.nextMonth();\n        } else if (percentage <= -0.5) {\n          if (app.rtl) calendar.prevMonth();else calendar.nextMonth();\n        } else if (percentage >= 0.5) {\n          if (app.rtl) calendar.nextMonth();else calendar.prevMonth();\n        } else {\n          calendar.resetMonth();\n        } // Allow click\n\n\n        setTimeout(() => {\n          allowItemClick = true;\n        }, 100);\n      }\n\n      function handleDayClick(e) {\n        if (!allowItemClick) return;\n        let $dayEl = $(e.target).parents('.calendar-day');\n\n        if ($dayEl.length === 0 && $(e.target).hasClass('calendar-day')) {\n          $dayEl = $(e.target);\n        }\n\n        if ($dayEl.length === 0) return;\n        if ($dayEl.hasClass('calendar-day-disabled')) return;\n\n        if (!calendar.params.rangePicker) {\n          if ($dayEl.hasClass('calendar-day-next')) calendar.nextMonth();\n          if ($dayEl.hasClass('calendar-day-prev')) calendar.prevMonth();\n        }\n\n        const dateYear = parseInt($dayEl.attr('data-year'), 10);\n        const dateMonth = parseInt($dayEl.attr('data-month'), 10);\n        const dateDay = parseInt($dayEl.attr('data-day'), 10);\n        calendar.emit('local::dayClick calendarDayClick', calendar, $dayEl[0], dateYear, dateMonth, dateDay);\n\n        if (!$dayEl.hasClass('calendar-day-selected') || calendar.params.multiple || calendar.params.rangePicker) {\n          const valueToAdd = new Date(dateYear, dateMonth, dateDay, 0, 0, 0);\n\n          if (calendar.hasTimePicker) {\n            if (calendar.value && calendar.value[0]) {\n              valueToAdd.setHours(calendar.value[0].getHours(), calendar.value[0].getMinutes());\n            } else {\n              valueToAdd.setHours(new Date().getHours(), new Date().getMinutes());\n            }\n          }\n\n          calendar.addValue(valueToAdd);\n        }\n\n        if (calendar.params.closeOnSelect) {\n          if (calendar.params.rangePicker && calendar.value.length === 2 || !calendar.params.rangePicker) {\n            calendar.close();\n          }\n        }\n      }\n\n      function onNextMonthClick() {\n        calendar.nextMonth();\n      }\n\n      function onPrevMonthClick() {\n        calendar.prevMonth();\n      }\n\n      function onNextYearClick() {\n        calendar.nextYear();\n      }\n\n      function onPrevYearClick() {\n        calendar.prevYear();\n      }\n\n      function onMonthSelectorClick() {\n        calendar.openMonthPicker();\n      }\n\n      function onYearSelectorClick() {\n        calendar.openYearPicker();\n      }\n\n      function onTimeSelectorClick() {\n        calendar.openTimePicker();\n      }\n\n      const passiveListener = app.touchEvents.start === 'touchstart' && getSupport().passiveListener ? {\n        passive: true,\n        capture: false\n      } : false; // Selectors clicks\n\n      $el.find('.calendar-prev-month-button').on('click', onPrevMonthClick);\n      $el.find('.calendar-next-month-button').on('click', onNextMonthClick);\n      $el.find('.calendar-prev-year-button').on('click', onPrevYearClick);\n      $el.find('.calendar-next-year-button').on('click', onNextYearClick);\n\n      if (calendar.params.monthPicker) {\n        $el.find('.current-month-value').on('click', onMonthSelectorClick);\n      }\n\n      if (calendar.params.yearPicker) {\n        $el.find('.current-year-value').on('click', onYearSelectorClick);\n      }\n\n      if (calendar.hasTimePicker) {\n        $el.find('.calendar-time-selector a').on('click', onTimeSelectorClick);\n      } // Day clicks\n\n\n      $wrapperEl.on('click', handleDayClick); // Touch events\n\n      if (calendar.params.touchMove) {\n        $wrapperEl.on(app.touchEvents.start, handleTouchStart, passiveListener);\n        app.on('touchmove:active', handleTouchMove);\n        app.on('touchend:passive', handleTouchEnd);\n      }\n\n      calendar.detachCalendarEvents = function detachCalendarEvents() {\n        $el.find('.calendar-prev-month-button').off('click', onPrevMonthClick);\n        $el.find('.calendar-next-month-button').off('click', onNextMonthClick);\n        $el.find('.calendar-prev-year-button').off('click', onPrevYearClick);\n        $el.find('.calendar-next-year-button').off('click', onNextYearClick);\n\n        if (calendar.params.monthPicker) {\n          $el.find('.current-month-value').off('click', onMonthSelectorClick);\n        }\n\n        if (calendar.params.yearPicker) {\n          $el.find('.current-year-value').off('click', onYearSelectorClick);\n        }\n\n        if (calendar.hasTimePicker) {\n          $el.find('.calendar-time-selector a').off('click', onTimeSelectorClick);\n        }\n\n        $wrapperEl.off('click', handleDayClick);\n\n        if (calendar.params.touchMove) {\n          $wrapperEl.off(app.touchEvents.start, handleTouchStart, passiveListener);\n          app.off('touchmove:active', handleTouchMove);\n          app.off('touchend:passive', handleTouchEnd);\n        }\n      };\n    };\n\n    calendar.init();\n    return calendar;\n  }\n\n  get view() {\n    const {\n      $inputEl,\n      app,\n      params\n    } = this;\n    let view;\n\n    if (params.view) {\n      view = params.view;\n    } else if ($inputEl) {\n      view = $inputEl.parents('.view').length && $inputEl.parents('.view')[0].f7View;\n    }\n\n    if (!view) view = app.views.main;\n    return view;\n  }\n\n  getIntlNames() {\n    const calendar = this;\n    const locale = calendar.params.locale;\n    const monthNamesIntl = [];\n    const monthNamesShortIntl = [];\n    const dayNamesIntl = [];\n    const dayNamesShortIntl = [];\n    const formatterMonthNames = new Intl.DateTimeFormat(locale, {\n      month: 'long'\n    });\n    const formatterMonthNamesShort = new Intl.DateTimeFormat(locale, {\n      month: 'short'\n    });\n    const formatterDayNames = new Intl.DateTimeFormat(locale, {\n      weekday: 'long'\n    });\n    const formatterDayNamesShort = new Intl.DateTimeFormat(locale, {\n      weekday: 'short'\n    });\n    let year;\n    let yearStarted;\n    let yearEnded;\n\n    for (let i = 0; i < 24; i += 1) {\n      const date = new Date().setMonth(i, 1);\n      const currentYear = calendar.yearFormatter(date);\n\n      if (year && currentYear !== year) {\n        if (yearStarted) yearEnded = true;\n        yearStarted = true;\n        year = currentYear;\n      }\n\n      if (!year) {\n        year = currentYear;\n      }\n\n      if (yearStarted && year === currentYear && !yearEnded) {\n        monthNamesIntl.push(formatterMonthNames.format(date));\n        monthNamesShortIntl.push(formatterMonthNamesShort.format(date));\n      }\n    }\n\n    const weekDay = new Date().getDay();\n\n    for (let i = 0; i < 7; i += 1) {\n      const date = new Date().getTime() + (i - weekDay) * 24 * 60 * 60 * 1000;\n      dayNamesIntl.push(formatterDayNames.format(date));\n      dayNamesShortIntl.push(formatterDayNamesShort.format(date));\n    }\n\n    return {\n      monthNamesIntl,\n      monthNamesShortIntl,\n      dayNamesIntl,\n      dayNamesShortIntl\n    };\n  }\n\n  normalizeDate(date) {\n    const calendar = this;\n    const d = new Date(date);\n\n    if (calendar.hasTimePicker) {\n      return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes());\n    }\n\n    return new Date(d.getFullYear(), d.getMonth(), d.getDate());\n  }\n\n  normalizeValues(values) {\n    const calendar = this;\n    let newValues = [];\n\n    if (values && Array.isArray(values)) {\n      newValues = values.map(val => calendar.normalizeDate(val));\n    }\n\n    return newValues;\n  }\n\n  initInput() {\n    const calendar = this;\n    if (!calendar.$inputEl) return;\n    if (calendar.params.inputReadOnly) calendar.$inputEl.prop('readOnly', true);\n  }\n\n  isPopover() {\n    const calendar = this;\n    const {\n      app,\n      modal,\n      params\n    } = calendar;\n    const device = getDevice();\n    if (params.openIn === 'sheet') return false;\n    if (modal && modal.type !== 'popover') return false;\n\n    if (!calendar.inline && calendar.inputEl) {\n      if (params.openIn === 'popover') return true;\n\n      if (device.ios) {\n        return !!device.ipad;\n      }\n\n      if (app.width >= 768) {\n        return true;\n      }\n\n      if (device.desktop && app.theme === 'aurora') {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  formatDate(d) {\n    const calendar = this;\n    const date = new Date(d);\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const month1 = month + 1;\n    const day = date.getDate();\n    const weekDay = date.getDay();\n    const {\n      monthNames,\n      monthNamesShort,\n      dayNames,\n      dayNamesShort\n    } = calendar;\n    const {\n      dateFormat,\n      locale\n    } = calendar.params;\n\n    function twoDigits(number) {\n      return number < 10 ? `0${number}` : number;\n    }\n\n    if (typeof dateFormat === 'string') {\n      const tokens = {\n        yyyy: year,\n        yy: String(year).substring(2),\n        mm: twoDigits(month1),\n        m: month1,\n        MM: monthNames[month],\n        M: monthNamesShort[month],\n        dd: twoDigits(day),\n        d: day,\n        DD: dayNames[weekDay],\n        D: dayNamesShort[weekDay]\n      };\n\n      if (calendar.params.timePicker) {\n        const hours = date.getHours();\n        const minutes = date.getMinutes();\n        const seconds = date.getSeconds();\n        let hours12 = hours;\n        if (hours > 12) hours12 = hours - 12;\n        if (hours === 0) hours12 = 12;\n        const a = hours >= 12 && hours !== 0 ? 'pm' : 'am';\n        Object.assign(tokens, {\n          HH: twoDigits(hours),\n          H: hours,\n          hh: twoDigits(hours12),\n          h: hours12,\n          ss: twoDigits(seconds),\n          s: seconds,\n          ':mm': twoDigits(minutes),\n          ':m': minutes,\n          a,\n          A: a.toUpperCase()\n        });\n      }\n\n      const regexp = new RegExp(Object.keys(tokens).map(t => `(${t})`).join('|'), 'g');\n      return dateFormat.replace(regexp, token => {\n        if (token in tokens) return tokens[token];\n        return token;\n      });\n    }\n\n    if (typeof dateFormat === 'function') {\n      return dateFormat(date);\n    } // Intl Object\n\n\n    const formatter = new Intl.DateTimeFormat(locale, dateFormat);\n    return formatter.format(date);\n  }\n\n  formatValue() {\n    const calendar = this;\n    const {\n      value\n    } = calendar;\n\n    if (calendar.params.formatValue) {\n      return calendar.params.formatValue.call(calendar, value);\n    }\n\n    return value.map(v => calendar.formatDate(v)).join(calendar.params.rangePicker ? ' - ' : ', ');\n  }\n\n  addValue(newValue) {\n    const calendar = this;\n    const {\n      multiple,\n      rangePicker,\n      rangePickerMinDays,\n      rangePickerMaxDays\n    } = calendar.params;\n\n    if (multiple) {\n      if (!calendar.value) calendar.value = [];\n      let inValuesIndex;\n\n      for (let i = 0; i < calendar.value.length; i += 1) {\n        if (new Date(newValue).getTime() === new Date(calendar.value[i]).getTime()) {\n          inValuesIndex = i;\n        }\n      }\n\n      if (typeof inValuesIndex === 'undefined') {\n        calendar.value.push(newValue);\n      } else {\n        calendar.value.splice(inValuesIndex, 1);\n      }\n\n      calendar.updateValue();\n    } else if (rangePicker) {\n      if (!calendar.value) calendar.value = [];\n\n      if (calendar.value.length === 2 || calendar.value.length === 0) {\n        calendar.value = [];\n      }\n\n      if (calendar.value.length === 0 || Math.abs(calendar.value[0].getTime() - newValue.getTime()) >= (rangePickerMinDays - 1) * 60 * 60 * 24 * 1000 && (rangePickerMaxDays === 0 || Math.abs(calendar.value[0].getTime() - newValue.getTime()) <= (rangePickerMaxDays - 1) * 60 * 60 * 24 * 1000)) calendar.value.push(newValue);else calendar.value = [];\n      calendar.value.sort((a, b) => a - b);\n      calendar.updateValue();\n    } else {\n      calendar.value = [newValue];\n      calendar.updateValue();\n    }\n  }\n\n  setValue(values) {\n    const calendar = this;\n    const currentValue = calendar.value;\n\n    if (Array.isArray(currentValue) && Array.isArray(values) && currentValue.length === values.length) {\n      let equal = true;\n      currentValue.forEach((v, index) => {\n        if (v !== values[index]) equal = false;\n      });\n      if (equal) return;\n    }\n\n    calendar.value = values;\n    calendar.updateValue();\n  }\n\n  getValue() {\n    const calendar = this;\n    return calendar.value;\n  }\n\n  updateValue(onlyHeader) {\n    const calendar = this;\n    const {\n      $el,\n      $wrapperEl,\n      $inputEl,\n      value,\n      params\n    } = calendar;\n    let i;\n\n    if ($el && $el.length > 0) {\n      $wrapperEl.find('.calendar-day-selected').removeClass('calendar-day-selected calendar-day-selected-range calendar-day-selected-left calendar-day-selected-right');\n      let valueDate;\n\n      if (params.rangePicker && value.length === 2) {\n        const leftDate = new Date(value[0]).getTime();\n        const rightDate = new Date(value[1]).getTime();\n\n        for (i = leftDate; i <= rightDate; i += 24 * 60 * 60 * 1000) {\n          valueDate = new Date(i);\n          let addClass = 'calendar-day-selected';\n\n          if (leftDate !== rightDate) {\n            if (i !== leftDate && i !== rightDate) {\n              addClass += ' calendar-day-selected-range';\n            }\n\n            if (i === leftDate) {\n              addClass += ' calendar-day-selected-left';\n            }\n\n            if (i === rightDate) {\n              addClass += ' calendar-day-selected-right';\n            }\n          }\n\n          $wrapperEl.find(`.calendar-day[data-date=\"${valueDate.getFullYear()}-${valueDate.getMonth()}-${valueDate.getDate()}\"]`).addClass(addClass);\n        }\n\n        valueDate = new Date(leftDate);\n        $wrapperEl.find(`.calendar-day[data-date=\"${valueDate.getFullYear()}-${valueDate.getMonth()}-${valueDate.getDate()}\"]`).removeClass('calendar-day-selected-range').addClass('calendar-day-selected calendar-day-selected-left');\n        valueDate = new Date(rightDate);\n        $wrapperEl.find(`.calendar-day[data-date=\"${valueDate.getFullYear()}-${valueDate.getMonth()}-${valueDate.getDate()}\"]`).removeClass('calendar-day-selected-range').addClass('calendar-day-selected calendar-day-selected-right');\n      } else {\n        for (i = 0; i < calendar.value.length; i += 1) {\n          valueDate = new Date(value[i]);\n          $wrapperEl.find(`.calendar-day[data-date=\"${valueDate.getFullYear()}-${valueDate.getMonth()}-${valueDate.getDate()}\"]`).addClass('calendar-day-selected');\n        }\n      }\n    }\n\n    if (!onlyHeader) {\n      calendar.emit('local::change calendarChange', calendar, value);\n    }\n\n    if ($el && $el.length > 0 && calendar.hasTimePicker) {\n      $el.find('.calendar-time-selector a').text(value && value.length ? calendar.timeSelectorFormatter(value[0]) : calendar.params.timePickerPlaceholder);\n    }\n\n    if ($inputEl && $inputEl.length || params.header) {\n      const inputValue = calendar.formatValue(value);\n\n      if (params.header && $el && $el.length) {\n        $el.find('.calendar-selected-date').text(inputValue);\n      }\n\n      if ($inputEl && $inputEl.length && !onlyHeader) {\n        $inputEl.val(inputValue);\n        $inputEl.trigger('change');\n      }\n    }\n  }\n\n  updateCurrentMonthYear(dir) {\n    const calendar = this;\n    const {\n      $months,\n      $el,\n      monthNames\n    } = calendar;\n    let currentLocaleMonth;\n    let currentLocaleYear;\n\n    if (typeof dir === 'undefined') {\n      calendar.currentMonth = parseInt($months.eq(1).attr('data-month'), 10);\n      calendar.currentYear = parseInt($months.eq(1).attr('data-year'), 10);\n      currentLocaleMonth = $months.eq(1).attr('data-locale-month');\n      currentLocaleYear = $months.eq(1).attr('data-locale-year');\n    } else {\n      calendar.currentMonth = parseInt($months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-month'), 10);\n      calendar.currentYear = parseInt($months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-year'), 10);\n      currentLocaleMonth = $months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-locale-month');\n      currentLocaleYear = $months.eq(dir === 'next' ? $months.length - 1 : 0).attr('data-locale-year');\n    }\n\n    $el.find('.current-month-value').text(monthNames[currentLocaleMonth]);\n    $el.find('.current-year-value').text(currentLocaleYear);\n  }\n\n  update() {\n    const calendar = this;\n    const {\n      currentYear,\n      currentMonth,\n      $wrapperEl\n    } = calendar;\n    const currentDate = new Date(currentYear, currentMonth);\n    const prevMonthHtml = calendar.renderMonth(currentDate, 'prev');\n    const currentMonthHtml = calendar.renderMonth(currentDate);\n    const nextMonthHtml = calendar.renderMonth(currentDate, 'next');\n    $wrapperEl.transition(0).html(`${prevMonthHtml}${currentMonthHtml}${nextMonthHtml}`).transform('translate3d(0,0,0)');\n    calendar.$months = $wrapperEl.find('.calendar-month');\n    calendar.monthsTranslate = 0;\n    calendar.setMonthsTranslate();\n    calendar.$months.each(monthEl => {\n      calendar.emit('local::monthAdd calendarMonthAdd', monthEl);\n    });\n  }\n\n  onMonthChangeStart(dir) {\n    const calendar = this;\n    const {\n      $months,\n      currentYear,\n      currentMonth\n    } = calendar;\n    calendar.updateCurrentMonthYear(dir);\n    $months.removeClass('calendar-month-current calendar-month-prev calendar-month-next');\n    const currentIndex = dir === 'next' ? $months.length - 1 : 0;\n    $months.eq(currentIndex).addClass('calendar-month-current');\n    $months.eq(dir === 'next' ? currentIndex - 1 : currentIndex + 1).addClass(dir === 'next' ? 'calendar-month-prev' : 'calendar-month-next');\n    calendar.emit('local::monthYearChangeStart calendarMonthYearChangeStart', calendar, currentYear, currentMonth);\n  }\n\n  onMonthChangeEnd(dir, rebuildBoth) {\n    const calendar = this;\n    const {\n      currentYear,\n      currentMonth,\n      $wrapperEl,\n      monthsTranslate\n    } = calendar;\n    calendar.animating = false;\n    let nextMonthHtml;\n    let prevMonthHtml;\n    let currentMonthHtml;\n    $wrapperEl.find('.calendar-month:not(.calendar-month-prev):not(.calendar-month-current):not(.calendar-month-next)').remove();\n\n    if (typeof dir === 'undefined') {\n      dir = 'next'; // eslint-disable-line\n\n      rebuildBoth = true; // eslint-disable-line\n    }\n\n    if (!rebuildBoth) {\n      currentMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), dir);\n    } else {\n      $wrapperEl.find('.calendar-month-next, .calendar-month-prev').remove();\n      prevMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), 'prev');\n      nextMonthHtml = calendar.renderMonth(new Date(currentYear, currentMonth), 'next');\n    }\n\n    if (dir === 'next' || rebuildBoth) {\n      $wrapperEl.append(currentMonthHtml || nextMonthHtml);\n    }\n\n    if (dir === 'prev' || rebuildBoth) {\n      $wrapperEl.prepend(currentMonthHtml || prevMonthHtml);\n    }\n\n    const $months = $wrapperEl.find('.calendar-month');\n    calendar.$months = $months;\n    calendar.setMonthsTranslate(monthsTranslate);\n    calendar.emit('local::monthAdd calendarMonthAdd', calendar, dir === 'next' ? $months.eq($months.length - 1)[0] : $months.eq(0)[0]);\n    calendar.emit('local::monthYearChangeEnd calendarMonthYearChangeEnd', calendar, currentYear, currentMonth);\n  }\n\n  setMonthsTranslate(translate) {\n    const calendar = this;\n    const {\n      $months,\n      isHorizontal: isH,\n      inverter\n    } = calendar; // eslint-disable-next-line\n\n    translate = translate || calendar.monthsTranslate || 0;\n\n    if (typeof calendar.monthsTranslate === 'undefined') {\n      calendar.monthsTranslate = translate;\n    }\n\n    $months.removeClass('calendar-month-current calendar-month-prev calendar-month-next');\n    const prevMonthTranslate = -(translate + 1) * 100 * inverter;\n    const currentMonthTranslate = -translate * 100 * inverter;\n    const nextMonthTranslate = -(translate - 1) * 100 * inverter;\n    $months.eq(0).transform(`translate3d(${isH ? prevMonthTranslate : 0}%, ${isH ? 0 : prevMonthTranslate}%, 0)`).addClass('calendar-month-prev');\n    $months.eq(1).transform(`translate3d(${isH ? currentMonthTranslate : 0}%, ${isH ? 0 : currentMonthTranslate}%, 0)`).addClass('calendar-month-current');\n    $months.eq(2).transform(`translate3d(${isH ? nextMonthTranslate : 0}%, ${isH ? 0 : nextMonthTranslate}%, 0)`).addClass('calendar-month-next');\n  }\n\n  nextMonth(transition) {\n    const calendar = this;\n    const {\n      params,\n      $wrapperEl,\n      inverter,\n      isHorizontal: isH\n    } = calendar;\n\n    if (typeof transition === 'undefined' || typeof transition === 'object') {\n      transition = ''; // eslint-disable-line\n\n      if (!params.animate) transition = 0; // eslint-disable-line\n    }\n\n    const nextMonth = parseInt(calendar.$months.eq(calendar.$months.length - 1).attr('data-month'), 10);\n    const nextYear = parseInt(calendar.$months.eq(calendar.$months.length - 1).attr('data-year'), 10);\n    const nextDate = new Date(nextYear, nextMonth);\n    const nextDateTime = nextDate.getTime();\n    const transitionEndCallback = !calendar.animating;\n\n    if (params.maxDate) {\n      if (nextDateTime > new Date(params.maxDate).getTime()) {\n        calendar.resetMonth();\n        return;\n      }\n    }\n\n    calendar.monthsTranslate -= 1;\n\n    if (nextMonth === calendar.currentMonth) {\n      const nextMonthTranslate = -calendar.monthsTranslate * 100 * inverter;\n      const nextMonthHtml = $(calendar.renderMonth(nextDateTime, 'next')).transform(`translate3d(${isH ? nextMonthTranslate : 0}%, ${isH ? 0 : nextMonthTranslate}%, 0)`).addClass('calendar-month-next');\n      $wrapperEl.append(nextMonthHtml[0]);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      calendar.emit('local::monthAdd calendarMonthAdd', calendar.$months.eq(calendar.$months.length - 1)[0]);\n    }\n\n    calendar.animating = true;\n    calendar.onMonthChangeStart('next');\n    const translate = calendar.monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(`translate3d(${isH ? translate : 0}%, ${isH ? 0 : translate}%, 0)`);\n\n    if (transitionEndCallback) {\n      $wrapperEl.transitionEnd(() => {\n        calendar.onMonthChangeEnd('next');\n      });\n    }\n\n    if (!params.animate) {\n      calendar.onMonthChangeEnd('next');\n    }\n  }\n\n  prevMonth(transition) {\n    const calendar = this;\n    const {\n      params,\n      $wrapperEl,\n      inverter,\n      isHorizontal: isH\n    } = calendar;\n\n    if (typeof transition === 'undefined' || typeof transition === 'object') {\n      transition = ''; // eslint-disable-line\n\n      if (!params.animate) transition = 0; // eslint-disable-line\n    }\n\n    const prevMonth = parseInt(calendar.$months.eq(0).attr('data-month'), 10);\n    const prevYear = parseInt(calendar.$months.eq(0).attr('data-year'), 10);\n    const prevDate = new Date(prevYear, prevMonth + 1, -1);\n    const prevDateTime = prevDate.getTime();\n    const transitionEndCallback = !calendar.animating;\n\n    if (params.minDate) {\n      let minDate = new Date(params.minDate);\n      minDate = new Date(minDate.getFullYear(), minDate.getMonth(), 1);\n\n      if (prevDateTime < minDate.getTime()) {\n        calendar.resetMonth();\n        return;\n      }\n    }\n\n    calendar.monthsTranslate += 1;\n\n    if (prevMonth === calendar.currentMonth) {\n      const prevMonthTranslate = -calendar.monthsTranslate * 100 * inverter;\n      const prevMonthHtml = $(calendar.renderMonth(prevDateTime, 'prev')).transform(`translate3d(${isH ? prevMonthTranslate : 0}%, ${isH ? 0 : prevMonthTranslate}%, 0)`).addClass('calendar-month-prev');\n      $wrapperEl.prepend(prevMonthHtml[0]);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      calendar.emit('local::monthAdd calendarMonthAdd', calendar.$months.eq(0)[0]);\n    }\n\n    calendar.animating = true;\n    calendar.onMonthChangeStart('prev');\n    const translate = calendar.monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(`translate3d(${isH ? translate : 0}%, ${isH ? 0 : translate}%, 0)`);\n\n    if (transitionEndCallback) {\n      $wrapperEl.transitionEnd(() => {\n        calendar.onMonthChangeEnd('prev');\n      });\n    }\n\n    if (!params.animate) {\n      calendar.onMonthChangeEnd('prev');\n    }\n  }\n\n  resetMonth(transition) {\n    if (transition === void 0) {\n      transition = '';\n    }\n\n    const calendar = this;\n    const {\n      $wrapperEl,\n      inverter,\n      isHorizontal: isH,\n      monthsTranslate\n    } = calendar;\n    const translate = monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(`translate3d(${isH ? translate : 0}%, ${isH ? 0 : translate}%, 0)`);\n  } // eslint-disable-next-line\n\n\n  setYearMonth(year, month, transition) {\n    const calendar = this;\n    const {\n      params,\n      isHorizontal: isH,\n      $wrapperEl,\n      inverter\n    } = calendar; // eslint-disable-next-line\n\n    if (typeof year === 'undefined') year = calendar.currentYear; // eslint-disable-next-line\n\n    if (typeof month === 'undefined') month = calendar.currentMonth;\n\n    if (typeof transition === 'undefined' || typeof transition === 'object') {\n      // eslint-disable-next-line\n      transition = ''; // eslint-disable-next-line\n\n      if (!params.animate) transition = 0;\n    }\n\n    let targetDate;\n\n    if (year < calendar.currentYear) {\n      targetDate = new Date(year, month + 1, -1).getTime();\n    } else {\n      targetDate = new Date(year, month).getTime();\n    }\n\n    if (params.maxDate && targetDate > new Date(params.maxDate).getTime()) {\n      return false;\n    }\n\n    if (params.minDate) {\n      let minDate = new Date(params.minDate);\n      minDate = new Date(minDate.getFullYear(), minDate.getMonth(), 1);\n\n      if (targetDate < minDate.getTime()) {\n        return false;\n      }\n    }\n\n    const currentDate = new Date(calendar.currentYear, calendar.currentMonth).getTime();\n    const dir = targetDate > currentDate ? 'next' : 'prev';\n    const newMonthHTML = calendar.renderMonth(new Date(year, month));\n    calendar.monthsTranslate = calendar.monthsTranslate || 0;\n    const prevTranslate = calendar.monthsTranslate;\n    let monthTranslate;\n    const transitionEndCallback = !calendar.animating && transition !== 0;\n\n    if (targetDate > currentDate) {\n      // To next\n      calendar.monthsTranslate -= 1;\n      if (!calendar.animating) calendar.$months.eq(calendar.$months.length - 1).remove();\n      $wrapperEl.append(newMonthHTML);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      monthTranslate = -(prevTranslate - 1) * 100 * inverter;\n      calendar.$months.eq(calendar.$months.length - 1).transform(`translate3d(${isH ? monthTranslate : 0}%, ${isH ? 0 : monthTranslate}%, 0)`).addClass('calendar-month-next');\n    } else {\n      // To prev\n      calendar.monthsTranslate += 1;\n      if (!calendar.animating) calendar.$months.eq(0).remove();\n      $wrapperEl.prepend(newMonthHTML);\n      calendar.$months = $wrapperEl.find('.calendar-month');\n      monthTranslate = -(prevTranslate + 1) * 100 * inverter;\n      calendar.$months.eq(0).transform(`translate3d(${isH ? monthTranslate : 0}%, ${isH ? 0 : monthTranslate}%, 0)`).addClass('calendar-month-prev');\n    }\n\n    calendar.emit('local::monthAdd calendarMonthAdd', dir === 'next' ? calendar.$months.eq(calendar.$months.length - 1)[0] : calendar.$months.eq(0)[0]);\n    calendar.animating = true;\n    calendar.onMonthChangeStart(dir);\n    const wrapperTranslate = calendar.monthsTranslate * 100 * inverter;\n    $wrapperEl.transition(transition).transform(`translate3d(${isH ? wrapperTranslate : 0}%, ${isH ? 0 : wrapperTranslate}%, 0)`);\n\n    if (transitionEndCallback) {\n      $wrapperEl.transitionEnd(() => {\n        calendar.onMonthChangeEnd(dir, true);\n      });\n    }\n\n    if (!params.animate || transition === 0) {\n      calendar.onMonthChangeEnd(dir, true);\n    }\n  }\n\n  nextYear() {\n    const calendar = this;\n    calendar.setYearMonth(calendar.currentYear + 1);\n  }\n\n  prevYear() {\n    const calendar = this;\n    calendar.setYearMonth(calendar.currentYear - 1);\n  } // eslint-disable-next-line\n\n\n  dateInRange(dayDate, range) {\n    let match = false;\n    let i;\n    if (!range) return false;\n\n    if (Array.isArray(range)) {\n      for (i = 0; i < range.length; i += 1) {\n        if (range[i].from || range[i].to) {\n          if (range[i].from && range[i].to) {\n            if (dayDate <= new Date(range[i].to).getTime() && dayDate >= new Date(range[i].from).getTime()) {\n              match = true;\n            }\n          } else if (range[i].from) {\n            if (dayDate >= new Date(range[i].from).getTime()) {\n              match = true;\n            }\n          } else if (range[i].to) {\n            if (dayDate <= new Date(range[i].to).getTime()) {\n              match = true;\n            }\n          }\n        } else if (range[i].date) {\n          if (dayDate === new Date(range[i].date).getTime()) {\n            match = true;\n          }\n        } else if (dayDate === new Date(range[i]).getTime()) {\n          match = true;\n        }\n      }\n    } else if (range.from || range.to) {\n      if (range.from && range.to) {\n        if (dayDate <= new Date(range.to).getTime() && dayDate >= new Date(range.from).getTime()) {\n          match = true;\n        }\n      } else if (range.from) {\n        if (dayDate >= new Date(range.from).getTime()) {\n          match = true;\n        }\n      } else if (range.to) {\n        if (dayDate <= new Date(range.to).getTime()) {\n          match = true;\n        }\n      }\n    } else if (range.date) {\n      match = dayDate === new Date(range.date).getTime();\n    } else if (typeof range === 'function') {\n      match = range(new Date(dayDate));\n    }\n\n    return match;\n  } // eslint-disable-next-line\n\n\n  daysInMonth(date) {\n    const d = new Date(date);\n    return new Date(d.getFullYear(), d.getMonth() + 1, 0).getDate();\n  }\n\n  renderMonths(date) {\n    const calendar = this;\n\n    if (calendar.params.renderMonths) {\n      return calendar.params.renderMonths.call(calendar, date);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-months-wrapper\"\n    }, calendar.renderMonth(date, 'prev'), calendar.renderMonth(date), calendar.renderMonth(date, 'next'));\n  }\n\n  renderMonth(d, offset) {\n    const calendar = this;\n    const {\n      params,\n      value\n    } = calendar;\n\n    if (params.renderMonth) {\n      return params.renderMonth.call(calendar, d, offset);\n    }\n\n    let date = new Date(d);\n    let year = date.getFullYear();\n    let month = date.getMonth();\n    let localeMonth = calendar.monthNames.indexOf(calendar.monthFormatter(date));\n    if (localeMonth < 0) localeMonth = month;\n    let localeYear = calendar.yearFormatter(date);\n\n    if (offset === 'next') {\n      if (month === 11) date = new Date(year + 1, 0);else date = new Date(year, month + 1, 1);\n    }\n\n    if (offset === 'prev') {\n      if (month === 0) date = new Date(year - 1, 11);else date = new Date(year, month - 1, 1);\n    }\n\n    if (offset === 'next' || offset === 'prev') {\n      month = date.getMonth();\n      year = date.getFullYear();\n      localeMonth = calendar.monthNames.indexOf(calendar.monthFormatter(date));\n      if (localeMonth < 0) localeMonth = month;\n      localeYear = calendar.yearFormatter(date);\n    }\n\n    const currentValues = [];\n    const today = new Date().setHours(0, 0, 0, 0);\n    const minDate = params.minDate ? new Date(params.minDate).getTime() : null;\n    const maxDate = params.maxDate ? new Date(params.maxDate).getTime() : null;\n    const rows = 6;\n    const cols = 7;\n    const daysInPrevMonth = calendar.daysInMonth(new Date(date.getFullYear(), date.getMonth()).getTime() - 10 * 24 * 60 * 60 * 1000);\n    const daysInMonth = calendar.daysInMonth(date);\n    const minDayNumber = params.firstDay === 6 ? 0 : 1;\n    let monthHtml = '';\n    let dayIndex = 0 + (params.firstDay - 1);\n    let disabled;\n    let hasEvents;\n    let firstDayOfMonthIndex = new Date(date.getFullYear(), date.getMonth()).getDay();\n    if (firstDayOfMonthIndex === 0) firstDayOfMonthIndex = 7;\n\n    if (value && value.length) {\n      for (let i = 0; i < value.length; i += 1) {\n        currentValues.push(new Date(value[i]).setHours(0, 0, 0, 0));\n      }\n    }\n\n    for (let row = 1; row <= rows; row += 1) {\n      let rowHtml = '';\n\n      for (let col = 1; col <= cols; col += 1) {\n        dayIndex += 1;\n        let dayDate;\n        let dayNumber = dayIndex - firstDayOfMonthIndex;\n        let addClass = '';\n\n        if (row === 1 && col === 1 && dayNumber > minDayNumber && params.firstDay !== 1) {\n          dayIndex -= 7;\n          dayNumber = dayIndex - firstDayOfMonthIndex;\n        }\n\n        const weekDayIndex = col - 1 + params.firstDay > 6 ? col - 1 - 7 + params.firstDay : col - 1 + params.firstDay;\n\n        if (dayNumber < 0) {\n          dayNumber = daysInPrevMonth + dayNumber + 1;\n          addClass += ' calendar-day-prev';\n          dayDate = new Date(month - 1 < 0 ? year - 1 : year, month - 1 < 0 ? 11 : month - 1, dayNumber).getTime();\n        } else {\n          dayNumber += 1;\n\n          if (dayNumber > daysInMonth) {\n            dayNumber -= daysInMonth;\n            addClass += ' calendar-day-next';\n            dayDate = new Date(month + 1 > 11 ? year + 1 : year, month + 1 > 11 ? 0 : month + 1, dayNumber).getTime();\n          } else {\n            dayDate = new Date(year, month, dayNumber).getTime();\n          }\n        } // Today\n\n\n        if (dayDate === today) addClass += ' calendar-day-today'; // Selected\n\n        if (params.rangePicker && currentValues.length === 2) {\n          if (dayDate >= currentValues[0] && dayDate <= currentValues[1]) {\n            addClass += ' calendar-day-selected';\n          }\n\n          if (currentValues[0] !== currentValues[1]) {\n            if (dayDate > currentValues[0] && dayDate < currentValues[1]) {\n              addClass += ' calendar-day-selected-range';\n            }\n\n            if (dayDate === currentValues[0]) {\n              addClass += ' calendar-day-selected-left';\n            }\n\n            if (dayDate === currentValues[1]) {\n              addClass += ' calendar-day-selected-right';\n            }\n          }\n        } else if (currentValues.indexOf(dayDate) >= 0) addClass += ' calendar-day-selected'; // Weekend\n\n\n        if (params.weekendDays.indexOf(weekDayIndex) >= 0) {\n          addClass += ' calendar-day-weekend';\n        } // Events\n\n\n        let eventsHtml = '';\n        hasEvents = false;\n\n        if (params.events) {\n          if (calendar.dateInRange(dayDate, params.events)) {\n            hasEvents = true;\n          }\n        }\n\n        if (hasEvents) {\n          addClass += ' calendar-day-has-events'; // prettier-ignore\n\n          eventsHtml = `\n            <span class=\"calendar-day-events\">\n              <span class=\"calendar-day-event\"></span>\n            </span>\n          `;\n\n          if (Array.isArray(params.events)) {\n            const eventDots = [];\n            params.events.forEach(ev => {\n              const color = ev.color || '';\n\n              if (eventDots.indexOf(color) < 0 && calendar.dateInRange(dayDate, ev)) {\n                eventDots.push(color);\n              }\n            }); // prettier-ignore\n\n            eventsHtml = `\n              <span class=\"calendar-day-events\">\n                ${eventDots.map(color => `\n                  <span class=\"calendar-day-event\" style=\"${color ? `background-color: ${color}` : ''}\"></span>\n                `.trim()).join('')}\n              </span>\n            `;\n          }\n        } // Custom Ranges\n\n\n        if (params.rangesClasses) {\n          for (let k = 0; k < params.rangesClasses.length; k += 1) {\n            if (calendar.dateInRange(dayDate, params.rangesClasses[k].range)) {\n              addClass += ` ${params.rangesClasses[k].cssClass}`;\n            }\n          }\n        } // Disabled\n\n\n        disabled = false;\n\n        if (minDate && dayDate < minDate || maxDate && dayDate > maxDate) {\n          disabled = true;\n        }\n\n        if (params.disabled) {\n          if (calendar.dateInRange(dayDate, params.disabled)) {\n            disabled = true;\n          }\n        }\n\n        if (disabled) {\n          addClass += ' calendar-day-disabled';\n        }\n\n        dayDate = new Date(dayDate);\n        const dayYear = dayDate.getFullYear();\n        const dayMonth = dayDate.getMonth();\n        const dayNumberDisplay = calendar.dayFormatter(dayDate); // prettier-ignore\n\n        rowHtml += `\n          <div data-year=\"${dayYear}\" data-month=\"${dayMonth}\" data-day=\"${dayNumber}\" class=\"calendar-day${addClass}\" data-date=\"${dayYear}-${dayMonth}-${dayNumber}\">\n            <span class=\"calendar-day-number\">${dayNumberDisplay}${eventsHtml}</span>\n          </div>`.trim();\n      }\n\n      monthHtml += `<div class=\"calendar-row\">${rowHtml}</div>`;\n    }\n\n    monthHtml = `<div class=\"calendar-month\" data-year=\"${year}\" data-month=\"${month}\" data-locale-year=\"${localeYear}\" data-locale-month=\"${localeMonth}\">${monthHtml}</div>`;\n    return monthHtml;\n  }\n\n  renderWeekHeader() {\n    const calendar = this;\n\n    if (calendar.params.renderWeekHeader) {\n      return calendar.params.renderWeekHeader.call(calendar);\n    }\n\n    const {\n      params\n    } = calendar;\n    let weekDaysHtml = '';\n\n    for (let i = 0; i < 7; i += 1) {\n      const dayIndex = i + params.firstDay > 6 ? i - 7 + params.firstDay : i + params.firstDay;\n      const dayName = calendar.dayNamesShort[dayIndex];\n      weekDaysHtml += `<div class=\"calendar-week-day\">${dayName}</div>`;\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-week-header\"\n    }, weekDaysHtml);\n  }\n\n  renderMonthSelector() {\n    const calendar = this;\n\n    if (calendar.params.renderMonthSelector) {\n      return calendar.params.renderMonthSelector.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-month-selector\"\n    }, $jsx(\"a\", {\n      class: \"link icon-only calendar-prev-month-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-prev\"\n    })), calendar.params.monthPicker ? $jsx(\"a\", {\n      class: \"current-month-value link\"\n    }) : $jsx(\"span\", {\n      class: \"current-month-value\"\n    }), $jsx(\"a\", {\n      class: \"link icon-only calendar-next-month-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-next\"\n    })));\n  }\n\n  renderYearSelector() {\n    const calendar = this;\n\n    if (calendar.params.renderYearSelector) {\n      return calendar.params.renderYearSelector.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-year-selector\"\n    }, $jsx(\"a\", {\n      class: \"link icon-only calendar-prev-year-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-prev\"\n    })), calendar.params.yearPicker ? $jsx(\"a\", {\n      class: \"current-year-value link\"\n    }) : $jsx(\"span\", {\n      class: \"current-year-value\"\n    }), $jsx(\"a\", {\n      class: \"link icon-only calendar-next-year-button\"\n    }, $jsx(\"i\", {\n      class: \"icon icon-next\"\n    })));\n  } // eslint-disable-next-line\n\n\n  renderTimeSelector() {\n    const calendar = this;\n    const value = calendar.value && calendar.value[0];\n    let timeString;\n    if (value) timeString = calendar.timeSelectorFormatter(value);\n    return $jsx(\"div\", {\n      class: \"calendar-time-selector\"\n    }, $jsx(\"span\", null, calendar.params.timePickerLabel), $jsx(\"a\", {\n      class: \"link\"\n    }, timeString || calendar.params.timePickerPlaceholder));\n  }\n\n  renderHeader() {\n    const calendar = this;\n\n    if (calendar.params.renderHeader) {\n      return calendar.params.renderHeader.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-header\"\n    }, $jsx(\"div\", {\n      class: \"calendar-selected-date\"\n    }, calendar.params.headerPlaceholder));\n  }\n\n  renderFooter() {\n    const calendar = this;\n    const app = calendar.app;\n\n    if (calendar.params.renderFooter) {\n      return calendar.params.renderFooter.call(calendar);\n    }\n\n    return $jsx(\"div\", {\n      class: \"calendar-footer\"\n    }, $jsx(\"a\", {\n      class: `${app.theme === 'md' ? 'button' : 'link'} calendar-close sheet-close popover-close`\n    }, calendar.params.toolbarCloseText));\n  }\n\n  renderToolbar() {\n    const calendar = this;\n\n    if (calendar.params.renderToolbar) {\n      return calendar.params.renderToolbar.call(calendar, calendar);\n    } // prettier-ignore\n\n\n    return $jsx(\"div\", {\n      class: \"toolbar toolbar-top no-shadow\"\n    }, $jsx(\"div\", {\n      class: \"toolbar-inner\"\n    }, calendar.params.monthSelector ? calendar.renderMonthSelector() : '', calendar.params.yearSelector ? calendar.renderYearSelector() : ''));\n  } // eslint-disable-next-line\n\n\n  renderInline() {\n    const calendar = this;\n    const {\n      cssClass,\n      toolbar,\n      header,\n      footer,\n      rangePicker,\n      weekHeader\n    } = calendar.params;\n    const {\n      value,\n      hasTimePicker\n    } = calendar;\n    const date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: `calendar calendar-inline ${rangePicker ? 'calendar-range' : ''} ${cssClass || ''}`\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n  }\n\n  renderCustomModal() {\n    const calendar = this;\n    const {\n      cssClass,\n      toolbar,\n      header,\n      footer,\n      rangePicker,\n      weekHeader\n    } = calendar.params;\n    const {\n      value,\n      hasTimePicker\n    } = calendar;\n    const date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: `calendar calendar-modal ${rangePicker ? 'calendar-range' : ''} ${cssClass || ''}`\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n  }\n\n  renderSheet() {\n    const calendar = this;\n    const {\n      cssClass,\n      toolbar,\n      header,\n      footer,\n      rangePicker,\n      weekHeader\n    } = calendar.params;\n    const {\n      value,\n      hasTimePicker\n    } = calendar;\n    const date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: `sheet-modal calendar calendar-sheet ${rangePicker ? 'calendar-range' : ''} ${cssClass || ''}`\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"sheet-modal-inner calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter());\n  }\n\n  renderPopover() {\n    const calendar = this;\n    const {\n      cssClass,\n      toolbar,\n      header,\n      footer,\n      rangePicker,\n      weekHeader\n    } = calendar.params;\n    const {\n      value,\n      hasTimePicker\n    } = calendar;\n    const date = value && value.length ? value[0] : new Date().setHours(0, 0, 0);\n    return $jsx(\"div\", {\n      class: \"popover calendar-popover\"\n    }, $jsx(\"div\", {\n      class: \"popover-inner\"\n    }, $jsx(\"div\", {\n      class: `calendar ${rangePicker ? 'calendar-range' : ''} ${cssClass || ''}`\n    }, header && calendar.renderHeader(), toolbar && calendar.renderToolbar(), weekHeader && calendar.renderWeekHeader(), $jsx(\"div\", {\n      class: \"calendar-months\"\n    }, calendar.renderMonths(date)), hasTimePicker && calendar.renderTimeSelector(), footer && calendar.renderFooter())));\n  }\n\n  render() {\n    const calendar = this;\n    const {\n      params\n    } = calendar;\n    if (params.render) return params.render.call(calendar);\n\n    if (!calendar.inline) {\n      let modalType = params.openIn;\n      if (modalType === 'auto') modalType = calendar.isPopover() ? 'popover' : 'sheet';\n      if (modalType === 'popover') return calendar.renderPopover();\n      if (modalType === 'sheet') return calendar.renderSheet();\n      return calendar.renderCustomModal();\n    }\n\n    return calendar.renderInline();\n  }\n\n  openMonthPicker() {\n    const calendar = this;\n    const {\n      $el,\n      app\n    } = calendar;\n    if (!$el || !$el.length) return;\n    $el.append('<div class=\"popover calendar-popover calendar-month-picker-popover\"><div class=\"popover-inner\"><div class=\"calendar-month-picker\"></div></div></div>');\n    calendar.monthPickerPopover = app.popover.create({\n      el: $el.find('.calendar-month-picker-popover'),\n      targetEl: $el.find('.calendar-month-selector'),\n      backdrop: true,\n      backdropUnique: true,\n      on: {\n        close() {\n          calendar.closeMonthPicker();\n        },\n\n        closed() {\n          if (calendar.monthPickerPopover.$el) calendar.monthPickerPopover.$el.remove();\n          calendar.monthPickerPopover.destroy();\n\n          if (calendar.monthPickerInstance) {\n            calendar.monthPickerInstance.close();\n            calendar.monthPickerInstance.destroy();\n          }\n\n          delete calendar.monthPickerInstance;\n          delete calendar.monthPickerPopover;\n        }\n\n      }\n    });\n    calendar.monthPickerPopover.open();\n    const localeMonth = parseInt(calendar.$el.find('.calendar-month-current').attr('data-locale-month'), 10);\n    const values = [];\n    const displayValues = [];\n    calendar.monthNames.forEach((m, index) => {\n      values.push(index);\n      displayValues.push(m);\n    });\n    calendar.monthPickerInstance = app.picker.create({\n      containerEl: calendar.monthPickerPopover.$el.find('.calendar-month-picker'),\n      value: [localeMonth],\n      toolbar: false,\n      rotateEffect: false,\n      toolbarCloseText: calendar.params.toolbarCloseText,\n      cols: [{\n        values,\n        displayValues\n      }]\n    });\n  }\n\n  closeMonthPicker() {\n    const calendar = this;\n    if (calendar.monthPickerPopover && calendar.monthPickerPopover.opened) calendar.monthPickerPopover.close();\n    const index = calendar.monthPickerInstance.value[0];\n    const localeMonthIndex = parseInt(calendar.$el.find('.calendar-month-current').attr('data-locale-month'), 10);\n    const monthIndex = calendar.currentMonth;\n    const diff = localeMonthIndex - monthIndex;\n    const diffIndex = index - diff;\n    calendar.setYearMonth(calendar.currentYear, diffIndex, 0);\n  }\n\n  openYearPicker() {\n    const calendar = this;\n    const {\n      $el,\n      app\n    } = calendar;\n    if (!$el || !$el.length) return;\n    $el.append('<div class=\"popover calendar-popover calendar-year-picker-popover\"><div class=\"popover-inner\"><div class=\"calendar-year-picker\"></div></div></div>');\n    calendar.yearPickerPopover = app.popover.create({\n      el: $el.find('.calendar-year-picker-popover'),\n      targetEl: $el.find('.calendar-year-selector'),\n      backdrop: true,\n      backdropUnique: true,\n      on: {\n        close() {\n          calendar.closeYearPicker();\n        },\n\n        closed() {\n          if (calendar.yearPickerPopover.$el) calendar.yearPickerPopover.$el.remove();\n          calendar.yearPickerPopover.destroy();\n\n          if (calendar.yearPickerInstance) {\n            calendar.yearPickerInstance.close();\n            calendar.yearPickerInstance.destroy();\n          }\n\n          delete calendar.yearPickerInstance;\n          delete calendar.yearPickerPopover;\n        }\n\n      }\n    });\n    calendar.yearPickerPopover.open();\n    const currentYear = calendar.currentYear;\n    let yearMin = calendar.params.yearPickerMin || new Date().getFullYear() - 100;\n\n    if (calendar.params.minDate) {\n      yearMin = Math.max(yearMin, new Date(calendar.params.minDate).getFullYear());\n    }\n\n    let yearMax = calendar.params.yearPickerMax || new Date().getFullYear() + 100;\n\n    if (calendar.params.maxDate) {\n      yearMax = Math.min(yearMax, new Date(calendar.params.maxDate).getFullYear());\n    }\n\n    const years = [];\n\n    for (let i = yearMin; i <= yearMax; i += 1) {\n      years.push(i);\n    }\n\n    calendar.yearPickerInstance = app.picker.create({\n      containerEl: calendar.yearPickerPopover.$el.find('.calendar-year-picker'),\n      value: [currentYear],\n      toolbar: false,\n      rotateEffect: false,\n      toolbarCloseText: calendar.params.toolbarCloseText,\n      cols: [{\n        values: years\n      }]\n    });\n  }\n\n  closeYearPicker() {\n    const calendar = this;\n    if (calendar.yearPickerPopover && calendar.yearPickerPopover.opened) calendar.yearPickerPopover.close();\n    calendar.setYearMonth(calendar.yearPickerInstance.value[0], undefined, 0);\n  }\n\n  openTimePicker() {\n    const calendar = this;\n    const {\n      $el,\n      app,\n      is12HoursFormat\n    } = calendar;\n    if (!$el || !$el.length) return;\n    $el.append('<div class=\"popover calendar-popover calendar-time-picker-popover\"><div class=\"popover-inner\"><div class=\"calendar-time-picker\"></div></div></div>');\n    const hoursArr = [];\n    const minutesArr = [];\n    const hoursMin = is12HoursFormat ? 1 : 0;\n    const hoursMax = is12HoursFormat ? 12 : 23;\n\n    for (let i = hoursMin; i <= hoursMax; i += 1) {\n      hoursArr.push(i);\n    }\n\n    for (let i = 0; i <= 59; i += 1) {\n      minutesArr.push(i);\n    }\n\n    let value;\n\n    if (calendar.value && calendar.value.length) {\n      value = [calendar.value[0].getHours(), calendar.value[0].getMinutes()];\n    } else {\n      value = [new Date().getHours(), new Date().getMinutes()];\n    }\n\n    if (is12HoursFormat) {\n      value.push(value[0] < 12 ? 'AM' : 'PM');\n      if (value[0] > 12) value[0] -= 12;\n      if (value[0] === 0) value[0] = 12;\n    }\n\n    calendar.timePickerPopover = app.popover.create({\n      el: $el.find('.calendar-time-picker-popover'),\n      targetEl: $el.find('.calendar-time-selector .link'),\n      backdrop: true,\n      backdropUnique: true,\n      on: {\n        close() {\n          calendar.closeTimePicker();\n        },\n\n        closed() {\n          if (calendar.timePickerPopover.$el) calendar.timePickerPopover.$el.remove();\n          calendar.timePickerPopover.destroy();\n\n          if (calendar.timePickerInstance) {\n            calendar.timePickerInstance.close();\n            calendar.timePickerInstance.destroy();\n          }\n\n          delete calendar.timePickerInstance;\n          delete calendar.timePickerPopover;\n        }\n\n      }\n    });\n    calendar.timePickerPopover.open();\n    calendar.timePickerInstance = app.picker.create({\n      containerEl: calendar.timePickerPopover.$el.find('.calendar-time-picker'),\n      value,\n      toolbar: false,\n      rotateEffect: false,\n      toolbarCloseText: calendar.params.toolbarCloseText,\n      cols: [{\n        values: hoursArr\n      }, {\n        divider: true,\n        content: ':'\n      }, {\n        values: minutesArr,\n        displayValues: minutesArr.map(m => m < 10 ? `0${m}` : m)\n      }, ...(is12HoursFormat ? [{\n        values: ['AM', 'PM']\n      }] : [])]\n    });\n  }\n\n  closeTimePicker() {\n    const calendar = this;\n    const {\n      is12HoursFormat\n    } = calendar;\n\n    if (calendar.timePickerInstance) {\n      const timePickerValue = calendar.timePickerInstance.value;\n      let hours = parseInt(timePickerValue[0], 10);\n      const minutes = parseInt(timePickerValue[1], 10);\n      const period = calendar.timePickerInstance.value[2];\n\n      if (is12HoursFormat) {\n        if (period === 'AM' && hours === 12) {\n          hours = 0;\n        } else if (period === 'PM' && hours !== 12) {\n          hours += 12;\n        }\n      }\n\n      let value = calendar.value && calendar.value.length && calendar.value[0];\n\n      if (!value) {\n        value = new Date();\n        value.setHours(hours, minutes, 0, 0);\n      } else {\n        value = new Date(value);\n        value.setHours(hours, minutes);\n      }\n\n      calendar.setValue([value]);\n      if (calendar.timePickerPopover && calendar.timePickerPopover.opened) calendar.timePickerPopover.close();\n    }\n  }\n\n  onOpen() {\n    const calendar = this;\n    const {\n      initialized,\n      $el,\n      app,\n      $inputEl,\n      inline,\n      value,\n      params\n    } = calendar;\n    calendar.closing = false;\n    calendar.opened = true;\n    calendar.opening = true; // Init main events\n\n    calendar.attachCalendarEvents();\n    const updateValue = !value && params.value; // Set value\n\n    if (!initialized) {\n      if (value) calendar.setValue(value, 0);else if (params.value) {\n        calendar.setValue(calendar.normalizeValues(params.value), 0);\n      }\n    } else if (value) {\n      calendar.setValue(value, 0);\n    } // Update current month and year\n\n\n    calendar.updateCurrentMonthYear(); // Set initial translate\n\n    calendar.monthsTranslate = 0;\n    calendar.setMonthsTranslate(); // Update input value\n\n    if (updateValue) calendar.updateValue();else if (params.header && value) {\n      calendar.updateValue(true);\n    } // Extra focus\n\n    if (!inline && $inputEl && $inputEl.length && app.theme === 'md') {\n      $inputEl.trigger('focus');\n    }\n\n    calendar.initialized = true;\n    calendar.$months.each(monthEl => {\n      calendar.emit('local::monthAdd calendarMonthAdd', monthEl);\n    }); // Trigger events\n\n    if ($el) {\n      $el.trigger('calendar:open');\n    }\n\n    if ($inputEl) {\n      $inputEl.trigger('calendar:open');\n    }\n\n    calendar.emit('local::open calendarOpen', calendar);\n  }\n\n  onOpened() {\n    const calendar = this;\n    calendar.opening = false;\n\n    if (calendar.$el) {\n      calendar.$el.trigger('calendar:opened');\n    }\n\n    if (calendar.$inputEl) {\n      calendar.$inputEl.trigger('calendar:opened');\n    }\n\n    calendar.emit('local::opened calendarOpened', calendar);\n  }\n\n  onClose() {\n    const calendar = this;\n    const app = calendar.app;\n    calendar.opening = false;\n    calendar.closing = true;\n\n    if (calendar.$inputEl) {\n      if (app.theme === 'md') {\n        calendar.$inputEl.trigger('blur');\n      } else {\n        const validate = calendar.$inputEl.attr('validate');\n        const required = calendar.$inputEl.attr('required');\n\n        if (validate && required) {\n          app.input.validate(calendar.$inputEl);\n        }\n      }\n    }\n\n    if (calendar.detachCalendarEvents) {\n      calendar.detachCalendarEvents();\n    }\n\n    if (calendar.$el) {\n      calendar.$el.trigger('calendar:close');\n    }\n\n    if (calendar.$inputEl) {\n      calendar.$inputEl.trigger('calendar:close');\n    }\n\n    calendar.emit('local::close calendarClose', calendar);\n  }\n\n  onClosed() {\n    const calendar = this;\n    calendar.opened = false;\n    calendar.closing = false;\n\n    if (!calendar.inline) {\n      nextTick(() => {\n        if (calendar.modal && calendar.modal.el && calendar.modal.destroy) {\n          if (!calendar.params.routableModals) {\n            calendar.modal.destroy();\n          }\n        }\n\n        delete calendar.modal;\n      });\n    }\n\n    if (calendar.timePickerInstance) {\n      if (calendar.timePickerInstance.destroy) calendar.timePickerInstance.destroy();\n      delete calendar.timePickerInstance;\n    }\n\n    if (calendar.$el) {\n      calendar.$el.trigger('calendar:closed');\n    }\n\n    if (calendar.$inputEl) {\n      calendar.$inputEl.trigger('calendar:closed');\n    }\n\n    calendar.emit('local::closed calendarClosed', calendar);\n  }\n\n  open() {\n    const calendar = this;\n    const {\n      app,\n      opened,\n      inline,\n      $inputEl,\n      params\n    } = calendar;\n    if (opened) return;\n\n    if (inline) {\n      calendar.$el = $(calendar.render());\n      calendar.$el[0].f7Calendar = calendar;\n      calendar.$wrapperEl = calendar.$el.find('.calendar-months-wrapper');\n      calendar.$months = calendar.$wrapperEl.find('.calendar-month');\n      calendar.$containerEl.append(calendar.$el);\n      calendar.onOpen();\n      calendar.onOpened();\n      return;\n    }\n\n    let modalType = params.openIn;\n\n    if (modalType === 'auto') {\n      modalType = calendar.isPopover() ? 'popover' : 'sheet';\n    }\n\n    const modalContent = calendar.render();\n    const modalParams = {\n      targetEl: $inputEl,\n      scrollToEl: params.scrollToInput ? $inputEl : undefined,\n      content: modalContent,\n      backdrop: params.backdrop === true || modalType === 'popover' && app.params.popover.backdrop !== false && params.backdrop !== false,\n      closeByBackdropClick: params.closeByBackdropClick,\n      on: {\n        open() {\n          const modal = this;\n          calendar.modal = modal;\n          calendar.$el = modalType === 'popover' ? modal.$el.find('.calendar') : modal.$el;\n          calendar.$wrapperEl = calendar.$el.find('.calendar-months-wrapper');\n          calendar.$months = calendar.$wrapperEl.find('.calendar-month');\n          calendar.$el[0].f7Calendar = calendar;\n\n          if (modalType === 'customModal') {\n            $(calendar.$el).find('.calendar-close').once('click', () => {\n              calendar.close();\n            });\n          }\n\n          calendar.onOpen();\n        },\n\n        opened() {\n          calendar.onOpened();\n        },\n\n        close() {\n          calendar.onClose();\n        },\n\n        closed() {\n          calendar.onClosed();\n        }\n\n      }\n    };\n\n    if (modalType === 'sheet') {\n      modalParams.push = params.sheetPush;\n      modalParams.swipeToClose = params.sheetSwipeToClose;\n    }\n\n    if (params.routableModals && calendar.view) {\n      calendar.view.router.navigate({\n        url: calendar.url,\n        route: {\n          path: calendar.url,\n          [modalType]: modalParams\n        }\n      });\n    } else {\n      calendar.modal = app[modalType].create(modalParams);\n      calendar.modal.open();\n    }\n  }\n\n  close() {\n    const calendar = this;\n    const {\n      opened,\n      inline\n    } = calendar;\n    if (!opened) return;\n\n    if (inline) {\n      calendar.onClose();\n      calendar.onClosed();\n      return;\n    }\n\n    if (calendar.params.routableModals && calendar.view) {\n      calendar.view.router.back();\n    } else {\n      calendar.modal.close();\n    }\n  }\n\n  init() {\n    const calendar = this;\n    calendar.initInput();\n\n    if (calendar.inline) {\n      calendar.open();\n      calendar.emit('local::init calendarInit', calendar);\n      return;\n    }\n\n    if (!calendar.initialized && calendar.params.value) {\n      calendar.setValue(calendar.normalizeValues(calendar.params.value));\n    } // Attach input Events\n\n\n    if (calendar.$inputEl) {\n      calendar.attachInputEvents();\n    }\n\n    if (calendar.params.closeByOutsideClick) {\n      calendar.attachHtmlEvents();\n    }\n\n    calendar.emit('local::init calendarInit', calendar);\n  }\n\n  destroy() {\n    const calendar = this;\n    if (calendar.destroyed) return;\n    const {\n      $el\n    } = calendar;\n    calendar.emit('local::beforeDestroy calendarBeforeDestroy', calendar);\n    if ($el) $el.trigger('calendar:beforedestroy');\n    calendar.close(); // Detach Events\n\n    if (calendar.$inputEl) {\n      calendar.detachInputEvents();\n    }\n\n    if (calendar.params.closeByOutsideClick) {\n      calendar.detachHtmlEvents();\n    }\n\n    if (calendar.timePickerInstance) {\n      if (calendar.timePickerInstance.destroy) calendar.timePickerInstance.destroy();\n      delete calendar.timePickerInstance;\n    }\n\n    if ($el && $el.length) delete calendar.$el[0].f7Calendar;\n    deleteProps(calendar);\n    calendar.destroyed = true;\n  }\n\n}\n\nexport default Calendar;"],"mappings":"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"},"metadata":{},"sourceType":"module"}