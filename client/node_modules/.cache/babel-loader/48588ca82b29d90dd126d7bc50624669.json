{"ast":null,"code":"/* eslint-disable no-nested-ternary */\nimport { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7.js';\nimport { getSupport } from '../../shared/get-support.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport { extend } from '../../shared/utils.js';\n\nfunction initTouch() {\n  const app = this;\n  const device = getDevice();\n  const support = getSupport();\n  const window = getWindow();\n  const document = getDocument();\n  const params = app.params.touch;\n  const useRipple = params[`${app.theme}TouchRipple`];\n\n  if (device.ios && device.webView) {\n    // Strange hack required for iOS 8 webview to work on inputs\n    window.addEventListener('touchstart', () => {});\n  }\n\n  let touchStartX;\n  let touchStartY;\n  let targetElement;\n  let isMoved;\n  let tapHoldFired;\n  let tapHoldTimeout;\n  let preventClick;\n  let activableElement;\n  let activeTimeout;\n  let rippleWave;\n  let rippleTarget;\n  let rippleTimeout;\n\n  function findActivableElement(el) {\n    const target = $(el);\n    const parents = target.parents(params.activeStateElements);\n\n    if (target.closest('.no-active-state').length) {\n      return null;\n    }\n\n    let activable;\n\n    if (target.is(params.activeStateElements)) {\n      activable = target;\n    }\n\n    if (parents.length > 0) {\n      activable = activable ? activable.add(parents) : parents;\n    }\n\n    if (activable && activable.length > 1) {\n      const newActivable = [];\n      let preventPropagation;\n\n      for (let i = 0; i < activable.length; i += 1) {\n        if (!preventPropagation) {\n          newActivable.push(activable[i]);\n\n          if (activable.eq(i).hasClass('prevent-active-state-propagation') || activable.eq(i).hasClass('no-active-state-propagation')) {\n            preventPropagation = true;\n          }\n        }\n      }\n\n      activable = $(newActivable);\n    }\n\n    return activable || target;\n  }\n\n  function isInsideScrollableView(el) {\n    const pageContent = el.parents('.page-content');\n    return pageContent.length > 0;\n  }\n\n  function addActive() {\n    if (!activableElement) return;\n    activableElement.addClass('active-state');\n  }\n\n  function removeActive() {\n    if (!activableElement) return;\n    activableElement.removeClass('active-state');\n    activableElement = null;\n  } // Ripple handlers\n\n\n  function findRippleElement(el) {\n    const rippleElements = params.touchRippleElements;\n    const $el = $(el);\n\n    if ($el.is(rippleElements)) {\n      if ($el.hasClass('no-ripple')) {\n        return false;\n      }\n\n      return $el;\n    }\n\n    if ($el.parents(rippleElements).length > 0) {\n      const rippleParent = $el.parents(rippleElements).eq(0);\n\n      if (rippleParent.hasClass('no-ripple')) {\n        return false;\n      }\n\n      return rippleParent;\n    }\n\n    return false;\n  }\n\n  function createRipple($el, x, y) {\n    if (!$el) return;\n    rippleWave = app.touchRipple.create(app, $el, x, y);\n  }\n\n  function removeRipple() {\n    if (!rippleWave) return;\n    rippleWave.remove();\n    rippleWave = undefined;\n    rippleTarget = undefined;\n  }\n\n  function rippleTouchStart(el) {\n    rippleTarget = findRippleElement(el);\n\n    if (!rippleTarget || rippleTarget.length === 0) {\n      rippleTarget = undefined;\n      return;\n    }\n\n    const inScrollable = isInsideScrollableView(rippleTarget);\n\n    if (!inScrollable) {\n      removeRipple();\n      createRipple(rippleTarget, touchStartX, touchStartY);\n    } else {\n      clearTimeout(rippleTimeout);\n      rippleTimeout = setTimeout(() => {\n        removeRipple();\n        createRipple(rippleTarget, touchStartX, touchStartY);\n      }, 80);\n    }\n  }\n\n  function rippleTouchMove() {\n    clearTimeout(rippleTimeout);\n    removeRipple();\n  }\n\n  function rippleTouchEnd() {\n    if (!rippleWave && rippleTarget && !isMoved) {\n      clearTimeout(rippleTimeout);\n      createRipple(rippleTarget, touchStartX, touchStartY);\n      setTimeout(removeRipple, 0);\n    } else {\n      removeRipple();\n    }\n  } // Mouse Handlers\n\n\n  function handleMouseDown(e) {\n    const $activableEl = findActivableElement(e.target);\n\n    if ($activableEl) {\n      $activableEl.addClass('active-state');\n\n      if ('which' in e && e.which === 3) {\n        setTimeout(() => {\n          $('.active-state').removeClass('active-state');\n        }, 0);\n      }\n    }\n\n    if (useRipple) {\n      touchStartX = e.pageX;\n      touchStartY = e.pageY;\n      rippleTouchStart(e.target, e.pageX, e.pageY);\n    }\n  }\n\n  function handleMouseMove() {\n    if (!params.activeStateOnMouseMove) {\n      $('.active-state').removeClass('active-state');\n    }\n\n    if (useRipple) {\n      rippleTouchMove();\n    }\n  }\n\n  function handleMouseUp() {\n    $('.active-state').removeClass('active-state');\n\n    if (useRipple) {\n      rippleTouchEnd();\n    }\n  }\n\n  function handleTouchCancel() {\n    targetElement = null; // Remove Active State\n\n    clearTimeout(activeTimeout);\n    clearTimeout(tapHoldTimeout);\n\n    if (params.activeState) {\n      removeActive();\n    } // Remove Ripple\n\n\n    if (useRipple) {\n      rippleTouchEnd();\n    }\n  }\n\n  let isScrolling;\n  let isSegmentedStrong = false;\n  let segmentedStrongEl = null;\n  const touchMoveActivableIos = '.dialog-button, .actions-button';\n  let isTouchMoveActivable = false;\n  let touchmoveActivableEl = null;\n\n  function handleTouchStart(e) {\n    isMoved = false;\n    tapHoldFired = false;\n    preventClick = false;\n    isScrolling = undefined;\n\n    if (e.targetTouches.length > 1) {\n      if (activableElement) removeActive();\n      return true;\n    }\n\n    if (e.touches.length > 1 && activableElement) {\n      removeActive();\n    }\n\n    if (params.tapHold) {\n      if (tapHoldTimeout) clearTimeout(tapHoldTimeout);\n      tapHoldTimeout = setTimeout(() => {\n        if (e && e.touches && e.touches.length > 1) return;\n        tapHoldFired = true;\n        e.preventDefault();\n        preventClick = true;\n        $(e.target).trigger('taphold', e);\n        app.emit('taphold', e);\n      }, params.tapHoldDelay);\n    }\n\n    targetElement = e.target;\n    touchStartX = e.targetTouches[0].pageX;\n    touchStartY = e.targetTouches[0].pageY;\n    isSegmentedStrong = e.target.closest('.segmented-strong .button-active, .segmented-strong .tab-link-active');\n    isTouchMoveActivable = app.theme === 'ios' && e.target.closest(touchMoveActivableIos);\n\n    if (isSegmentedStrong) {\n      segmentedStrongEl = isSegmentedStrong.closest('.segmented-strong');\n    }\n\n    if (params.activeState) {\n      activableElement = findActivableElement(targetElement);\n\n      if (activableElement && !isInsideScrollableView(activableElement)) {\n        addActive();\n      } else if (activableElement) {\n        activeTimeout = setTimeout(addActive, 80);\n      }\n    }\n\n    if (useRipple) {\n      rippleTouchStart(targetElement, touchStartX, touchStartY);\n    }\n\n    return true;\n  }\n\n  function handleTouchMove(e) {\n    let touch;\n    let distance;\n    let shouldRemoveActive = true;\n\n    if (e.type === 'touchmove') {\n      touch = e.targetTouches[0];\n      distance = params.touchClicksDistanceThreshold;\n    }\n\n    const touchCurrentX = e.targetTouches[0].pageX;\n    const touchCurrentY = e.targetTouches[0].pageY;\n\n    if (typeof isScrolling === 'undefined') {\n      isScrolling = !!(isScrolling || Math.abs(touchCurrentY - touchStartY) > Math.abs(touchCurrentX - touchStartX));\n    }\n\n    if (isTouchMoveActivable || !isScrolling && isSegmentedStrong && segmentedStrongEl) {\n      if (e.cancelable) e.preventDefault();\n    }\n\n    if (!isScrolling && isSegmentedStrong && segmentedStrongEl) {\n      const elementFromPoint = document.elementFromPoint(e.targetTouches[0].clientX, e.targetTouches[0].clientY);\n      const buttonEl = elementFromPoint.closest('.segmented-strong .button:not(.button-active):not(.tab-link-active)');\n\n      if (buttonEl && segmentedStrongEl.contains(buttonEl)) {\n        $(buttonEl).trigger('click', 'f7Segmented');\n        targetElement = buttonEl;\n      }\n    }\n\n    if (distance && touch) {\n      const pageX = touch.pageX;\n      const pageY = touch.pageY;\n\n      if (Math.abs(pageX - touchStartX) > distance || Math.abs(pageY - touchStartY) > distance) {\n        isMoved = true;\n      }\n    } else {\n      isMoved = true;\n    }\n\n    if (isMoved) {\n      preventClick = true; // Keep active state on touchMove (for dialog and actions buttons)\n\n      if (isTouchMoveActivable) {\n        const elementFromPoint = document.elementFromPoint(e.targetTouches[0].clientX, e.targetTouches[0].clientY);\n        touchmoveActivableEl = elementFromPoint.closest(touchMoveActivableIos);\n\n        if (touchmoveActivableEl && activableElement && activableElement[0] === touchmoveActivableEl) {\n          shouldRemoveActive = false;\n        } else if (touchmoveActivableEl) {\n          setTimeout(() => {\n            activableElement = findActivableElement(touchmoveActivableEl);\n            addActive();\n          });\n        }\n      }\n\n      if (params.tapHold) {\n        clearTimeout(tapHoldTimeout);\n      }\n\n      if (params.activeState && shouldRemoveActive) {\n        clearTimeout(activeTimeout);\n        removeActive();\n      }\n\n      if (useRipple) {\n        rippleTouchMove();\n      }\n    }\n  }\n\n  function handleTouchEnd(e) {\n    isScrolling = undefined;\n    isSegmentedStrong = false;\n    segmentedStrongEl = null;\n    isTouchMoveActivable = false;\n    clearTimeout(activeTimeout);\n    clearTimeout(tapHoldTimeout);\n\n    if (touchmoveActivableEl) {\n      $(touchmoveActivableEl).trigger('click', 'f7TouchMoveActivable');\n      touchmoveActivableEl = null;\n    }\n\n    if (document.activeElement === e.target) {\n      if (params.activeState) removeActive();\n\n      if (useRipple) {\n        rippleTouchEnd();\n      }\n\n      return true;\n    }\n\n    if (params.activeState) {\n      addActive();\n      setTimeout(removeActive, 0);\n    }\n\n    if (useRipple) {\n      rippleTouchEnd();\n    }\n\n    if (params.tapHoldPreventClicks && tapHoldFired || preventClick) {\n      if (e.cancelable) e.preventDefault();\n      preventClick = true;\n      return false;\n    }\n\n    return true;\n  }\n\n  function handleClick(e) {\n    const isOverswipe = e && e.detail && e.detail === 'f7Overswipe';\n    const isSegmented = e && e.detail && e.detail === 'f7Segmented'; // eslint-disable-next-line\n\n    const isTouchMoveActivable = e && e.detail && e.detail === 'f7TouchMoveActivable';\n    let localPreventClick = preventClick;\n\n    if (targetElement && e.target !== targetElement) {\n      if (isOverswipe || isSegmented || isTouchMoveActivable) {\n        localPreventClick = false;\n      } else {\n        localPreventClick = true;\n      }\n    } else if (isTouchMoveActivable) {\n      localPreventClick = false;\n    }\n\n    if (params.tapHold && params.tapHoldPreventClicks && tapHoldFired) {\n      localPreventClick = true;\n    }\n\n    if (localPreventClick) {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      e.preventDefault();\n    }\n\n    if (params.tapHold) {\n      tapHoldTimeout = setTimeout(() => {\n        tapHoldFired = false;\n      }, device.ios || device.androidChrome ? 100 : 400);\n    }\n\n    preventClick = false;\n    targetElement = null;\n    return !localPreventClick;\n  }\n\n  function emitAppTouchEvent(name, e) {\n    app.emit({\n      events: name,\n      data: [e]\n    });\n  }\n\n  function appClick(e) {\n    emitAppTouchEvent('click', e);\n  }\n\n  function appTouchStartActive(e) {\n    emitAppTouchEvent('touchstart touchstart:active', e);\n  }\n\n  function appTouchMoveActive(e) {\n    emitAppTouchEvent('touchmove touchmove:active', e);\n  }\n\n  function appTouchEndActive(e) {\n    emitAppTouchEvent('touchend touchend:active', e);\n  }\n\n  function appTouchStartPassive(e) {\n    emitAppTouchEvent('touchstart:passive', e);\n  }\n\n  function appTouchMovePassive(e) {\n    emitAppTouchEvent('touchmove:passive', e);\n  }\n\n  function appTouchEndPassive(e) {\n    emitAppTouchEvent('touchend:passive', e);\n  }\n\n  const passiveListener = support.passiveListener ? {\n    passive: true\n  } : false;\n  const passiveListenerCapture = support.passiveListener ? {\n    passive: true,\n    capture: true\n  } : true;\n  const activeListener = support.passiveListener ? {\n    passive: false\n  } : false;\n  const activeListenerCapture = support.passiveListener ? {\n    passive: false,\n    capture: true\n  } : true;\n  document.addEventListener('click', appClick, true);\n\n  if (support.passiveListener) {\n    document.addEventListener(app.touchEvents.start, appTouchStartActive, activeListenerCapture);\n    document.addEventListener(app.touchEvents.move, appTouchMoveActive, activeListener);\n    document.addEventListener(app.touchEvents.end, appTouchEndActive, activeListener);\n    document.addEventListener(app.touchEvents.start, appTouchStartPassive, passiveListenerCapture);\n    document.addEventListener(app.touchEvents.move, appTouchMovePassive, passiveListener);\n    document.addEventListener(app.touchEvents.end, appTouchEndPassive, passiveListener);\n  } else {\n    document.addEventListener(app.touchEvents.start, e => {\n      appTouchStartActive(e);\n      appTouchStartPassive(e);\n    }, true);\n    document.addEventListener(app.touchEvents.move, e => {\n      appTouchMoveActive(e);\n      appTouchMovePassive(e);\n    }, false);\n    document.addEventListener(app.touchEvents.end, e => {\n      appTouchEndActive(e);\n      appTouchEndPassive(e);\n    }, false);\n  }\n\n  if (support.touch) {\n    app.on('click', handleClick);\n    app.on('touchstart', handleTouchStart);\n    app.on('touchmove', handleTouchMove);\n    app.on('touchend', handleTouchEnd);\n    document.addEventListener('touchcancel', handleTouchCancel, {\n      passive: true\n    });\n  } else if (params.activeState) {\n    app.on('touchstart', handleMouseDown);\n    app.on('touchmove', handleMouseMove);\n    app.on('touchend', handleMouseUp);\n    document.addEventListener('pointercancel', handleMouseUp, {\n      passive: true\n    });\n  }\n\n  document.addEventListener('contextmenu', e => {\n    if (params.disableContextMenu && (device.ios || device.android || device.cordova || window.Capacitor && window.Capacitor.isNative)) {\n      e.preventDefault();\n    }\n\n    if (useRipple) {\n      if (activableElement) removeActive();\n      rippleTouchEnd();\n    }\n  });\n}\n\nexport default {\n  name: 'touch',\n  params: {\n    touch: {\n      // Clicks\n      touchClicksDistanceThreshold: 5,\n      // ContextMenu\n      disableContextMenu: false,\n      // Tap Hold\n      tapHold: false,\n      tapHoldDelay: 750,\n      tapHoldPreventClicks: true,\n      // Active State\n      activeState: true,\n      activeStateElements: 'a, button, label, span, .actions-button, .stepper-button, .stepper-button-plus, .stepper-button-minus, .card-expandable, .menu-item, .link, .item-link, .accordion-item-toggle',\n      activeStateOnMouseMove: false,\n      mdTouchRipple: true,\n      iosTouchRipple: false,\n      auroraTouchRipple: false,\n      touchRippleElements: '.ripple, .link, .item-link, .list-button, .links-list a, .button, button, .input-clear-button, .dialog-button, .tab-link, .item-radio, .item-checkbox, .actions-button, .searchbar-disable-button, .fab a, .checkbox, .radio, .data-table .sortable-cell:not(.input-cell), .notification-close-button, .stepper-button, .stepper-button-minus, .stepper-button-plus, .menu-item-content, .list.accordion-list .accordion-item-toggle',\n      touchRippleInsetElements: '.ripple-inset, .icon-only, .searchbar-disable-button, .input-clear-button, .notification-close-button, .md .navbar .link.back'\n    }\n  },\n\n  create() {\n    const app = this;\n    const support = getSupport();\n    extend(app, {\n      touchEvents: {\n        start: support.touch ? 'touchstart' : support.pointerEvents ? 'pointerdown' : 'mousedown',\n        move: support.touch ? 'touchmove' : support.pointerEvents ? 'pointermove' : 'mousemove',\n        end: support.touch ? 'touchend' : support.pointerEvents ? 'pointerup' : 'mouseup'\n      }\n    });\n  },\n\n  on: {\n    init: initTouch\n  }\n};","map":{"version":3,"names":["getWindow","getDocument","$","getSupport","getDevice","extend","initTouch","app","device","support","window","document","params","touch","useRipple","theme","ios","webView","addEventListener","touchStartX","touchStartY","targetElement","isMoved","tapHoldFired","tapHoldTimeout","preventClick","activableElement","activeTimeout","rippleWave","rippleTarget","rippleTimeout","findActivableElement","el","target","parents","activeStateElements","closest","length","activable","is","add","newActivable","preventPropagation","i","push","eq","hasClass","isInsideScrollableView","pageContent","addActive","addClass","removeActive","removeClass","findRippleElement","rippleElements","touchRippleElements","$el","rippleParent","createRipple","x","y","touchRipple","create","removeRipple","remove","undefined","rippleTouchStart","inScrollable","clearTimeout","setTimeout","rippleTouchMove","rippleTouchEnd","handleMouseDown","e","$activableEl","which","pageX","pageY","handleMouseMove","activeStateOnMouseMove","handleMouseUp","handleTouchCancel","activeState","isScrolling","isSegmentedStrong","segmentedStrongEl","touchMoveActivableIos","isTouchMoveActivable","touchmoveActivableEl","handleTouchStart","targetTouches","touches","tapHold","preventDefault","trigger","emit","tapHoldDelay","handleTouchMove","distance","shouldRemoveActive","type","touchClicksDistanceThreshold","touchCurrentX","touchCurrentY","Math","abs","cancelable","elementFromPoint","clientX","clientY","buttonEl","contains","handleTouchEnd","activeElement","tapHoldPreventClicks","handleClick","isOverswipe","detail","isSegmented","localPreventClick","stopImmediatePropagation","stopPropagation","androidChrome","emitAppTouchEvent","name","events","data","appClick","appTouchStartActive","appTouchMoveActive","appTouchEndActive","appTouchStartPassive","appTouchMovePassive","appTouchEndPassive","passiveListener","passive","passiveListenerCapture","capture","activeListener","activeListenerCapture","touchEvents","start","move","end","on","disableContextMenu","android","cordova","Capacitor","isNative","mdTouchRipple","iosTouchRipple","auroraTouchRipple","touchRippleInsetElements","pointerEvents","init"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/modules/touch/touch.js"],"sourcesContent":["/* eslint-disable no-nested-ternary */\nimport { getWindow, getDocument } from 'ssr-window';\nimport $ from '../../shared/dom7.js';\nimport { getSupport } from '../../shared/get-support.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport { extend } from '../../shared/utils.js';\n\nfunction initTouch() {\n  const app = this;\n  const device = getDevice();\n  const support = getSupport();\n  const window = getWindow();\n  const document = getDocument();\n  const params = app.params.touch;\n  const useRipple = params[`${app.theme}TouchRipple`];\n\n  if (device.ios && device.webView) {\n    // Strange hack required for iOS 8 webview to work on inputs\n    window.addEventListener('touchstart', () => {});\n  }\n\n  let touchStartX;\n  let touchStartY;\n  let targetElement;\n  let isMoved;\n  let tapHoldFired;\n  let tapHoldTimeout;\n  let preventClick;\n  let activableElement;\n  let activeTimeout;\n  let rippleWave;\n  let rippleTarget;\n  let rippleTimeout;\n\n  function findActivableElement(el) {\n    const target = $(el);\n    const parents = target.parents(params.activeStateElements);\n\n    if (target.closest('.no-active-state').length) {\n      return null;\n    }\n\n    let activable;\n\n    if (target.is(params.activeStateElements)) {\n      activable = target;\n    }\n\n    if (parents.length > 0) {\n      activable = activable ? activable.add(parents) : parents;\n    }\n\n    if (activable && activable.length > 1) {\n      const newActivable = [];\n      let preventPropagation;\n\n      for (let i = 0; i < activable.length; i += 1) {\n        if (!preventPropagation) {\n          newActivable.push(activable[i]);\n\n          if (activable.eq(i).hasClass('prevent-active-state-propagation') || activable.eq(i).hasClass('no-active-state-propagation')) {\n            preventPropagation = true;\n          }\n        }\n      }\n\n      activable = $(newActivable);\n    }\n\n    return activable || target;\n  }\n\n  function isInsideScrollableView(el) {\n    const pageContent = el.parents('.page-content');\n    return pageContent.length > 0;\n  }\n\n  function addActive() {\n    if (!activableElement) return;\n    activableElement.addClass('active-state');\n  }\n\n  function removeActive() {\n    if (!activableElement) return;\n    activableElement.removeClass('active-state');\n    activableElement = null;\n  } // Ripple handlers\n\n\n  function findRippleElement(el) {\n    const rippleElements = params.touchRippleElements;\n    const $el = $(el);\n\n    if ($el.is(rippleElements)) {\n      if ($el.hasClass('no-ripple')) {\n        return false;\n      }\n\n      return $el;\n    }\n\n    if ($el.parents(rippleElements).length > 0) {\n      const rippleParent = $el.parents(rippleElements).eq(0);\n\n      if (rippleParent.hasClass('no-ripple')) {\n        return false;\n      }\n\n      return rippleParent;\n    }\n\n    return false;\n  }\n\n  function createRipple($el, x, y) {\n    if (!$el) return;\n    rippleWave = app.touchRipple.create(app, $el, x, y);\n  }\n\n  function removeRipple() {\n    if (!rippleWave) return;\n    rippleWave.remove();\n    rippleWave = undefined;\n    rippleTarget = undefined;\n  }\n\n  function rippleTouchStart(el) {\n    rippleTarget = findRippleElement(el);\n\n    if (!rippleTarget || rippleTarget.length === 0) {\n      rippleTarget = undefined;\n      return;\n    }\n\n    const inScrollable = isInsideScrollableView(rippleTarget);\n\n    if (!inScrollable) {\n      removeRipple();\n      createRipple(rippleTarget, touchStartX, touchStartY);\n    } else {\n      clearTimeout(rippleTimeout);\n      rippleTimeout = setTimeout(() => {\n        removeRipple();\n        createRipple(rippleTarget, touchStartX, touchStartY);\n      }, 80);\n    }\n  }\n\n  function rippleTouchMove() {\n    clearTimeout(rippleTimeout);\n    removeRipple();\n  }\n\n  function rippleTouchEnd() {\n    if (!rippleWave && rippleTarget && !isMoved) {\n      clearTimeout(rippleTimeout);\n      createRipple(rippleTarget, touchStartX, touchStartY);\n      setTimeout(removeRipple, 0);\n    } else {\n      removeRipple();\n    }\n  } // Mouse Handlers\n\n\n  function handleMouseDown(e) {\n    const $activableEl = findActivableElement(e.target);\n\n    if ($activableEl) {\n      $activableEl.addClass('active-state');\n\n      if ('which' in e && e.which === 3) {\n        setTimeout(() => {\n          $('.active-state').removeClass('active-state');\n        }, 0);\n      }\n    }\n\n    if (useRipple) {\n      touchStartX = e.pageX;\n      touchStartY = e.pageY;\n      rippleTouchStart(e.target, e.pageX, e.pageY);\n    }\n  }\n\n  function handleMouseMove() {\n    if (!params.activeStateOnMouseMove) {\n      $('.active-state').removeClass('active-state');\n    }\n\n    if (useRipple) {\n      rippleTouchMove();\n    }\n  }\n\n  function handleMouseUp() {\n    $('.active-state').removeClass('active-state');\n\n    if (useRipple) {\n      rippleTouchEnd();\n    }\n  }\n\n  function handleTouchCancel() {\n    targetElement = null; // Remove Active State\n\n    clearTimeout(activeTimeout);\n    clearTimeout(tapHoldTimeout);\n\n    if (params.activeState) {\n      removeActive();\n    } // Remove Ripple\n\n\n    if (useRipple) {\n      rippleTouchEnd();\n    }\n  }\n\n  let isScrolling;\n  let isSegmentedStrong = false;\n  let segmentedStrongEl = null;\n  const touchMoveActivableIos = '.dialog-button, .actions-button';\n  let isTouchMoveActivable = false;\n  let touchmoveActivableEl = null;\n\n  function handleTouchStart(e) {\n    isMoved = false;\n    tapHoldFired = false;\n    preventClick = false;\n    isScrolling = undefined;\n\n    if (e.targetTouches.length > 1) {\n      if (activableElement) removeActive();\n      return true;\n    }\n\n    if (e.touches.length > 1 && activableElement) {\n      removeActive();\n    }\n\n    if (params.tapHold) {\n      if (tapHoldTimeout) clearTimeout(tapHoldTimeout);\n      tapHoldTimeout = setTimeout(() => {\n        if (e && e.touches && e.touches.length > 1) return;\n        tapHoldFired = true;\n        e.preventDefault();\n        preventClick = true;\n        $(e.target).trigger('taphold', e);\n        app.emit('taphold', e);\n      }, params.tapHoldDelay);\n    }\n\n    targetElement = e.target;\n    touchStartX = e.targetTouches[0].pageX;\n    touchStartY = e.targetTouches[0].pageY;\n    isSegmentedStrong = e.target.closest('.segmented-strong .button-active, .segmented-strong .tab-link-active');\n    isTouchMoveActivable = app.theme === 'ios' && e.target.closest(touchMoveActivableIos);\n\n    if (isSegmentedStrong) {\n      segmentedStrongEl = isSegmentedStrong.closest('.segmented-strong');\n    }\n\n    if (params.activeState) {\n      activableElement = findActivableElement(targetElement);\n\n      if (activableElement && !isInsideScrollableView(activableElement)) {\n        addActive();\n      } else if (activableElement) {\n        activeTimeout = setTimeout(addActive, 80);\n      }\n    }\n\n    if (useRipple) {\n      rippleTouchStart(targetElement, touchStartX, touchStartY);\n    }\n\n    return true;\n  }\n\n  function handleTouchMove(e) {\n    let touch;\n    let distance;\n    let shouldRemoveActive = true;\n\n    if (e.type === 'touchmove') {\n      touch = e.targetTouches[0];\n      distance = params.touchClicksDistanceThreshold;\n    }\n\n    const touchCurrentX = e.targetTouches[0].pageX;\n    const touchCurrentY = e.targetTouches[0].pageY;\n\n    if (typeof isScrolling === 'undefined') {\n      isScrolling = !!(isScrolling || Math.abs(touchCurrentY - touchStartY) > Math.abs(touchCurrentX - touchStartX));\n    }\n\n    if (isTouchMoveActivable || !isScrolling && isSegmentedStrong && segmentedStrongEl) {\n      if (e.cancelable) e.preventDefault();\n    }\n\n    if (!isScrolling && isSegmentedStrong && segmentedStrongEl) {\n      const elementFromPoint = document.elementFromPoint(e.targetTouches[0].clientX, e.targetTouches[0].clientY);\n      const buttonEl = elementFromPoint.closest('.segmented-strong .button:not(.button-active):not(.tab-link-active)');\n\n      if (buttonEl && segmentedStrongEl.contains(buttonEl)) {\n        $(buttonEl).trigger('click', 'f7Segmented');\n        targetElement = buttonEl;\n      }\n    }\n\n    if (distance && touch) {\n      const pageX = touch.pageX;\n      const pageY = touch.pageY;\n\n      if (Math.abs(pageX - touchStartX) > distance || Math.abs(pageY - touchStartY) > distance) {\n        isMoved = true;\n      }\n    } else {\n      isMoved = true;\n    }\n\n    if (isMoved) {\n      preventClick = true; // Keep active state on touchMove (for dialog and actions buttons)\n\n      if (isTouchMoveActivable) {\n        const elementFromPoint = document.elementFromPoint(e.targetTouches[0].clientX, e.targetTouches[0].clientY);\n        touchmoveActivableEl = elementFromPoint.closest(touchMoveActivableIos);\n\n        if (touchmoveActivableEl && activableElement && activableElement[0] === touchmoveActivableEl) {\n          shouldRemoveActive = false;\n        } else if (touchmoveActivableEl) {\n          setTimeout(() => {\n            activableElement = findActivableElement(touchmoveActivableEl);\n            addActive();\n          });\n        }\n      }\n\n      if (params.tapHold) {\n        clearTimeout(tapHoldTimeout);\n      }\n\n      if (params.activeState && shouldRemoveActive) {\n        clearTimeout(activeTimeout);\n        removeActive();\n      }\n\n      if (useRipple) {\n        rippleTouchMove();\n      }\n    }\n  }\n\n  function handleTouchEnd(e) {\n    isScrolling = undefined;\n    isSegmentedStrong = false;\n    segmentedStrongEl = null;\n    isTouchMoveActivable = false;\n    clearTimeout(activeTimeout);\n    clearTimeout(tapHoldTimeout);\n\n    if (touchmoveActivableEl) {\n      $(touchmoveActivableEl).trigger('click', 'f7TouchMoveActivable');\n      touchmoveActivableEl = null;\n    }\n\n    if (document.activeElement === e.target) {\n      if (params.activeState) removeActive();\n\n      if (useRipple) {\n        rippleTouchEnd();\n      }\n\n      return true;\n    }\n\n    if (params.activeState) {\n      addActive();\n      setTimeout(removeActive, 0);\n    }\n\n    if (useRipple) {\n      rippleTouchEnd();\n    }\n\n    if (params.tapHoldPreventClicks && tapHoldFired || preventClick) {\n      if (e.cancelable) e.preventDefault();\n      preventClick = true;\n      return false;\n    }\n\n    return true;\n  }\n\n  function handleClick(e) {\n    const isOverswipe = e && e.detail && e.detail === 'f7Overswipe';\n    const isSegmented = e && e.detail && e.detail === 'f7Segmented'; // eslint-disable-next-line\n\n    const isTouchMoveActivable = e && e.detail && e.detail === 'f7TouchMoveActivable';\n    let localPreventClick = preventClick;\n\n    if (targetElement && e.target !== targetElement) {\n      if (isOverswipe || isSegmented || isTouchMoveActivable) {\n        localPreventClick = false;\n      } else {\n        localPreventClick = true;\n      }\n    } else if (isTouchMoveActivable) {\n      localPreventClick = false;\n    }\n\n    if (params.tapHold && params.tapHoldPreventClicks && tapHoldFired) {\n      localPreventClick = true;\n    }\n\n    if (localPreventClick) {\n      e.stopImmediatePropagation();\n      e.stopPropagation();\n      e.preventDefault();\n    }\n\n    if (params.tapHold) {\n      tapHoldTimeout = setTimeout(() => {\n        tapHoldFired = false;\n      }, device.ios || device.androidChrome ? 100 : 400);\n    }\n\n    preventClick = false;\n    targetElement = null;\n    return !localPreventClick;\n  }\n\n  function emitAppTouchEvent(name, e) {\n    app.emit({\n      events: name,\n      data: [e]\n    });\n  }\n\n  function appClick(e) {\n    emitAppTouchEvent('click', e);\n  }\n\n  function appTouchStartActive(e) {\n    emitAppTouchEvent('touchstart touchstart:active', e);\n  }\n\n  function appTouchMoveActive(e) {\n    emitAppTouchEvent('touchmove touchmove:active', e);\n  }\n\n  function appTouchEndActive(e) {\n    emitAppTouchEvent('touchend touchend:active', e);\n  }\n\n  function appTouchStartPassive(e) {\n    emitAppTouchEvent('touchstart:passive', e);\n  }\n\n  function appTouchMovePassive(e) {\n    emitAppTouchEvent('touchmove:passive', e);\n  }\n\n  function appTouchEndPassive(e) {\n    emitAppTouchEvent('touchend:passive', e);\n  }\n\n  const passiveListener = support.passiveListener ? {\n    passive: true\n  } : false;\n  const passiveListenerCapture = support.passiveListener ? {\n    passive: true,\n    capture: true\n  } : true;\n  const activeListener = support.passiveListener ? {\n    passive: false\n  } : false;\n  const activeListenerCapture = support.passiveListener ? {\n    passive: false,\n    capture: true\n  } : true;\n  document.addEventListener('click', appClick, true);\n\n  if (support.passiveListener) {\n    document.addEventListener(app.touchEvents.start, appTouchStartActive, activeListenerCapture);\n    document.addEventListener(app.touchEvents.move, appTouchMoveActive, activeListener);\n    document.addEventListener(app.touchEvents.end, appTouchEndActive, activeListener);\n    document.addEventListener(app.touchEvents.start, appTouchStartPassive, passiveListenerCapture);\n    document.addEventListener(app.touchEvents.move, appTouchMovePassive, passiveListener);\n    document.addEventListener(app.touchEvents.end, appTouchEndPassive, passiveListener);\n  } else {\n    document.addEventListener(app.touchEvents.start, e => {\n      appTouchStartActive(e);\n      appTouchStartPassive(e);\n    }, true);\n    document.addEventListener(app.touchEvents.move, e => {\n      appTouchMoveActive(e);\n      appTouchMovePassive(e);\n    }, false);\n    document.addEventListener(app.touchEvents.end, e => {\n      appTouchEndActive(e);\n      appTouchEndPassive(e);\n    }, false);\n  }\n\n  if (support.touch) {\n    app.on('click', handleClick);\n    app.on('touchstart', handleTouchStart);\n    app.on('touchmove', handleTouchMove);\n    app.on('touchend', handleTouchEnd);\n    document.addEventListener('touchcancel', handleTouchCancel, {\n      passive: true\n    });\n  } else if (params.activeState) {\n    app.on('touchstart', handleMouseDown);\n    app.on('touchmove', handleMouseMove);\n    app.on('touchend', handleMouseUp);\n    document.addEventListener('pointercancel', handleMouseUp, {\n      passive: true\n    });\n  }\n\n  document.addEventListener('contextmenu', e => {\n    if (params.disableContextMenu && (device.ios || device.android || device.cordova || window.Capacitor && window.Capacitor.isNative)) {\n      e.preventDefault();\n    }\n\n    if (useRipple) {\n      if (activableElement) removeActive();\n      rippleTouchEnd();\n    }\n  });\n}\n\nexport default {\n  name: 'touch',\n  params: {\n    touch: {\n      // Clicks\n      touchClicksDistanceThreshold: 5,\n      // ContextMenu\n      disableContextMenu: false,\n      // Tap Hold\n      tapHold: false,\n      tapHoldDelay: 750,\n      tapHoldPreventClicks: true,\n      // Active State\n      activeState: true,\n      activeStateElements: 'a, button, label, span, .actions-button, .stepper-button, .stepper-button-plus, .stepper-button-minus, .card-expandable, .menu-item, .link, .item-link, .accordion-item-toggle',\n      activeStateOnMouseMove: false,\n      mdTouchRipple: true,\n      iosTouchRipple: false,\n      auroraTouchRipple: false,\n      touchRippleElements: '.ripple, .link, .item-link, .list-button, .links-list a, .button, button, .input-clear-button, .dialog-button, .tab-link, .item-radio, .item-checkbox, .actions-button, .searchbar-disable-button, .fab a, .checkbox, .radio, .data-table .sortable-cell:not(.input-cell), .notification-close-button, .stepper-button, .stepper-button-minus, .stepper-button-plus, .menu-item-content, .list.accordion-list .accordion-item-toggle',\n      touchRippleInsetElements: '.ripple-inset, .icon-only, .searchbar-disable-button, .input-clear-button, .notification-close-button, .md .navbar .link.back'\n    }\n  },\n\n  create() {\n    const app = this;\n    const support = getSupport();\n    extend(app, {\n      touchEvents: {\n        start: support.touch ? 'touchstart' : support.pointerEvents ? 'pointerdown' : 'mousedown',\n        move: support.touch ? 'touchmove' : support.pointerEvents ? 'pointermove' : 'mousemove',\n        end: support.touch ? 'touchend' : support.pointerEvents ? 'pointerup' : 'mouseup'\n      }\n    });\n  },\n\n  on: {\n    init: initTouch\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}