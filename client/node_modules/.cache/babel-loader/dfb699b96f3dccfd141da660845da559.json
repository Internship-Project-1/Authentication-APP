{"ast":null,"code":"import { getWindow, getDocument } from 'ssr-window';\nimport $ from './dom7.js';\nimport { extend } from './utils.js';\nconst History = {\n  queue: [],\n\n  clearQueue() {\n    if (History.queue.length === 0) return;\n    const currentQueue = History.queue.shift();\n    currentQueue();\n  },\n\n  routerQueue: [],\n\n  clearRouterQueue() {\n    if (History.routerQueue.length === 0) return;\n    const currentQueue = History.routerQueue.pop();\n    const {\n      router,\n      stateUrl,\n      action\n    } = currentQueue;\n    let animate = router.params.animate;\n    if (router.params.browserHistoryAnimate === false) animate = false;\n\n    if (action === 'back') {\n      router.back({\n        animate,\n        browserHistory: false\n      });\n    }\n\n    if (action === 'load') {\n      router.navigate(stateUrl, {\n        animate,\n        browserHistory: false\n      });\n    }\n  },\n\n  handle(e) {\n    if (History.blockPopstate) return;\n    const app = this; // const mainView = app.views.main;\n\n    let state = e.state;\n    History.previousState = History.state;\n    History.state = state;\n    History.allowChange = true;\n    History.clearQueue();\n    state = History.state;\n    if (!state) state = {};\n    app.views.forEach(view => {\n      const router = view.router;\n      let viewState = state[view.id];\n\n      if (!viewState && view.params.browserHistory) {\n        viewState = {\n          url: view.router.history[0]\n        };\n      }\n\n      if (!viewState) return;\n      const stateUrl = viewState.url || undefined;\n      let animate = router.params.animate;\n      if (router.params.browserHistoryAnimate === false) animate = false;\n\n      if (stateUrl !== router.url) {\n        if (router.history.indexOf(stateUrl) >= 0) {\n          // Go Back\n          if (router.allowPageChange) {\n            router.back({\n              animate,\n              browserHistory: false\n            });\n          } else {\n            History.routerQueue.push({\n              action: 'back',\n              router\n            });\n          }\n        } else if (router.allowPageChange) {\n          // Load page\n          router.navigate(stateUrl, {\n            animate,\n            browserHistory: false\n          });\n        } else {\n          History.routerQueue.unshift({\n            action: 'load',\n            stateUrl,\n            router\n          });\n        }\n      }\n    });\n  },\n\n  initViewState(viewId, viewState) {\n    const window = getWindow();\n    const newState = extend({}, History.state || {}, {\n      [viewId]: viewState\n    });\n    History.state = newState;\n    window.history.replaceState(newState, '');\n  },\n\n  push(viewId, viewState, url) {\n    const window = getWindow();\n    const document = getDocument();\n    /* eslint-disable no-param-reassign */\n\n    if (url.substr(-3) === '#!/') {\n      url = url.replace('#!/', '');\n\n      if (url === '') {\n        url = document.location.href;\n\n        if (url.includes('#!/')) {\n          url = document.location.href.split('#!/')[0];\n        }\n      }\n    }\n    /* eslint-enable no-param-reassign */\n\n\n    if (!History.allowChange) {\n      History.queue.push(() => {\n        History.push(viewId, viewState, url);\n      });\n      return;\n    }\n\n    History.previousState = History.state;\n    const newState = extend({}, History.previousState || {}, {\n      [viewId]: viewState\n    });\n    History.state = newState;\n    window.history.pushState(newState, '', url);\n  },\n\n  replace(viewId, viewState, url) {\n    const window = getWindow();\n\n    if (url.substr(-3) === '#!/') {\n      // eslint-disable-next-line\n      url = url.replace('#!/', '');\n    }\n\n    if (!History.allowChange) {\n      History.queue.push(() => {\n        History.replace(viewId, viewState, url);\n      });\n      return;\n    }\n\n    History.previousState = History.state;\n    const newState = extend({}, History.previousState || {}, {\n      [viewId]: viewState\n    });\n    History.state = newState;\n    window.history.replaceState(newState, '', url);\n  },\n\n  go(index) {\n    const window = getWindow();\n    History.allowChange = false;\n    window.history.go(index);\n  },\n\n  back() {\n    const window = getWindow();\n    History.allowChange = false;\n    window.history.back();\n  },\n\n  allowChange: true,\n  previousState: {},\n  state: {},\n  blockPopstate: true,\n\n  init(app) {\n    const window = getWindow();\n    const document = getDocument();\n    History.state = window.history.state;\n    $(window).on('load', () => {\n      setTimeout(() => {\n        History.blockPopstate = false;\n      }, 0);\n    });\n\n    if (document.readyState && document.readyState === 'complete') {\n      History.blockPopstate = false;\n    }\n\n    $(window).on('popstate', History.handle.bind(app));\n  }\n\n};\nexport default History;","map":{"version":3,"names":["getWindow","getDocument","$","extend","History","queue","clearQueue","length","currentQueue","shift","routerQueue","clearRouterQueue","pop","router","stateUrl","action","animate","params","browserHistoryAnimate","back","browserHistory","navigate","handle","e","blockPopstate","app","state","previousState","allowChange","views","forEach","view","viewState","id","url","history","undefined","indexOf","allowPageChange","push","unshift","initViewState","viewId","window","newState","replaceState","document","substr","replace","location","href","includes","split","pushState","go","index","init","on","setTimeout","readyState","bind"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/shared/history.js"],"sourcesContent":["import { getWindow, getDocument } from 'ssr-window';\nimport $ from './dom7.js';\nimport { extend } from './utils.js';\nconst History = {\n  queue: [],\n\n  clearQueue() {\n    if (History.queue.length === 0) return;\n    const currentQueue = History.queue.shift();\n    currentQueue();\n  },\n\n  routerQueue: [],\n\n  clearRouterQueue() {\n    if (History.routerQueue.length === 0) return;\n    const currentQueue = History.routerQueue.pop();\n    const {\n      router,\n      stateUrl,\n      action\n    } = currentQueue;\n    let animate = router.params.animate;\n    if (router.params.browserHistoryAnimate === false) animate = false;\n\n    if (action === 'back') {\n      router.back({\n        animate,\n        browserHistory: false\n      });\n    }\n\n    if (action === 'load') {\n      router.navigate(stateUrl, {\n        animate,\n        browserHistory: false\n      });\n    }\n  },\n\n  handle(e) {\n    if (History.blockPopstate) return;\n    const app = this; // const mainView = app.views.main;\n\n    let state = e.state;\n    History.previousState = History.state;\n    History.state = state;\n    History.allowChange = true;\n    History.clearQueue();\n    state = History.state;\n    if (!state) state = {};\n    app.views.forEach(view => {\n      const router = view.router;\n      let viewState = state[view.id];\n\n      if (!viewState && view.params.browserHistory) {\n        viewState = {\n          url: view.router.history[0]\n        };\n      }\n\n      if (!viewState) return;\n      const stateUrl = viewState.url || undefined;\n      let animate = router.params.animate;\n      if (router.params.browserHistoryAnimate === false) animate = false;\n\n      if (stateUrl !== router.url) {\n        if (router.history.indexOf(stateUrl) >= 0) {\n          // Go Back\n          if (router.allowPageChange) {\n            router.back({\n              animate,\n              browserHistory: false\n            });\n          } else {\n            History.routerQueue.push({\n              action: 'back',\n              router\n            });\n          }\n        } else if (router.allowPageChange) {\n          // Load page\n          router.navigate(stateUrl, {\n            animate,\n            browserHistory: false\n          });\n        } else {\n          History.routerQueue.unshift({\n            action: 'load',\n            stateUrl,\n            router\n          });\n        }\n      }\n    });\n  },\n\n  initViewState(viewId, viewState) {\n    const window = getWindow();\n    const newState = extend({}, History.state || {}, {\n      [viewId]: viewState\n    });\n    History.state = newState;\n    window.history.replaceState(newState, '');\n  },\n\n  push(viewId, viewState, url) {\n    const window = getWindow();\n    const document = getDocument();\n    /* eslint-disable no-param-reassign */\n\n    if (url.substr(-3) === '#!/') {\n      url = url.replace('#!/', '');\n\n      if (url === '') {\n        url = document.location.href;\n\n        if (url.includes('#!/')) {\n          url = document.location.href.split('#!/')[0];\n        }\n      }\n    }\n    /* eslint-enable no-param-reassign */\n\n\n    if (!History.allowChange) {\n      History.queue.push(() => {\n        History.push(viewId, viewState, url);\n      });\n      return;\n    }\n\n    History.previousState = History.state;\n    const newState = extend({}, History.previousState || {}, {\n      [viewId]: viewState\n    });\n    History.state = newState;\n    window.history.pushState(newState, '', url);\n  },\n\n  replace(viewId, viewState, url) {\n    const window = getWindow();\n\n    if (url.substr(-3) === '#!/') {\n      // eslint-disable-next-line\n      url = url.replace('#!/', '');\n    }\n\n    if (!History.allowChange) {\n      History.queue.push(() => {\n        History.replace(viewId, viewState, url);\n      });\n      return;\n    }\n\n    History.previousState = History.state;\n    const newState = extend({}, History.previousState || {}, {\n      [viewId]: viewState\n    });\n    History.state = newState;\n    window.history.replaceState(newState, '', url);\n  },\n\n  go(index) {\n    const window = getWindow();\n    History.allowChange = false;\n    window.history.go(index);\n  },\n\n  back() {\n    const window = getWindow();\n    History.allowChange = false;\n    window.history.back();\n  },\n\n  allowChange: true,\n  previousState: {},\n  state: {},\n  blockPopstate: true,\n\n  init(app) {\n    const window = getWindow();\n    const document = getDocument();\n    History.state = window.history.state;\n    $(window).on('load', () => {\n      setTimeout(() => {\n        History.blockPopstate = false;\n      }, 0);\n    });\n\n    if (document.readyState && document.readyState === 'complete') {\n      History.blockPopstate = false;\n    }\n\n    $(window).on('popstate', History.handle.bind(app));\n  }\n\n};\nexport default History;"],"mappings":"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"},"metadata":{},"sourceType":"module"}