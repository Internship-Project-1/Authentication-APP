{"ast":null,"code":"/* eslint-disable no-underscore-dangle */\nimport { extend } from '../../shared/utils.js';\n\nfunction createStore(storeParams) {\n  if (storeParams === void 0) {\n    storeParams = {};\n  }\n\n  const store = {\n    __store: true\n  };\n  const originalState = { ...(storeParams.state || {})\n  };\n  const actions = { ...(storeParams.actions || {})\n  };\n  const getters = { ...(storeParams.getters || {})\n  };\n  const state = extend({}, originalState);\n  let propsQueue = [];\n  const gettersDependencies = {};\n  const gettersCallbacks = {};\n  Object.keys(getters).forEach(getterKey => {\n    gettersDependencies[getterKey] = [];\n    gettersCallbacks[getterKey] = [];\n  });\n\n  const getGetterValue = getterKey => {\n    return getters[getterKey]({\n      state: store.state\n    });\n  };\n\n  const addGetterDependencies = (getterKey, deps) => {\n    if (!gettersDependencies[getterKey]) gettersDependencies[getterKey] = [];\n    deps.forEach(dep => {\n      if (gettersDependencies[getterKey].indexOf(dep) < 0) {\n        gettersDependencies[getterKey].push(dep);\n      }\n    });\n  };\n\n  const addGetterCallback = (getterKey, callback) => {\n    if (!gettersCallbacks[getterKey]) gettersCallbacks[getterKey] = [];\n    gettersCallbacks[getterKey].push(callback);\n  };\n\n  const runGetterCallbacks = stateKey => {\n    const keys = Object.keys(gettersDependencies).filter(getterKey => {\n      return gettersDependencies[getterKey].indexOf(stateKey) >= 0;\n    });\n    keys.forEach(getterKey => {\n      if (!gettersCallbacks[getterKey] || !gettersCallbacks[getterKey].length) return;\n      gettersCallbacks[getterKey].forEach(callback => {\n        callback(getGetterValue(getterKey));\n      });\n    });\n  };\n\n  const removeGetterCallback = callback => {\n    Object.keys(gettersCallbacks).forEach(stateKey => {\n      const callbacks = gettersCallbacks[stateKey];\n\n      if (callbacks.indexOf(callback) >= 0) {\n        callbacks.splice(callbacks.indexOf(callback), 1);\n      }\n    });\n  }; // eslint-disable-next-line\n\n\n  store.__removeCallback = callback => {\n    removeGetterCallback(callback);\n  };\n\n  const getterValue = function (getterKey, addCallback) {\n    if (addCallback === void 0) {\n      addCallback = true;\n    }\n\n    if (getterKey === 'constructor') return undefined;\n    propsQueue = [];\n    const value = getGetterValue(getterKey);\n    addGetterDependencies(getterKey, propsQueue);\n\n    const onUpdated = callback => {\n      addGetterCallback(getterKey, callback);\n    };\n\n    const obj = {\n      value,\n      onUpdated\n    };\n\n    if (!addCallback) {\n      return obj;\n    }\n\n    const callback = v => {\n      obj.value = v;\n    };\n\n    obj.__callback = callback;\n    addGetterCallback(getterKey, callback); // eslint-disable-next-line\n\n    return obj;\n  };\n\n  store.state = new Proxy(state, {\n    set: (target, prop, value) => {\n      target[prop] = value;\n      runGetterCallbacks(prop);\n      return true;\n    },\n    get: (target, prop) => {\n      propsQueue.push(prop);\n      return target[prop];\n    }\n  });\n  store.getters = new Proxy(getters, {\n    set: () => false,\n    get: (target, prop) => {\n      if (!target[prop]) {\n        return undefined;\n      }\n\n      return getterValue(prop, true);\n    }\n  });\n  store._gettersPlain = new Proxy(getters, {\n    set: () => false,\n    get: (target, prop) => {\n      if (!target[prop]) {\n        return undefined;\n      }\n\n      return getterValue(prop, false);\n    }\n  });\n\n  store.dispatch = (actionName, data) => {\n    return new Promise((resolve, reject) => {\n      if (!actions[actionName]) {\n        reject();\n        throw new Error(`Framework7: Store action \"${actionName}\" is not found`);\n      }\n\n      const result = actions[actionName]({\n        state: store.state,\n        dispatch: store.dispatch\n      }, data);\n      resolve(result);\n    });\n  };\n\n  return store;\n}\n\nexport default createStore;","map":{"version":3,"names":["extend","createStore","storeParams","store","__store","originalState","state","actions","getters","propsQueue","gettersDependencies","gettersCallbacks","Object","keys","forEach","getterKey","getGetterValue","addGetterDependencies","deps","dep","indexOf","push","addGetterCallback","callback","runGetterCallbacks","stateKey","filter","length","removeGetterCallback","callbacks","splice","__removeCallback","getterValue","addCallback","undefined","value","onUpdated","obj","v","__callback","Proxy","set","target","prop","get","_gettersPlain","dispatch","actionName","data","Promise","resolve","reject","Error","result"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/modules/store/create-store.js"],"sourcesContent":["/* eslint-disable no-underscore-dangle */\nimport { extend } from '../../shared/utils.js';\n\nfunction createStore(storeParams) {\n  if (storeParams === void 0) {\n    storeParams = {};\n  }\n\n  const store = {\n    __store: true\n  };\n  const originalState = { ...(storeParams.state || {})\n  };\n  const actions = { ...(storeParams.actions || {})\n  };\n  const getters = { ...(storeParams.getters || {})\n  };\n  const state = extend({}, originalState);\n  let propsQueue = [];\n  const gettersDependencies = {};\n  const gettersCallbacks = {};\n  Object.keys(getters).forEach(getterKey => {\n    gettersDependencies[getterKey] = [];\n    gettersCallbacks[getterKey] = [];\n  });\n\n  const getGetterValue = getterKey => {\n    return getters[getterKey]({\n      state: store.state\n    });\n  };\n\n  const addGetterDependencies = (getterKey, deps) => {\n    if (!gettersDependencies[getterKey]) gettersDependencies[getterKey] = [];\n    deps.forEach(dep => {\n      if (gettersDependencies[getterKey].indexOf(dep) < 0) {\n        gettersDependencies[getterKey].push(dep);\n      }\n    });\n  };\n\n  const addGetterCallback = (getterKey, callback) => {\n    if (!gettersCallbacks[getterKey]) gettersCallbacks[getterKey] = [];\n    gettersCallbacks[getterKey].push(callback);\n  };\n\n  const runGetterCallbacks = stateKey => {\n    const keys = Object.keys(gettersDependencies).filter(getterKey => {\n      return gettersDependencies[getterKey].indexOf(stateKey) >= 0;\n    });\n    keys.forEach(getterKey => {\n      if (!gettersCallbacks[getterKey] || !gettersCallbacks[getterKey].length) return;\n      gettersCallbacks[getterKey].forEach(callback => {\n        callback(getGetterValue(getterKey));\n      });\n    });\n  };\n\n  const removeGetterCallback = callback => {\n    Object.keys(gettersCallbacks).forEach(stateKey => {\n      const callbacks = gettersCallbacks[stateKey];\n\n      if (callbacks.indexOf(callback) >= 0) {\n        callbacks.splice(callbacks.indexOf(callback), 1);\n      }\n    });\n  }; // eslint-disable-next-line\n\n\n  store.__removeCallback = callback => {\n    removeGetterCallback(callback);\n  };\n\n  const getterValue = function (getterKey, addCallback) {\n    if (addCallback === void 0) {\n      addCallback = true;\n    }\n\n    if (getterKey === 'constructor') return undefined;\n    propsQueue = [];\n    const value = getGetterValue(getterKey);\n    addGetterDependencies(getterKey, propsQueue);\n\n    const onUpdated = callback => {\n      addGetterCallback(getterKey, callback);\n    };\n\n    const obj = {\n      value,\n      onUpdated\n    };\n\n    if (!addCallback) {\n      return obj;\n    }\n\n    const callback = v => {\n      obj.value = v;\n    };\n\n    obj.__callback = callback;\n    addGetterCallback(getterKey, callback); // eslint-disable-next-line\n\n    return obj;\n  };\n\n  store.state = new Proxy(state, {\n    set: (target, prop, value) => {\n      target[prop] = value;\n      runGetterCallbacks(prop);\n      return true;\n    },\n    get: (target, prop) => {\n      propsQueue.push(prop);\n      return target[prop];\n    }\n  });\n  store.getters = new Proxy(getters, {\n    set: () => false,\n    get: (target, prop) => {\n      if (!target[prop]) {\n        return undefined;\n      }\n\n      return getterValue(prop, true);\n    }\n  });\n  store._gettersPlain = new Proxy(getters, {\n    set: () => false,\n    get: (target, prop) => {\n      if (!target[prop]) {\n        return undefined;\n      }\n\n      return getterValue(prop, false);\n    }\n  });\n\n  store.dispatch = (actionName, data) => {\n    return new Promise((resolve, reject) => {\n      if (!actions[actionName]) {\n        reject();\n        throw new Error(`Framework7: Store action \"${actionName}\" is not found`);\n      }\n\n      const result = actions[actionName]({\n        state: store.state,\n        dispatch: store.dispatch\n      }, data);\n      resolve(result);\n    });\n  };\n\n  return store;\n}\n\nexport default createStore;"],"mappings":"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"},"metadata":{},"sourceType":"module"}