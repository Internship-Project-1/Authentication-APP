{"ast":null,"code":"import $ from '../../../shared/dom7.js';\nimport { colorHsbToHsl } from '../../../shared/utils.js';\nimport { getSupport } from '../../../shared/get-support.js';\n/** @jsx $jsx */\n\nimport $jsx from '../../../shared/$jsx.js';\nexport default {\n  render() {\n    return $jsx(\"div\", {\n      class: \"color-picker-module color-picker-module-hs-spectrum\"\n    }, $jsx(\"div\", {\n      class: \"color-picker-hs-spectrum\"\n    }, $jsx(\"div\", {\n      class: \"color-picker-hs-spectrum-handle\"\n    })));\n  },\n\n  init(self) {\n    const {\n      app\n    } = self;\n    let isTouched;\n    let isMoved;\n    let touchStartX;\n    let touchStartY;\n    let touchCurrentX;\n    let touchCurrentY;\n    let specterRect;\n    let specterIsTouched;\n    let specterHandleIsTouched;\n    const {\n      $el\n    } = self;\n\n    function setHSFromSpecterCoords(x, y) {\n      let h = (x - specterRect.left) / specterRect.width * 360;\n      let s = (y - specterRect.top) / specterRect.height;\n      h = Math.max(0, Math.min(360, h));\n      s = 1 - Math.max(0, Math.min(1, s));\n      self.setValue({\n        hsb: [h, s, self.value.hsb[2]]\n      });\n    }\n\n    function handleTouchStart(e) {\n      if (isMoved || isTouched) return;\n      touchStartX = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n      touchCurrentX = touchStartX;\n      touchStartY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n      touchCurrentY = touchStartY;\n      const $targetEl = $(e.target);\n      specterHandleIsTouched = $targetEl.closest('.color-picker-hs-spectrum-handle').length > 0;\n\n      if (!specterHandleIsTouched) {\n        specterIsTouched = $targetEl.closest('.color-picker-hs-spectrum').length > 0;\n      }\n\n      if (specterIsTouched) {\n        specterRect = $el.find('.color-picker-hs-spectrum')[0].getBoundingClientRect();\n        setHSFromSpecterCoords(touchStartX, touchStartY);\n      }\n\n      if (specterHandleIsTouched || specterIsTouched) {\n        $el.find('.color-picker-hs-spectrum-handle').addClass('color-picker-hs-spectrum-handle-pressed');\n      }\n    }\n\n    function handleTouchMove(e) {\n      if (!(specterIsTouched || specterHandleIsTouched)) return;\n      touchCurrentX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n      touchCurrentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n      e.preventDefault();\n\n      if (!isMoved) {\n        // First move\n        isMoved = true;\n\n        if (specterHandleIsTouched) {\n          specterRect = $el.find('.color-picker-hs-spectrum')[0].getBoundingClientRect();\n        }\n      }\n\n      if (specterIsTouched || specterHandleIsTouched) {\n        setHSFromSpecterCoords(touchCurrentX, touchCurrentY);\n      }\n    }\n\n    function handleTouchEnd() {\n      isMoved = false;\n\n      if (specterIsTouched || specterHandleIsTouched) {\n        $el.find('.color-picker-hs-spectrum-handle').removeClass('color-picker-hs-spectrum-handle-pressed');\n      }\n\n      specterIsTouched = false;\n      specterHandleIsTouched = false;\n    }\n\n    function handleResize() {\n      self.modules['hs-spectrum'].update(self);\n    }\n\n    const passiveListener = app.touchEvents.start === 'touchstart' && getSupport().passiveListener ? {\n      passive: true,\n      capture: false\n    } : false;\n    self.$el.on(app.touchEvents.start, handleTouchStart, passiveListener);\n    app.on('touchmove:active', handleTouchMove);\n    app.on('touchend:passive', handleTouchEnd);\n    app.on('resize', handleResize);\n\n    self.destroySpectrumEvents = function destroySpectrumEvents() {\n      self.$el.off(app.touchEvents.start, handleTouchStart, passiveListener);\n      app.off('touchmove:active', handleTouchMove);\n      app.off('touchend:passive', handleTouchEnd);\n      app.off('resize', handleResize);\n    };\n  },\n\n  update(self) {\n    const {\n      value\n    } = self;\n    const {\n      hsb\n    } = value;\n    const specterWidth = self.$el.find('.color-picker-hs-spectrum')[0].offsetWidth;\n    const specterHeight = self.$el.find('.color-picker-hs-spectrum')[0].offsetHeight;\n    const hslBright = colorHsbToHsl(hsb[0], hsb[1], 1);\n    self.$el.find('.color-picker-hs-spectrum-handle').css('background-color', `hsl(${hslBright[0]}, ${hslBright[1] * 100}%, ${hslBright[2] * 100}%)`).transform(`translate(${specterWidth * (hsb[0] / 360)}px, ${specterHeight * (1 - hsb[1])}px)`);\n  },\n\n  destroy(self) {\n    if (self.destroySpectrumEvents) self.destroySpectrumEvents();\n    delete self.destroySpectrumEvents;\n  }\n\n};","map":{"version":3,"names":["$","colorHsbToHsl","getSupport","$jsx","render","class","init","self","app","isTouched","isMoved","touchStartX","touchStartY","touchCurrentX","touchCurrentY","specterRect","specterIsTouched","specterHandleIsTouched","$el","setHSFromSpecterCoords","x","y","h","left","width","s","top","height","Math","max","min","setValue","hsb","value","handleTouchStart","e","type","targetTouches","pageX","pageY","$targetEl","target","closest","length","find","getBoundingClientRect","addClass","handleTouchMove","preventDefault","handleTouchEnd","removeClass","handleResize","modules","update","passiveListener","touchEvents","start","passive","capture","on","destroySpectrumEvents","off","specterWidth","offsetWidth","specterHeight","offsetHeight","hslBright","css","transform","destroy"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/components/color-picker/modules/hs-spectrum.js"],"sourcesContent":["import $ from '../../../shared/dom7.js';\nimport { colorHsbToHsl } from '../../../shared/utils.js';\nimport { getSupport } from '../../../shared/get-support.js';\n/** @jsx $jsx */\n\nimport $jsx from '../../../shared/$jsx.js';\nexport default {\n  render() {\n    return $jsx(\"div\", {\n      class: \"color-picker-module color-picker-module-hs-spectrum\"\n    }, $jsx(\"div\", {\n      class: \"color-picker-hs-spectrum\"\n    }, $jsx(\"div\", {\n      class: \"color-picker-hs-spectrum-handle\"\n    })));\n  },\n\n  init(self) {\n    const {\n      app\n    } = self;\n    let isTouched;\n    let isMoved;\n    let touchStartX;\n    let touchStartY;\n    let touchCurrentX;\n    let touchCurrentY;\n    let specterRect;\n    let specterIsTouched;\n    let specterHandleIsTouched;\n    const {\n      $el\n    } = self;\n\n    function setHSFromSpecterCoords(x, y) {\n      let h = (x - specterRect.left) / specterRect.width * 360;\n      let s = (y - specterRect.top) / specterRect.height;\n      h = Math.max(0, Math.min(360, h));\n      s = 1 - Math.max(0, Math.min(1, s));\n      self.setValue({\n        hsb: [h, s, self.value.hsb[2]]\n      });\n    }\n\n    function handleTouchStart(e) {\n      if (isMoved || isTouched) return;\n      touchStartX = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n      touchCurrentX = touchStartX;\n      touchStartY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n      touchCurrentY = touchStartY;\n      const $targetEl = $(e.target);\n      specterHandleIsTouched = $targetEl.closest('.color-picker-hs-spectrum-handle').length > 0;\n\n      if (!specterHandleIsTouched) {\n        specterIsTouched = $targetEl.closest('.color-picker-hs-spectrum').length > 0;\n      }\n\n      if (specterIsTouched) {\n        specterRect = $el.find('.color-picker-hs-spectrum')[0].getBoundingClientRect();\n        setHSFromSpecterCoords(touchStartX, touchStartY);\n      }\n\n      if (specterHandleIsTouched || specterIsTouched) {\n        $el.find('.color-picker-hs-spectrum-handle').addClass('color-picker-hs-spectrum-handle-pressed');\n      }\n    }\n\n    function handleTouchMove(e) {\n      if (!(specterIsTouched || specterHandleIsTouched)) return;\n      touchCurrentX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n      touchCurrentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n      e.preventDefault();\n\n      if (!isMoved) {\n        // First move\n        isMoved = true;\n\n        if (specterHandleIsTouched) {\n          specterRect = $el.find('.color-picker-hs-spectrum')[0].getBoundingClientRect();\n        }\n      }\n\n      if (specterIsTouched || specterHandleIsTouched) {\n        setHSFromSpecterCoords(touchCurrentX, touchCurrentY);\n      }\n    }\n\n    function handleTouchEnd() {\n      isMoved = false;\n\n      if (specterIsTouched || specterHandleIsTouched) {\n        $el.find('.color-picker-hs-spectrum-handle').removeClass('color-picker-hs-spectrum-handle-pressed');\n      }\n\n      specterIsTouched = false;\n      specterHandleIsTouched = false;\n    }\n\n    function handleResize() {\n      self.modules['hs-spectrum'].update(self);\n    }\n\n    const passiveListener = app.touchEvents.start === 'touchstart' && getSupport().passiveListener ? {\n      passive: true,\n      capture: false\n    } : false;\n    self.$el.on(app.touchEvents.start, handleTouchStart, passiveListener);\n    app.on('touchmove:active', handleTouchMove);\n    app.on('touchend:passive', handleTouchEnd);\n    app.on('resize', handleResize);\n\n    self.destroySpectrumEvents = function destroySpectrumEvents() {\n      self.$el.off(app.touchEvents.start, handleTouchStart, passiveListener);\n      app.off('touchmove:active', handleTouchMove);\n      app.off('touchend:passive', handleTouchEnd);\n      app.off('resize', handleResize);\n    };\n  },\n\n  update(self) {\n    const {\n      value\n    } = self;\n    const {\n      hsb\n    } = value;\n    const specterWidth = self.$el.find('.color-picker-hs-spectrum')[0].offsetWidth;\n    const specterHeight = self.$el.find('.color-picker-hs-spectrum')[0].offsetHeight;\n    const hslBright = colorHsbToHsl(hsb[0], hsb[1], 1);\n    self.$el.find('.color-picker-hs-spectrum-handle').css('background-color', `hsl(${hslBright[0]}, ${hslBright[1] * 100}%, ${hslBright[2] * 100}%)`).transform(`translate(${specterWidth * (hsb[0] / 360)}px, ${specterHeight * (1 - hsb[1])}px)`);\n  },\n\n  destroy(self) {\n    if (self.destroySpectrumEvents) self.destroySpectrumEvents();\n    delete self.destroySpectrumEvents;\n  }\n\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}