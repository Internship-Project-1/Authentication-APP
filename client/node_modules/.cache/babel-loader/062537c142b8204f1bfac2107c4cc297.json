{"ast":null,"code":"/* eslint no-param-reassign: \"off\" */\nimport { getDocument } from 'ssr-window';\nimport { bindMethods } from '../../shared/utils.js';\nimport { getSupport } from '../../shared/get-support.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport $ from '../../shared/dom7.js';\nconst CardExpandable = {\n  open(cardEl, animate) {\n    if (cardEl === void 0) {\n      cardEl = '.card-expandable';\n    }\n\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    const app = this;\n    const device = getDevice();\n    const document = getDocument();\n    const support = getSupport();\n    const $cardEl = $(cardEl).eq(0);\n    if (!$cardEl || !$cardEl.length) return;\n    if ($cardEl.hasClass('card-opened') || $cardEl.hasClass('card-opening') || $cardEl.hasClass('card-closing')) return;\n    const $pageEl = $cardEl.parents('.page').eq(0);\n    if (!$pageEl.length) return;\n\n    if ($pageEl.find('.card-opened').length) {\n      return;\n    }\n\n    let prevented;\n\n    function prevent() {\n      prevented = true;\n    }\n\n    $cardEl.trigger('card:beforeopen', {\n      prevent\n    });\n    app.emit('cardBeforeOpen', $cardEl[0], prevent);\n    if (prevented) return;\n    const cardParams = Object.assign({\n      animate\n    }, app.params.card, $cardEl.dataset());\n    const $pageContentEl = $cardEl.parents('.page-content');\n    let $backdropEl;\n\n    if ($cardEl.attr('data-backdrop-el')) {\n      $backdropEl = $($cardEl.attr('data-backdrop-el'));\n    }\n\n    if (!$backdropEl && cardParams.backdrop) {\n      $backdropEl = $pageContentEl.find('.card-backdrop');\n\n      if (!$backdropEl.length) {\n        $backdropEl = $('<div class=\"card-backdrop\"></div>');\n        $pageContentEl.append($backdropEl);\n      }\n    }\n\n    let $navbarEl;\n    let $toolbarEl;\n\n    if (cardParams.hideNavbarOnOpen) {\n      $navbarEl = $pageEl.children('.navbar');\n\n      if (!$navbarEl.length) {\n        if ($pageEl[0].f7Page) $navbarEl = $pageEl[0].f7Page.$navbarEl;\n      }\n    }\n\n    if (cardParams.hideToolbarOnOpen) {\n      $toolbarEl = $pageEl.children('.toolbar');\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.view').children('.toolbar');\n      }\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.views').children('.toolbar');\n      }\n    }\n\n    const currTransform = $cardEl.css('transform');\n    let hasTransform;\n\n    if (currTransform && currTransform.match(/[2-9]/)) {\n      hasTransform = true;\n    }\n\n    const $cardContentEl = $cardEl.children('.card-content');\n    const $cardSizeEl = $(document.createElement('div')).addClass('card-expandable-size');\n    $cardEl.append($cardSizeEl);\n    let cardWidth = $cardEl[0].offsetWidth;\n    let cardHeight = $cardEl[0].offsetHeight;\n    let pageWidth = $pageEl[0].offsetWidth;\n    let pageHeight = $pageEl[0].offsetHeight;\n    let maxWidth = $cardSizeEl[0].offsetWidth || pageWidth;\n    let maxHeight = $cardSizeEl[0].offsetHeight || pageHeight;\n    let statusbarHeight;\n\n    if ($navbarEl && !cardParams.hideStatusbarOnOpen && maxHeight === pageHeight) {\n      statusbarHeight = parseInt($navbarEl.css('--f7-safe-area-top'), 10);\n      if (Number.isNaN(statusbarHeight)) statusbarHeight = 0;\n    }\n\n    if (statusbarHeight) {\n      maxHeight -= statusbarHeight;\n    }\n\n    let scaleX = maxWidth / cardWidth;\n    let scaleY = maxHeight / cardHeight;\n    let offset = $cardEl.offset();\n    let pageOffset = $pageEl.offset();\n\n    if (statusbarHeight) {\n      pageOffset.top += statusbarHeight / 2;\n    }\n\n    offset.left -= pageOffset.left;\n    let cardLeftOffset;\n    let cardTopOffset;\n\n    if (hasTransform) {\n      const transformValues = currTransform.replace(/matrix\\(|\\)/g, '').split(',').map(el => el.trim());\n\n      if (transformValues && transformValues.length > 1) {\n        const scale = parseFloat(transformValues[0]);\n        cardLeftOffset = offset.left - cardWidth * (1 - scale) / 2;\n        cardTopOffset = offset.top - pageOffset.top - cardHeight * (1 - scale) / 2;\n        if (app.rtl) cardLeftOffset -= $cardEl[0].scrollLeft;\n      } else {\n        cardLeftOffset = $cardEl[0].offsetLeft;\n        cardTopOffset = $cardEl[0].offsetTop - ($pageContentEl.length ? $pageContentEl[0].scrollTop : 0);\n      }\n    } else {\n      cardLeftOffset = offset.left;\n      cardTopOffset = offset.top - pageOffset.top;\n      if (app.rtl) cardLeftOffset -= $cardEl[0].scrollLeft;\n    }\n\n    cardLeftOffset -= (pageWidth - maxWidth) / 2;\n    cardTopOffset -= (pageHeight - maxHeight) / 2;\n    let cardRightOffset = maxWidth - cardWidth - cardLeftOffset;\n\n    if (app.rtl) {\n      [cardLeftOffset, cardRightOffset] = [cardRightOffset, cardLeftOffset];\n    }\n\n    let cardBottomOffset = maxHeight - cardHeight - cardTopOffset;\n    let translateX = (cardRightOffset - cardLeftOffset) / 2;\n    let translateY = (cardBottomOffset - cardTopOffset) / 2;\n\n    if (cardParams.hideNavbarOnOpen && $navbarEl && $navbarEl.length) {\n      if ($navbarEl.closest('.navbar-hidden').length) {\n        // Was hidden\n        $cardEl[0].f7KeepNavbarOnClose = true;\n      } else {\n        delete $cardEl[0].f7KeepNavbarOnClose;\n        app.navbar.hide($navbarEl, cardParams.animate, cardParams.hideStatusbarOnOpen, true);\n      }\n    }\n\n    if (cardParams.hideToolbarOnOpen && $toolbarEl && $toolbarEl.length) {\n      if ($toolbarEl.closest('.toolbar-hidden').length) {\n        // Was hidden\n        $cardEl[0].f7KeepToolbarOnClose = true;\n      } else {\n        delete $cardEl[0].f7KeepToolbarOnClose;\n        app.toolbar.hide($toolbarEl, cardParams.animate);\n      }\n    }\n\n    if ($backdropEl) {\n      $backdropEl.removeClass('card-backdrop-out').addClass('card-backdrop-in');\n    }\n\n    $cardEl.removeClass('card-transitioning');\n\n    if (cardParams.animate) {\n      $cardEl.addClass('card-opening');\n    }\n\n    $cardEl.trigger('card:open');\n    app.emit('cardOpen', $cardEl[0]);\n\n    function transitionEnd() {\n      $pageEl.addClass('page-with-card-opened');\n\n      if (device.ios && $pageContentEl.length) {\n        $pageContentEl.css('height', `${$pageContentEl[0].offsetHeight + 1}px`);\n        setTimeout(() => {\n          $pageContentEl.css('height', '');\n        });\n      }\n\n      $cardEl.addClass('card-opened');\n      $cardEl.removeClass('card-opening');\n      $cardEl.trigger('card:opened');\n      app.emit('cardOpened', $cardEl[0], $pageEl[0]);\n    }\n\n    $cardContentEl.css({\n      width: `${maxWidth}px`,\n      height: `${maxHeight}px`\n    }).transform(`translate3d(${app.rtl ? cardLeftOffset + translateX : -cardLeftOffset - translateX}px, 0px, 0) scale(${1 / scaleX}, ${1 / scaleY})`);\n    $cardEl.transform(`translate3d(${app.rtl ? -translateX : translateX}px, ${translateY}px, 0) scale(${scaleX}, ${scaleY})`);\n\n    if (cardParams.animate) {\n      $cardEl.transitionEnd(() => {\n        transitionEnd();\n      });\n    } else {\n      transitionEnd();\n    }\n\n    function onResize() {\n      $cardEl.removeClass('card-transitioning');\n      cardWidth = $cardEl[0].offsetWidth;\n      cardHeight = $cardEl[0].offsetHeight;\n      pageWidth = $pageEl[0].offsetWidth;\n      pageHeight = $pageEl[0].offsetHeight;\n      maxWidth = $cardSizeEl[0].offsetWidth || pageWidth;\n      maxHeight = $cardSizeEl[0].offsetHeight || pageHeight;\n      statusbarHeight = 0;\n\n      if ($navbarEl && !cardParams.hideStatusbarOnOpen && maxHeight === pageHeight) {\n        statusbarHeight = parseInt($navbarEl.css('--f7-safe-area-top'), 10);\n        if (Number.isNaN(statusbarHeight)) statusbarHeight = 0;\n      }\n\n      if (statusbarHeight) {\n        maxHeight -= statusbarHeight;\n      }\n\n      scaleX = maxWidth / cardWidth;\n      scaleY = maxHeight / cardHeight;\n      $cardEl.transform('translate3d(0px, 0px, 0) scale(1)');\n      offset = $cardEl.offset();\n      pageOffset = $pageEl.offset();\n\n      if (statusbarHeight) {\n        pageOffset.top += statusbarHeight / 2;\n      }\n\n      offset.left -= pageOffset.left;\n      offset.top -= pageOffset.top;\n      cardLeftOffset = offset.left - (pageWidth - maxWidth) / 2;\n      if (app.rtl) cardLeftOffset -= $cardEl[0].scrollLeft;\n      cardTopOffset = offset.top - (pageHeight - maxHeight) / 2;\n      cardRightOffset = maxWidth - cardWidth - cardLeftOffset;\n      cardBottomOffset = maxHeight - cardHeight - cardTopOffset;\n\n      if (app.rtl) {\n        [cardLeftOffset, cardRightOffset] = [cardRightOffset, cardLeftOffset];\n      }\n\n      translateX = (cardRightOffset - cardLeftOffset) / 2;\n      translateY = (cardBottomOffset - cardTopOffset) / 2;\n      $cardEl.transform(`translate3d(${app.rtl ? -translateX : translateX}px, ${translateY}px, 0) scale(${scaleX}, ${scaleY})`);\n      $cardContentEl.css({\n        width: `${maxWidth}px`,\n        height: `${maxHeight}px`\n      }).transform(`translate3d(${app.rtl ? cardLeftOffset + translateX : -cardLeftOffset - translateX}px, 0px, 0) scale(${1 / scaleX}, ${1 / scaleY})`);\n    }\n\n    let cardScrollTop;\n    let isTouched;\n    let isMoved;\n    let touchStartX;\n    let touchStartY;\n    let touchEndX;\n    let touchEndY;\n    let isScrolling;\n    let progress;\n    let isV;\n    let isH;\n    let $cardScrollableEl;\n\n    function onTouchStart(e) {\n      if (!$(e.target).closest($cardEl).length) return;\n      if (!$cardEl.hasClass('card-opened')) return;\n      $cardScrollableEl = $cardEl.find(cardParams.scrollableEl);\n\n      if ($cardScrollableEl[0] && $cardScrollableEl[0] !== $cardContentEl[0] && !$cardScrollableEl[0].contains(e.target)) {\n        cardScrollTop = 0;\n      } else {\n        cardScrollTop = $cardScrollableEl.scrollTop();\n      }\n\n      isTouched = true;\n      touchStartX = e.targetTouches[0].pageX;\n      touchStartY = e.targetTouches[0].pageY;\n      isScrolling = undefined;\n      isV = false;\n      isH = false;\n    }\n\n    function onTouchMove(e) {\n      if (!isTouched) return;\n      touchEndX = e.targetTouches[0].pageX;\n      touchEndY = e.targetTouches[0].pageY;\n\n      if (typeof isScrolling === 'undefined') {\n        isScrolling = !!(isScrolling || Math.abs(touchEndY - touchStartY) > Math.abs(touchEndX - touchStartX));\n      }\n\n      if (!isH && !isV) {\n        if (!isScrolling && e.targetTouches[0].clientX <= 50) {\n          isH = true;\n        } else {\n          isV = true;\n        }\n      }\n\n      if (!(isH || isV) || isV && cardScrollTop !== 0) {\n        isTouched = true;\n        isMoved = true;\n        return;\n      }\n\n      if (!isMoved) {\n        $cardEl.removeClass('card-transitioning');\n      }\n\n      isMoved = true;\n      progress = isV ? Math.max((touchEndY - touchStartY) / 150, 0) : Math.max((touchEndX - touchStartX) / (cardWidth / 2), 0);\n\n      if (progress > 0 && isV || isH) {\n        if (isV && device.ios && $cardScrollableEl[0] === $cardContentEl[0]) {\n          $cardScrollableEl.css('-webkit-overflow-scrolling', 'auto');\n          $cardScrollableEl.scrollTop(0);\n        }\n\n        e.preventDefault();\n      }\n\n      if (progress > 1) progress **= 0.3;\n\n      if (progress > (isV ? 1.3 : 1.1)) {\n        isTouched = false;\n        isMoved = false;\n        app.card.close($cardEl);\n      } else {\n        $cardEl.transform(`translate3d(${app.rtl ? -translateX : translateX}px, ${translateY}px, 0) scale(${scaleX * (1 - progress * 0.2)}, ${scaleY * (1 - progress * 0.2)})`);\n      }\n    }\n\n    function onTouchEnd() {\n      if (!isTouched || !isMoved) return;\n      isTouched = false;\n      isMoved = false;\n\n      if (device.ios) {\n        $cardScrollableEl.css('-webkit-overflow-scrolling', '');\n      }\n\n      if (progress >= 0.8) {\n        app.card.close($cardEl);\n      } else {\n        $cardEl.addClass('card-transitioning').transform(`translate3d(${app.rtl ? -translateX : translateX}px, ${translateY}px, 0) scale(${scaleX}, ${scaleY})`);\n      }\n    }\n\n    $cardEl[0].detachEventHandlers = function detachEventHandlers() {\n      app.off('resize', onResize);\n\n      if (support.touch && cardParams.swipeToClose) {\n        app.off('touchstart:passive', onTouchStart);\n        app.off('touchmove:active', onTouchMove);\n        app.off('touchend:passive', onTouchEnd);\n      }\n    };\n\n    app.on('resize', onResize);\n\n    if (support.touch && cardParams.swipeToClose) {\n      app.on('touchstart:passive', onTouchStart);\n      app.on('touchmove:active', onTouchMove);\n      app.on('touchend:passive', onTouchEnd);\n    }\n  },\n\n  close(cardEl, animate) {\n    if (cardEl === void 0) {\n      cardEl = '.card-expandable.card-opened';\n    }\n\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    const app = this;\n    const device = getDevice();\n    const $cardEl = $(cardEl).eq(0);\n    if (!$cardEl || !$cardEl.length) return;\n    if (!$cardEl.hasClass('card-opened') || $cardEl.hasClass('card-opening') || $cardEl.hasClass('card-closing')) return;\n    const $cardContentEl = $cardEl.children('.card-content');\n    const $pageContentEl = $cardEl.parents('.page-content');\n    const $pageEl = $cardEl.parents('.page').eq(0);\n    if (!$pageEl.length) return;\n    const cardParams = Object.assign({\n      animate\n    }, app.params.card, $cardEl.dataset());\n    const $cardScrollableEl = $cardEl.find(cardParams.scrollableEl);\n    let $navbarEl;\n    let $toolbarEl;\n    let $backdropEl;\n\n    if ($cardEl.attr('data-backdrop-el')) {\n      $backdropEl = $($cardEl.attr('data-backdrop-el'));\n    }\n\n    if (cardParams.backdrop) {\n      $backdropEl = $cardEl.parents('.page-content').find('.card-backdrop');\n    }\n\n    if (cardParams.hideNavbarOnOpen) {\n      $navbarEl = $pageEl.children('.navbar');\n\n      if (!$navbarEl.length) {\n        if ($pageEl[0].f7Page) $navbarEl = $pageEl[0].f7Page.$navbarEl;\n      }\n\n      if ($navbarEl && $navbarEl.length && !$cardEl[0].f7KeepNavbarOnClose) {\n        app.navbar.show($navbarEl, cardParams.animate, true);\n      }\n    }\n\n    if (cardParams.hideToolbarOnOpen) {\n      $toolbarEl = $pageEl.children('.toolbar');\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.view').children('.toolbar');\n      }\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.views').children('.toolbar');\n      }\n\n      if ($toolbarEl && $toolbarEl.length && !$cardEl[0].f7KeepToolbarOnClose) {\n        app.toolbar.show($toolbarEl, cardParams.animate);\n      }\n    }\n\n    $pageEl.removeClass('page-with-card-opened');\n\n    if (device.ios && $pageContentEl.length) {\n      $pageContentEl.css('height', `${$pageContentEl[0].offsetHeight + 1}px`);\n      setTimeout(() => {\n        $pageContentEl.css('height', '');\n      });\n    }\n\n    if ($backdropEl && $backdropEl.length) {\n      $backdropEl.removeClass('card-backdrop-in').addClass('card-backdrop-out');\n    }\n\n    $cardEl.removeClass('card-opened card-transitioning');\n\n    if (cardParams.animate) {\n      $cardEl.addClass('card-closing');\n    } else {\n      $cardEl.addClass('card-no-transition');\n    }\n\n    $cardEl.transform('');\n    $cardEl.trigger('card:close');\n    app.emit('cardClose', $cardEl[0], $pageEl[0]);\n    const animateWidth = $cardEl.hasClass('card-expandable-animate-width');\n\n    function transitionEnd() {\n      if (!animateWidth) {\n        $cardContentEl.css({\n          width: '',\n          height: ''\n        });\n      }\n\n      if ($backdropEl && $backdropEl.length) {\n        $backdropEl.removeClass('card-backdrop-in card-backdrop-out');\n      }\n\n      $cardEl.removeClass('card-closing card-no-transition');\n      $cardEl.trigger('card:closed');\n      $cardEl.find('.card-expandable-size').remove();\n      app.emit('cardClosed', $cardEl[0], $pageEl[0]);\n    }\n\n    if (animateWidth) {\n      $cardContentEl.css({\n        width: '',\n        height: ''\n      });\n    }\n\n    $cardContentEl.transform('').scrollTop(0, animate ? 300 : 0);\n\n    if ($cardScrollableEl.length && $cardScrollableEl[0] !== $cardContentEl[0]) {\n      $cardScrollableEl.scrollTop(0, animate ? 300 : 0);\n    }\n\n    if (animate) {\n      $cardContentEl.transitionEnd(() => {\n        transitionEnd();\n      });\n    } else {\n      transitionEnd();\n    }\n\n    if ($cardEl[0].detachEventHandlers) {\n      $cardEl[0].detachEventHandlers();\n      delete $cardEl[0].detachEventHandlers;\n    }\n  },\n\n  toggle(cardEl, animate) {\n    if (cardEl === void 0) {\n      cardEl = '.card-expandable';\n    }\n\n    const app = this;\n    const $cardEl = $(cardEl).eq(0);\n    if (!$cardEl.length) return;\n\n    if ($cardEl.hasClass('card-opened')) {\n      app.card.close($cardEl, animate);\n    } else {\n      app.card.open($cardEl, animate);\n    }\n  }\n\n};\nexport default {\n  name: 'card',\n  params: {\n    card: {\n      hideNavbarOnOpen: true,\n      hideStatusbarOnOpen: true,\n      hideToolbarOnOpen: true,\n      scrollableEl: '.card-content',\n      swipeToClose: true,\n      closeByBackdropClick: true,\n      backdrop: true\n    }\n  },\n\n  create() {\n    const app = this;\n    bindMethods(app, {\n      card: CardExpandable\n    });\n  },\n\n  on: {\n    pageBeforeIn(page) {\n      const app = this;\n\n      if (app.params.card.hideNavbarOnOpen && page.navbarEl && page.$el.find('.card-opened.card-expandable').length) {\n        app.navbar.hide(page.navbarEl, true, app.params.card.hideStatusbarOnOpen, true);\n      }\n\n      if (app.params.card.hideToolbarOnOpen && page.$el.find('.card-opened.card-expandable').length) {\n        let $toolbarEl = page.$el.children('.toolbar');\n\n        if (!$toolbarEl.length) {\n          $toolbarEl = page.$el.parents('.view').children('.toolbar');\n        }\n\n        if (!$toolbarEl.length) {\n          $toolbarEl = page.$el.parents('.views').children('.toolbar');\n        }\n\n        if ($toolbarEl && $toolbarEl.length) {\n          app.toolbar.hide($toolbarEl);\n        }\n      }\n    }\n\n  },\n  clicks: {\n    '.card-close': function closeCard($clickedEl, data) {\n      const app = this;\n      app.card.close(data.card, data.animate);\n    },\n    '.card-open': function closeCard($clickedEl, data) {\n      const app = this;\n      app.card.open(data.card, data.animate);\n    },\n    '.card-expandable': function toggleExpandableCard($clickedEl, data, e) {\n      const app = this;\n      if ($clickedEl.hasClass('card-opened') || $clickedEl.hasClass('card-opening') || $clickedEl.hasClass('card-closing')) return;\n      if ($(e.target).closest('.card-prevent-open, .card-close').length) return;\n      app.card.open($clickedEl);\n    },\n    '.card-backdrop-in': function onBackdropClick() {\n      const app = this;\n      let needToClose = false;\n      if (app.params.card.closeByBackdropClick) needToClose = true;\n      const $openedCardEl = $('.card-opened');\n      if (!$openedCardEl.length) return;\n\n      if ($openedCardEl.attr('data-close-by-backdrop-click') === 'true') {\n        needToClose = true;\n      } else if ($openedCardEl.attr('data-close-by-backdrop-click') === 'false') {\n        needToClose = false;\n      }\n\n      if (needToClose) app.card.close($openedCardEl);\n    }\n  }\n};","map":{"version":3,"names":["getDocument","bindMethods","getSupport","getDevice","$","CardExpandable","open","cardEl","animate","app","device","document","support","$cardEl","eq","length","hasClass","$pageEl","parents","find","prevented","prevent","trigger","emit","cardParams","Object","assign","params","card","dataset","$pageContentEl","$backdropEl","attr","backdrop","append","$navbarEl","$toolbarEl","hideNavbarOnOpen","children","f7Page","hideToolbarOnOpen","currTransform","css","hasTransform","match","$cardContentEl","$cardSizeEl","createElement","addClass","cardWidth","offsetWidth","cardHeight","offsetHeight","pageWidth","pageHeight","maxWidth","maxHeight","statusbarHeight","hideStatusbarOnOpen","parseInt","Number","isNaN","scaleX","scaleY","offset","pageOffset","top","left","cardLeftOffset","cardTopOffset","transformValues","replace","split","map","el","trim","scale","parseFloat","rtl","scrollLeft","offsetLeft","offsetTop","scrollTop","cardRightOffset","cardBottomOffset","translateX","translateY","closest","f7KeepNavbarOnClose","navbar","hide","f7KeepToolbarOnClose","toolbar","removeClass","transitionEnd","ios","setTimeout","width","height","transform","onResize","cardScrollTop","isTouched","isMoved","touchStartX","touchStartY","touchEndX","touchEndY","isScrolling","progress","isV","isH","$cardScrollableEl","onTouchStart","e","target","scrollableEl","contains","targetTouches","pageX","pageY","undefined","onTouchMove","Math","abs","clientX","max","preventDefault","close","onTouchEnd","detachEventHandlers","off","touch","swipeToClose","on","show","animateWidth","remove","toggle","name","closeByBackdropClick","create","pageBeforeIn","page","navbarEl","$el","clicks","closeCard","$clickedEl","data","toggleExpandableCard","onBackdropClick","needToClose","$openedCardEl"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/components/card/card.js"],"sourcesContent":["/* eslint no-param-reassign: \"off\" */\nimport { getDocument } from 'ssr-window';\nimport { bindMethods } from '../../shared/utils.js';\nimport { getSupport } from '../../shared/get-support.js';\nimport { getDevice } from '../../shared/get-device.js';\nimport $ from '../../shared/dom7.js';\nconst CardExpandable = {\n  open(cardEl, animate) {\n    if (cardEl === void 0) {\n      cardEl = '.card-expandable';\n    }\n\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    const app = this;\n    const device = getDevice();\n    const document = getDocument();\n    const support = getSupport();\n    const $cardEl = $(cardEl).eq(0);\n    if (!$cardEl || !$cardEl.length) return;\n    if ($cardEl.hasClass('card-opened') || $cardEl.hasClass('card-opening') || $cardEl.hasClass('card-closing')) return;\n    const $pageEl = $cardEl.parents('.page').eq(0);\n    if (!$pageEl.length) return;\n\n    if ($pageEl.find('.card-opened').length) {\n      return;\n    }\n\n    let prevented;\n\n    function prevent() {\n      prevented = true;\n    }\n\n    $cardEl.trigger('card:beforeopen', {\n      prevent\n    });\n    app.emit('cardBeforeOpen', $cardEl[0], prevent);\n    if (prevented) return;\n    const cardParams = Object.assign({\n      animate\n    }, app.params.card, $cardEl.dataset());\n    const $pageContentEl = $cardEl.parents('.page-content');\n    let $backdropEl;\n\n    if ($cardEl.attr('data-backdrop-el')) {\n      $backdropEl = $($cardEl.attr('data-backdrop-el'));\n    }\n\n    if (!$backdropEl && cardParams.backdrop) {\n      $backdropEl = $pageContentEl.find('.card-backdrop');\n\n      if (!$backdropEl.length) {\n        $backdropEl = $('<div class=\"card-backdrop\"></div>');\n        $pageContentEl.append($backdropEl);\n      }\n    }\n\n    let $navbarEl;\n    let $toolbarEl;\n\n    if (cardParams.hideNavbarOnOpen) {\n      $navbarEl = $pageEl.children('.navbar');\n\n      if (!$navbarEl.length) {\n        if ($pageEl[0].f7Page) $navbarEl = $pageEl[0].f7Page.$navbarEl;\n      }\n    }\n\n    if (cardParams.hideToolbarOnOpen) {\n      $toolbarEl = $pageEl.children('.toolbar');\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.view').children('.toolbar');\n      }\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.views').children('.toolbar');\n      }\n    }\n\n    const currTransform = $cardEl.css('transform');\n    let hasTransform;\n\n    if (currTransform && currTransform.match(/[2-9]/)) {\n      hasTransform = true;\n    }\n\n    const $cardContentEl = $cardEl.children('.card-content');\n    const $cardSizeEl = $(document.createElement('div')).addClass('card-expandable-size');\n    $cardEl.append($cardSizeEl);\n    let cardWidth = $cardEl[0].offsetWidth;\n    let cardHeight = $cardEl[0].offsetHeight;\n    let pageWidth = $pageEl[0].offsetWidth;\n    let pageHeight = $pageEl[0].offsetHeight;\n    let maxWidth = $cardSizeEl[0].offsetWidth || pageWidth;\n    let maxHeight = $cardSizeEl[0].offsetHeight || pageHeight;\n    let statusbarHeight;\n\n    if ($navbarEl && !cardParams.hideStatusbarOnOpen && maxHeight === pageHeight) {\n      statusbarHeight = parseInt($navbarEl.css('--f7-safe-area-top'), 10);\n      if (Number.isNaN(statusbarHeight)) statusbarHeight = 0;\n    }\n\n    if (statusbarHeight) {\n      maxHeight -= statusbarHeight;\n    }\n\n    let scaleX = maxWidth / cardWidth;\n    let scaleY = maxHeight / cardHeight;\n    let offset = $cardEl.offset();\n    let pageOffset = $pageEl.offset();\n\n    if (statusbarHeight) {\n      pageOffset.top += statusbarHeight / 2;\n    }\n\n    offset.left -= pageOffset.left;\n    let cardLeftOffset;\n    let cardTopOffset;\n\n    if (hasTransform) {\n      const transformValues = currTransform.replace(/matrix\\(|\\)/g, '').split(',').map(el => el.trim());\n\n      if (transformValues && transformValues.length > 1) {\n        const scale = parseFloat(transformValues[0]);\n        cardLeftOffset = offset.left - cardWidth * (1 - scale) / 2;\n        cardTopOffset = offset.top - pageOffset.top - cardHeight * (1 - scale) / 2;\n        if (app.rtl) cardLeftOffset -= $cardEl[0].scrollLeft;\n      } else {\n        cardLeftOffset = $cardEl[0].offsetLeft;\n        cardTopOffset = $cardEl[0].offsetTop - ($pageContentEl.length ? $pageContentEl[0].scrollTop : 0);\n      }\n    } else {\n      cardLeftOffset = offset.left;\n      cardTopOffset = offset.top - pageOffset.top;\n      if (app.rtl) cardLeftOffset -= $cardEl[0].scrollLeft;\n    }\n\n    cardLeftOffset -= (pageWidth - maxWidth) / 2;\n    cardTopOffset -= (pageHeight - maxHeight) / 2;\n    let cardRightOffset = maxWidth - cardWidth - cardLeftOffset;\n\n    if (app.rtl) {\n      [cardLeftOffset, cardRightOffset] = [cardRightOffset, cardLeftOffset];\n    }\n\n    let cardBottomOffset = maxHeight - cardHeight - cardTopOffset;\n    let translateX = (cardRightOffset - cardLeftOffset) / 2;\n    let translateY = (cardBottomOffset - cardTopOffset) / 2;\n\n    if (cardParams.hideNavbarOnOpen && $navbarEl && $navbarEl.length) {\n      if ($navbarEl.closest('.navbar-hidden').length) {\n        // Was hidden\n        $cardEl[0].f7KeepNavbarOnClose = true;\n      } else {\n        delete $cardEl[0].f7KeepNavbarOnClose;\n        app.navbar.hide($navbarEl, cardParams.animate, cardParams.hideStatusbarOnOpen, true);\n      }\n    }\n\n    if (cardParams.hideToolbarOnOpen && $toolbarEl && $toolbarEl.length) {\n      if ($toolbarEl.closest('.toolbar-hidden').length) {\n        // Was hidden\n        $cardEl[0].f7KeepToolbarOnClose = true;\n      } else {\n        delete $cardEl[0].f7KeepToolbarOnClose;\n        app.toolbar.hide($toolbarEl, cardParams.animate);\n      }\n    }\n\n    if ($backdropEl) {\n      $backdropEl.removeClass('card-backdrop-out').addClass('card-backdrop-in');\n    }\n\n    $cardEl.removeClass('card-transitioning');\n\n    if (cardParams.animate) {\n      $cardEl.addClass('card-opening');\n    }\n\n    $cardEl.trigger('card:open');\n    app.emit('cardOpen', $cardEl[0]);\n\n    function transitionEnd() {\n      $pageEl.addClass('page-with-card-opened');\n\n      if (device.ios && $pageContentEl.length) {\n        $pageContentEl.css('height', `${$pageContentEl[0].offsetHeight + 1}px`);\n        setTimeout(() => {\n          $pageContentEl.css('height', '');\n        });\n      }\n\n      $cardEl.addClass('card-opened');\n      $cardEl.removeClass('card-opening');\n      $cardEl.trigger('card:opened');\n      app.emit('cardOpened', $cardEl[0], $pageEl[0]);\n    }\n\n    $cardContentEl.css({\n      width: `${maxWidth}px`,\n      height: `${maxHeight}px`\n    }).transform(`translate3d(${app.rtl ? cardLeftOffset + translateX : -cardLeftOffset - translateX}px, 0px, 0) scale(${1 / scaleX}, ${1 / scaleY})`);\n    $cardEl.transform(`translate3d(${app.rtl ? -translateX : translateX}px, ${translateY}px, 0) scale(${scaleX}, ${scaleY})`);\n\n    if (cardParams.animate) {\n      $cardEl.transitionEnd(() => {\n        transitionEnd();\n      });\n    } else {\n      transitionEnd();\n    }\n\n    function onResize() {\n      $cardEl.removeClass('card-transitioning');\n      cardWidth = $cardEl[0].offsetWidth;\n      cardHeight = $cardEl[0].offsetHeight;\n      pageWidth = $pageEl[0].offsetWidth;\n      pageHeight = $pageEl[0].offsetHeight;\n      maxWidth = $cardSizeEl[0].offsetWidth || pageWidth;\n      maxHeight = $cardSizeEl[0].offsetHeight || pageHeight;\n      statusbarHeight = 0;\n\n      if ($navbarEl && !cardParams.hideStatusbarOnOpen && maxHeight === pageHeight) {\n        statusbarHeight = parseInt($navbarEl.css('--f7-safe-area-top'), 10);\n        if (Number.isNaN(statusbarHeight)) statusbarHeight = 0;\n      }\n\n      if (statusbarHeight) {\n        maxHeight -= statusbarHeight;\n      }\n\n      scaleX = maxWidth / cardWidth;\n      scaleY = maxHeight / cardHeight;\n      $cardEl.transform('translate3d(0px, 0px, 0) scale(1)');\n      offset = $cardEl.offset();\n      pageOffset = $pageEl.offset();\n\n      if (statusbarHeight) {\n        pageOffset.top += statusbarHeight / 2;\n      }\n\n      offset.left -= pageOffset.left;\n      offset.top -= pageOffset.top;\n      cardLeftOffset = offset.left - (pageWidth - maxWidth) / 2;\n      if (app.rtl) cardLeftOffset -= $cardEl[0].scrollLeft;\n      cardTopOffset = offset.top - (pageHeight - maxHeight) / 2;\n      cardRightOffset = maxWidth - cardWidth - cardLeftOffset;\n      cardBottomOffset = maxHeight - cardHeight - cardTopOffset;\n\n      if (app.rtl) {\n        [cardLeftOffset, cardRightOffset] = [cardRightOffset, cardLeftOffset];\n      }\n\n      translateX = (cardRightOffset - cardLeftOffset) / 2;\n      translateY = (cardBottomOffset - cardTopOffset) / 2;\n      $cardEl.transform(`translate3d(${app.rtl ? -translateX : translateX}px, ${translateY}px, 0) scale(${scaleX}, ${scaleY})`);\n      $cardContentEl.css({\n        width: `${maxWidth}px`,\n        height: `${maxHeight}px`\n      }).transform(`translate3d(${app.rtl ? cardLeftOffset + translateX : -cardLeftOffset - translateX}px, 0px, 0) scale(${1 / scaleX}, ${1 / scaleY})`);\n    }\n\n    let cardScrollTop;\n    let isTouched;\n    let isMoved;\n    let touchStartX;\n    let touchStartY;\n    let touchEndX;\n    let touchEndY;\n    let isScrolling;\n    let progress;\n    let isV;\n    let isH;\n    let $cardScrollableEl;\n\n    function onTouchStart(e) {\n      if (!$(e.target).closest($cardEl).length) return;\n      if (!$cardEl.hasClass('card-opened')) return;\n      $cardScrollableEl = $cardEl.find(cardParams.scrollableEl);\n\n      if ($cardScrollableEl[0] && $cardScrollableEl[0] !== $cardContentEl[0] && !$cardScrollableEl[0].contains(e.target)) {\n        cardScrollTop = 0;\n      } else {\n        cardScrollTop = $cardScrollableEl.scrollTop();\n      }\n\n      isTouched = true;\n      touchStartX = e.targetTouches[0].pageX;\n      touchStartY = e.targetTouches[0].pageY;\n      isScrolling = undefined;\n      isV = false;\n      isH = false;\n    }\n\n    function onTouchMove(e) {\n      if (!isTouched) return;\n      touchEndX = e.targetTouches[0].pageX;\n      touchEndY = e.targetTouches[0].pageY;\n\n      if (typeof isScrolling === 'undefined') {\n        isScrolling = !!(isScrolling || Math.abs(touchEndY - touchStartY) > Math.abs(touchEndX - touchStartX));\n      }\n\n      if (!isH && !isV) {\n        if (!isScrolling && e.targetTouches[0].clientX <= 50) {\n          isH = true;\n        } else {\n          isV = true;\n        }\n      }\n\n      if (!(isH || isV) || isV && cardScrollTop !== 0) {\n        isTouched = true;\n        isMoved = true;\n        return;\n      }\n\n      if (!isMoved) {\n        $cardEl.removeClass('card-transitioning');\n      }\n\n      isMoved = true;\n      progress = isV ? Math.max((touchEndY - touchStartY) / 150, 0) : Math.max((touchEndX - touchStartX) / (cardWidth / 2), 0);\n\n      if (progress > 0 && isV || isH) {\n        if (isV && device.ios && $cardScrollableEl[0] === $cardContentEl[0]) {\n          $cardScrollableEl.css('-webkit-overflow-scrolling', 'auto');\n          $cardScrollableEl.scrollTop(0);\n        }\n\n        e.preventDefault();\n      }\n\n      if (progress > 1) progress **= 0.3;\n\n      if (progress > (isV ? 1.3 : 1.1)) {\n        isTouched = false;\n        isMoved = false;\n        app.card.close($cardEl);\n      } else {\n        $cardEl.transform(`translate3d(${app.rtl ? -translateX : translateX}px, ${translateY}px, 0) scale(${scaleX * (1 - progress * 0.2)}, ${scaleY * (1 - progress * 0.2)})`);\n      }\n    }\n\n    function onTouchEnd() {\n      if (!isTouched || !isMoved) return;\n      isTouched = false;\n      isMoved = false;\n\n      if (device.ios) {\n        $cardScrollableEl.css('-webkit-overflow-scrolling', '');\n      }\n\n      if (progress >= 0.8) {\n        app.card.close($cardEl);\n      } else {\n        $cardEl.addClass('card-transitioning').transform(`translate3d(${app.rtl ? -translateX : translateX}px, ${translateY}px, 0) scale(${scaleX}, ${scaleY})`);\n      }\n    }\n\n    $cardEl[0].detachEventHandlers = function detachEventHandlers() {\n      app.off('resize', onResize);\n\n      if (support.touch && cardParams.swipeToClose) {\n        app.off('touchstart:passive', onTouchStart);\n        app.off('touchmove:active', onTouchMove);\n        app.off('touchend:passive', onTouchEnd);\n      }\n    };\n\n    app.on('resize', onResize);\n\n    if (support.touch && cardParams.swipeToClose) {\n      app.on('touchstart:passive', onTouchStart);\n      app.on('touchmove:active', onTouchMove);\n      app.on('touchend:passive', onTouchEnd);\n    }\n  },\n\n  close(cardEl, animate) {\n    if (cardEl === void 0) {\n      cardEl = '.card-expandable.card-opened';\n    }\n\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    const app = this;\n    const device = getDevice();\n    const $cardEl = $(cardEl).eq(0);\n    if (!$cardEl || !$cardEl.length) return;\n    if (!$cardEl.hasClass('card-opened') || $cardEl.hasClass('card-opening') || $cardEl.hasClass('card-closing')) return;\n    const $cardContentEl = $cardEl.children('.card-content');\n    const $pageContentEl = $cardEl.parents('.page-content');\n    const $pageEl = $cardEl.parents('.page').eq(0);\n    if (!$pageEl.length) return;\n    const cardParams = Object.assign({\n      animate\n    }, app.params.card, $cardEl.dataset());\n    const $cardScrollableEl = $cardEl.find(cardParams.scrollableEl);\n    let $navbarEl;\n    let $toolbarEl;\n    let $backdropEl;\n\n    if ($cardEl.attr('data-backdrop-el')) {\n      $backdropEl = $($cardEl.attr('data-backdrop-el'));\n    }\n\n    if (cardParams.backdrop) {\n      $backdropEl = $cardEl.parents('.page-content').find('.card-backdrop');\n    }\n\n    if (cardParams.hideNavbarOnOpen) {\n      $navbarEl = $pageEl.children('.navbar');\n\n      if (!$navbarEl.length) {\n        if ($pageEl[0].f7Page) $navbarEl = $pageEl[0].f7Page.$navbarEl;\n      }\n\n      if ($navbarEl && $navbarEl.length && !$cardEl[0].f7KeepNavbarOnClose) {\n        app.navbar.show($navbarEl, cardParams.animate, true);\n      }\n    }\n\n    if (cardParams.hideToolbarOnOpen) {\n      $toolbarEl = $pageEl.children('.toolbar');\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.view').children('.toolbar');\n      }\n\n      if (!$toolbarEl.length) {\n        $toolbarEl = $pageEl.parents('.views').children('.toolbar');\n      }\n\n      if ($toolbarEl && $toolbarEl.length && !$cardEl[0].f7KeepToolbarOnClose) {\n        app.toolbar.show($toolbarEl, cardParams.animate);\n      }\n    }\n\n    $pageEl.removeClass('page-with-card-opened');\n\n    if (device.ios && $pageContentEl.length) {\n      $pageContentEl.css('height', `${$pageContentEl[0].offsetHeight + 1}px`);\n      setTimeout(() => {\n        $pageContentEl.css('height', '');\n      });\n    }\n\n    if ($backdropEl && $backdropEl.length) {\n      $backdropEl.removeClass('card-backdrop-in').addClass('card-backdrop-out');\n    }\n\n    $cardEl.removeClass('card-opened card-transitioning');\n\n    if (cardParams.animate) {\n      $cardEl.addClass('card-closing');\n    } else {\n      $cardEl.addClass('card-no-transition');\n    }\n\n    $cardEl.transform('');\n    $cardEl.trigger('card:close');\n    app.emit('cardClose', $cardEl[0], $pageEl[0]);\n    const animateWidth = $cardEl.hasClass('card-expandable-animate-width');\n\n    function transitionEnd() {\n      if (!animateWidth) {\n        $cardContentEl.css({\n          width: '',\n          height: ''\n        });\n      }\n\n      if ($backdropEl && $backdropEl.length) {\n        $backdropEl.removeClass('card-backdrop-in card-backdrop-out');\n      }\n\n      $cardEl.removeClass('card-closing card-no-transition');\n      $cardEl.trigger('card:closed');\n      $cardEl.find('.card-expandable-size').remove();\n      app.emit('cardClosed', $cardEl[0], $pageEl[0]);\n    }\n\n    if (animateWidth) {\n      $cardContentEl.css({\n        width: '',\n        height: ''\n      });\n    }\n\n    $cardContentEl.transform('').scrollTop(0, animate ? 300 : 0);\n\n    if ($cardScrollableEl.length && $cardScrollableEl[0] !== $cardContentEl[0]) {\n      $cardScrollableEl.scrollTop(0, animate ? 300 : 0);\n    }\n\n    if (animate) {\n      $cardContentEl.transitionEnd(() => {\n        transitionEnd();\n      });\n    } else {\n      transitionEnd();\n    }\n\n    if ($cardEl[0].detachEventHandlers) {\n      $cardEl[0].detachEventHandlers();\n      delete $cardEl[0].detachEventHandlers;\n    }\n  },\n\n  toggle(cardEl, animate) {\n    if (cardEl === void 0) {\n      cardEl = '.card-expandable';\n    }\n\n    const app = this;\n    const $cardEl = $(cardEl).eq(0);\n    if (!$cardEl.length) return;\n\n    if ($cardEl.hasClass('card-opened')) {\n      app.card.close($cardEl, animate);\n    } else {\n      app.card.open($cardEl, animate);\n    }\n  }\n\n};\nexport default {\n  name: 'card',\n  params: {\n    card: {\n      hideNavbarOnOpen: true,\n      hideStatusbarOnOpen: true,\n      hideToolbarOnOpen: true,\n      scrollableEl: '.card-content',\n      swipeToClose: true,\n      closeByBackdropClick: true,\n      backdrop: true\n    }\n  },\n\n  create() {\n    const app = this;\n    bindMethods(app, {\n      card: CardExpandable\n    });\n  },\n\n  on: {\n    pageBeforeIn(page) {\n      const app = this;\n\n      if (app.params.card.hideNavbarOnOpen && page.navbarEl && page.$el.find('.card-opened.card-expandable').length) {\n        app.navbar.hide(page.navbarEl, true, app.params.card.hideStatusbarOnOpen, true);\n      }\n\n      if (app.params.card.hideToolbarOnOpen && page.$el.find('.card-opened.card-expandable').length) {\n        let $toolbarEl = page.$el.children('.toolbar');\n\n        if (!$toolbarEl.length) {\n          $toolbarEl = page.$el.parents('.view').children('.toolbar');\n        }\n\n        if (!$toolbarEl.length) {\n          $toolbarEl = page.$el.parents('.views').children('.toolbar');\n        }\n\n        if ($toolbarEl && $toolbarEl.length) {\n          app.toolbar.hide($toolbarEl);\n        }\n      }\n    }\n\n  },\n  clicks: {\n    '.card-close': function closeCard($clickedEl, data) {\n      const app = this;\n      app.card.close(data.card, data.animate);\n    },\n    '.card-open': function closeCard($clickedEl, data) {\n      const app = this;\n      app.card.open(data.card, data.animate);\n    },\n    '.card-expandable': function toggleExpandableCard($clickedEl, data, e) {\n      const app = this;\n      if ($clickedEl.hasClass('card-opened') || $clickedEl.hasClass('card-opening') || $clickedEl.hasClass('card-closing')) return;\n      if ($(e.target).closest('.card-prevent-open, .card-close').length) return;\n      app.card.open($clickedEl);\n    },\n    '.card-backdrop-in': function onBackdropClick() {\n      const app = this;\n      let needToClose = false;\n      if (app.params.card.closeByBackdropClick) needToClose = true;\n      const $openedCardEl = $('.card-opened');\n      if (!$openedCardEl.length) return;\n\n      if ($openedCardEl.attr('data-close-by-backdrop-click') === 'true') {\n        needToClose = true;\n      } else if ($openedCardEl.attr('data-close-by-backdrop-click') === 'false') {\n        needToClose = false;\n      }\n\n      if (needToClose) app.card.close($openedCardEl);\n    }\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}