{"ast":null,"code":"import { getWindow } from 'ssr-window';\nimport { extend } from '../../shared/utils.js';\nconst SW = {\n  registrations: [],\n\n  register(path, scope) {\n    const app = this;\n    const window = getWindow();\n\n    if (!('serviceWorker' in window.navigator) || !app.serviceWorker.container) {\n      return new Promise((resolve, reject) => {\n        reject(new Error('Service worker is not supported'));\n      });\n    }\n\n    return new Promise((resolve, reject) => {\n      app.serviceWorker.container.register(path, scope ? {\n        scope\n      } : {}).then(reg => {\n        SW.registrations.push(reg);\n        app.emit('serviceWorkerRegisterSuccess', reg);\n        resolve(reg);\n      }).catch(error => {\n        app.emit('serviceWorkerRegisterError', error);\n        reject(error);\n      });\n    });\n  },\n\n  unregister(registration) {\n    const app = this;\n    const window = getWindow();\n\n    if (!('serviceWorker' in window.navigator) || !app.serviceWorker.container) {\n      return new Promise((resolve, reject) => {\n        reject(new Error('Service worker is not supported'));\n      });\n    }\n\n    let registrations;\n    if (!registration) registrations = SW.registrations;else if (Array.isArray(registration)) registrations = registration;else registrations = [registration];\n    return Promise.all(registrations.map(reg => new Promise((resolve, reject) => {\n      reg.unregister().then(() => {\n        if (SW.registrations.indexOf(reg) >= 0) {\n          SW.registrations.splice(SW.registrations.indexOf(reg), 1);\n        }\n\n        app.emit('serviceWorkerUnregisterSuccess', reg);\n        resolve();\n      }).catch(error => {\n        app.emit('serviceWorkerUnregisterError', reg, error);\n        reject(error);\n      });\n    })));\n  }\n\n};\nexport default {\n  name: 'sw',\n  params: {\n    serviceWorker: {\n      path: undefined,\n      scope: undefined\n    }\n  },\n\n  create() {\n    const app = this;\n    const window = getWindow();\n    extend(app, {\n      serviceWorker: {\n        container: 'serviceWorker' in window.navigator ? window.navigator.serviceWorker : undefined,\n        registrations: SW.registrations,\n        register: SW.register.bind(app),\n        unregister: SW.unregister.bind(app)\n      }\n    });\n  },\n\n  on: {\n    init() {\n      const window = getWindow();\n      if (!('serviceWorker' in window.navigator)) return;\n      const app = this;\n      if (app.device.cordova || window.Capacitor && window.Capacitor.isNative) return;\n      if (!app.serviceWorker.container) return;\n      const paths = app.params.serviceWorker.path;\n      const scope = app.params.serviceWorker.scope;\n      if (!paths || Array.isArray(paths) && !paths.length) return;\n      const toRegister = Array.isArray(paths) ? paths : [paths];\n      toRegister.forEach(path => {\n        app.serviceWorker.register(path, scope);\n      });\n    }\n\n  }\n};","map":{"version":3,"names":["getWindow","extend","SW","registrations","register","path","scope","app","window","navigator","serviceWorker","container","Promise","resolve","reject","Error","then","reg","push","emit","catch","error","unregister","registration","Array","isArray","all","map","indexOf","splice","name","params","undefined","create","bind","on","init","device","cordova","Capacitor","isNative","paths","length","toRegister","forEach"],"sources":["C:/Users/Babak/userlogin/node_modules/framework7/modules/service-worker/service-worker.js"],"sourcesContent":["import { getWindow } from 'ssr-window';\nimport { extend } from '../../shared/utils.js';\nconst SW = {\n  registrations: [],\n\n  register(path, scope) {\n    const app = this;\n    const window = getWindow();\n\n    if (!('serviceWorker' in window.navigator) || !app.serviceWorker.container) {\n      return new Promise((resolve, reject) => {\n        reject(new Error('Service worker is not supported'));\n      });\n    }\n\n    return new Promise((resolve, reject) => {\n      app.serviceWorker.container.register(path, scope ? {\n        scope\n      } : {}).then(reg => {\n        SW.registrations.push(reg);\n        app.emit('serviceWorkerRegisterSuccess', reg);\n        resolve(reg);\n      }).catch(error => {\n        app.emit('serviceWorkerRegisterError', error);\n        reject(error);\n      });\n    });\n  },\n\n  unregister(registration) {\n    const app = this;\n    const window = getWindow();\n\n    if (!('serviceWorker' in window.navigator) || !app.serviceWorker.container) {\n      return new Promise((resolve, reject) => {\n        reject(new Error('Service worker is not supported'));\n      });\n    }\n\n    let registrations;\n    if (!registration) registrations = SW.registrations;else if (Array.isArray(registration)) registrations = registration;else registrations = [registration];\n    return Promise.all(registrations.map(reg => new Promise((resolve, reject) => {\n      reg.unregister().then(() => {\n        if (SW.registrations.indexOf(reg) >= 0) {\n          SW.registrations.splice(SW.registrations.indexOf(reg), 1);\n        }\n\n        app.emit('serviceWorkerUnregisterSuccess', reg);\n        resolve();\n      }).catch(error => {\n        app.emit('serviceWorkerUnregisterError', reg, error);\n        reject(error);\n      });\n    })));\n  }\n\n};\nexport default {\n  name: 'sw',\n  params: {\n    serviceWorker: {\n      path: undefined,\n      scope: undefined\n    }\n  },\n\n  create() {\n    const app = this;\n    const window = getWindow();\n    extend(app, {\n      serviceWorker: {\n        container: 'serviceWorker' in window.navigator ? window.navigator.serviceWorker : undefined,\n        registrations: SW.registrations,\n        register: SW.register.bind(app),\n        unregister: SW.unregister.bind(app)\n      }\n    });\n  },\n\n  on: {\n    init() {\n      const window = getWindow();\n      if (!('serviceWorker' in window.navigator)) return;\n      const app = this;\n      if (app.device.cordova || window.Capacitor && window.Capacitor.isNative) return;\n      if (!app.serviceWorker.container) return;\n      const paths = app.params.serviceWorker.path;\n      const scope = app.params.serviceWorker.scope;\n      if (!paths || Array.isArray(paths) && !paths.length) return;\n      const toRegister = Array.isArray(paths) ? paths : [paths];\n      toRegister.forEach(path => {\n        app.serviceWorker.register(path, scope);\n      });\n    }\n\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}